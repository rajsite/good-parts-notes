(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define("vireoHelpers",factory):global.vireoHelpers=factory()})(this,function(){"use strict";var VireoCreateCoreModule=function(){var _scriptDir=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:undefined;return function(VireoCreateCoreModule){VireoCreateCoreModule=VireoCreateCoreModule||{};var Module=typeof VireoCreateCoreModule!=="undefined"?VireoCreateCoreModule:{};Module.vireoprejs=function(){};var moduleOverrides={};var key;for(key in Module){if(Module.hasOwnProperty(key)){moduleOverrides[key]=Module[key]}}Module["arguments"]=[];Module["thisProgram"]="./this.program";Module["quit"]=function(status,toThrow){throw toThrow};Module["preRun"]=[];Module["postRun"]=[];var ENVIRONMENT_IS_WEB=false;var ENVIRONMENT_IS_WORKER=false;var ENVIRONMENT_IS_NODE=false;var ENVIRONMENT_IS_SHELL=false;ENVIRONMENT_IS_WEB=typeof window==="object";ENVIRONMENT_IS_WORKER=typeof importScripts==="function";ENVIRONMENT_IS_NODE=typeof process==="object"&&typeof require==="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER;ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;var scriptDirectory="";function locateFile(path){if(Module["locateFile"]){return Module["locateFile"](path,scriptDirectory)}else{return scriptDirectory+path}}if(ENVIRONMENT_IS_NODE){scriptDirectory=__dirname+"/";var nodeFS;var nodePath;Module["read"]=function shell_read(filename,binary){var ret;if(!nodeFS)nodeFS=require("fs");if(!nodePath)nodePath=require("path");filename=nodePath["normalize"](filename);ret=nodeFS["readFileSync"](filename);return binary?ret:ret.toString()};Module["readBinary"]=function readBinary(filename){var ret=Module["read"](filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}assert(ret.buffer);return ret};if(process["argv"].length>1){Module["thisProgram"]=process["argv"][1].replace(/\\/g,"/")}Module["arguments"]=process["argv"].slice(2);process["on"]("uncaughtException",function(ex){if(!(ex instanceof ExitStatus)){throw ex}});process["on"]("unhandledRejection",function(reason,p){process["exit"](1)});Module["quit"]=function(status){process["exit"](status)};Module["inspect"]=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL){if(typeof read!="undefined"){Module["read"]=function shell_read(f){return read(f)}}Module["readBinary"]=function readBinary(f){var data;if(typeof readbuffer==="function"){return new Uint8Array(readbuffer(f))}data=read(f,"binary");assert(typeof data==="object");return data};if(typeof scriptArgs!="undefined"){Module["arguments"]=scriptArgs}else if(typeof arguments!="undefined"){Module["arguments"]=arguments}if(typeof quit==="function"){Module["quit"]=function(status){quit(status)}}}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WEB){if(document.currentScript){scriptDirectory=document.currentScript.src}}else{scriptDirectory=self.location.href}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf("blob:")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.lastIndexOf("/")+1)}else{scriptDirectory=""}Module["read"]=function shell_read(url){var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){Module["readBinary"]=function readBinary(url){var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.responseType="arraybuffer";xhr.send(null);return new Uint8Array(xhr.response)}}Module["readAsync"]=function readAsync(url,onload,onerror){var xhr=new XMLHttpRequest;xhr.open("GET",url,true);xhr.responseType="arraybuffer";xhr.onload=function xhr_onload(){if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)};Module["setWindowTitle"]=function(title){document.title=title}}var out=Module["print"]||(typeof console!=="undefined"?console.log.bind(console):typeof print!=="undefined"?print:null);var err=Module["printErr"]||(typeof printErr!=="undefined"?printErr:typeof console!=="undefined"&&console.warn.bind(console)||out);for(key in moduleOverrides){if(moduleOverrides.hasOwnProperty(key)){Module[key]=moduleOverrides[key]}}moduleOverrides=undefined;var STACK_ALIGN=16;function staticAlloc(size){var ret=STATICTOP;STATICTOP=STATICTOP+size+15&-16;return ret}function dynamicAlloc(size){var ret=HEAP32[DYNAMICTOP_PTR>>2];var end=ret+size+15&-16;HEAP32[DYNAMICTOP_PTR>>2]=end;if(end>=TOTAL_MEMORY){var success=enlargeMemory();if(!success){HEAP32[DYNAMICTOP_PTR>>2]=ret;return 0}}return ret}function alignMemory(size,factor){if(!factor)factor=STACK_ALIGN;var ret=size=Math.ceil(size/factor)*factor;return ret}function getNativeTypeSize(type){switch(type){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(type[type.length-1]==="*"){return 4}else if(type[0]==="i"){var bits=parseInt(type.substr(1));assert(bits%8===0);return bits/8}else{return 0}}}}var asm2wasmImports={"f64-rem":function(x,y){return x%y},debugger:function(){debugger},"f64-to-int":function(x){return x|0},"i32s-div":function(x,y){return(x|0)/(y|0)|0},"i32u-div":function(x,y){return(x>>>0)/(y>>>0)>>>0},"i32s-rem":function(x,y){return(x|0)%(y|0)|0},"i32u-rem":function(x,y){return(x>>>0)%(y>>>0)>>>0}};var GLOBAL_BASE=1024;var ABORT=false;function assert(condition,text){if(!condition){abort("Assertion failed: "+text)}}function getCFunc(ident){var func=Module["_"+ident];assert(func,"Cannot call unknown function "+ident+", make sure it is exported");return func}var JSfuncs={stackSave:function(){stackSave()},stackRestore:function(){stackRestore()},arrayToC:function(arr){var ret=stackAlloc(arr.length);writeArrayToMemory(arr,ret);return ret},stringToC:function(str){var ret=0;if(str!==null&&str!==undefined&&str!==0){var len=(str.length<<2)+1;ret=stackAlloc(len);stringToUTF8(str,ret,len)}return ret}};var toC={string:JSfuncs["stringToC"],array:JSfuncs["arrayToC"]};function ccall(ident,returnType,argTypes,args,opts){function convertReturnValue(ret){if(returnType==="string")return Pointer_stringify(ret);if(returnType==="boolean")return Boolean(ret);return ret}var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var ret=func.apply(null,cArgs);ret=convertReturnValue(ret);if(stack!==0)stackRestore(stack);return ret}function cwrap(ident,returnType,argTypes,opts){argTypes=argTypes||[];var numericArgs=argTypes.every(function(type){return type==="number"});var numericRet=returnType!=="string";if(numericRet&&numericArgs&&!opts){return getCFunc(ident)}return function(){return ccall(ident,returnType,argTypes,arguments,opts)}}function setValue(ptr,value,type,noSafe){type=type||"i8";if(type.charAt(type.length-1)==="*")type="i32";switch(type){case"i1":HEAP8[ptr>>0]=value;break;case"i8":HEAP8[ptr>>0]=value;break;case"i16":HEAP16[ptr>>1]=value;break;case"i32":HEAP32[ptr>>2]=value;break;case"i64":tempI64=[value>>>0,(tempDouble=value,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[ptr>>2]=tempI64[0],HEAP32[ptr+4>>2]=tempI64[1];break;case"float":HEAPF32[ptr>>2]=value;break;case"double":HEAPF64[ptr>>3]=value;break;default:abort("invalid type for setValue: "+type)}}function getValue(ptr,type,noSafe){type=type||"i8";if(type.charAt(type.length-1)==="*")type="i32";switch(type){case"i1":return HEAP8[ptr>>0];case"i8":return HEAP8[ptr>>0];case"i16":return HEAP16[ptr>>1];case"i32":return HEAP32[ptr>>2];case"i64":return HEAP32[ptr>>2];case"float":return HEAPF32[ptr>>2];case"double":return HEAPF64[ptr>>3];default:abort("invalid type for getValue: "+type)}return null}var ALLOC_NORMAL=0;var ALLOC_STATIC=2;var ALLOC_NONE=4;function allocate(slab,types,allocator,ptr){var zeroinit,size;if(typeof slab==="number"){zeroinit=true;size=slab}else{zeroinit=false;size=slab.length}var singleType=typeof types==="string"?types:null;var ret;if(allocator==ALLOC_NONE){ret=ptr}else{ret=[typeof _malloc==="function"?_malloc:staticAlloc,stackAlloc,staticAlloc,dynamicAlloc][allocator===undefined?ALLOC_STATIC:allocator](Math.max(size,singleType?1:types.length))}if(zeroinit){var stop;ptr=ret;assert((ret&3)==0);stop=ret+(size&~3);for(;ptr<stop;ptr+=4){HEAP32[ptr>>2]=0}stop=ret+size;while(ptr<stop){HEAP8[ptr++>>0]=0}return ret}if(singleType==="i8"){if(slab.subarray||slab.slice){HEAPU8.set(slab,ret)}else{HEAPU8.set(new Uint8Array(slab),ret)}return ret}var i=0,type,typeSize,previousType;while(i<size){var curr=slab[i];type=singleType||types[i];if(type===0){i++;continue}if(type=="i64")type="i32";setValue(ret+i,curr,type);if(previousType!==type){typeSize=getNativeTypeSize(type);previousType=type}i+=typeSize}return ret}function getMemory(size){if(!staticSealed)return staticAlloc(size);if(!runtimeInitialized)return dynamicAlloc(size);return _malloc(size)}function Pointer_stringify(ptr,length){if(length===0||!ptr)return"";var hasUtf=0;var t;var i=0;while(1){t=HEAPU8[ptr+i>>0];hasUtf|=t;if(t==0&&!length)break;i++;if(length&&i==length)break}if(!length)length=i;var ret="";if(hasUtf<128){var MAX_CHUNK=1024;var curr;while(length>0){curr=String.fromCharCode.apply(String,HEAPU8.subarray(ptr,ptr+Math.min(length,MAX_CHUNK)));ret=ret?ret+curr:curr;ptr+=MAX_CHUNK;length-=MAX_CHUNK}return ret}return UTF8ToString(ptr)}var UTF8Decoder=typeof TextDecoder!=="undefined"?new TextDecoder("utf8"):undefined;function UTF8ArrayToString(u8Array,idx){var endPtr=idx;while(u8Array[endPtr])++endPtr;if(endPtr-idx>16&&u8Array.subarray&&UTF8Decoder){return UTF8Decoder.decode(u8Array.subarray(idx,endPtr))}else{var u0,u1,u2,u3,u4,u5;var str="";while(1){u0=u8Array[idx++];if(!u0)return str;if(!(u0&128)){str+=String.fromCharCode(u0);continue}u1=u8Array[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}u2=u8Array[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u3=u8Array[idx++]&63;if((u0&248)==240){u0=(u0&7)<<18|u1<<12|u2<<6|u3}else{u4=u8Array[idx++]&63;if((u0&252)==248){u0=(u0&3)<<24|u1<<18|u2<<12|u3<<6|u4}else{u5=u8Array[idx++]&63;u0=(u0&1)<<30|u1<<24|u2<<18|u3<<12|u4<<6|u5}}}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}}}function UTF8ToString(ptr){return UTF8ArrayToString(HEAPU8,ptr)}function stringToUTF8Array(str,outU8Array,outIdx,maxBytesToWrite){if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;outU8Array[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;outU8Array[outIdx++]=192|u>>6;outU8Array[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;outU8Array[outIdx++]=224|u>>12;outU8Array[outIdx++]=128|u>>6&63;outU8Array[outIdx++]=128|u&63}else if(u<=2097151){if(outIdx+3>=endIdx)break;outU8Array[outIdx++]=240|u>>18;outU8Array[outIdx++]=128|u>>12&63;outU8Array[outIdx++]=128|u>>6&63;outU8Array[outIdx++]=128|u&63}else if(u<=67108863){if(outIdx+4>=endIdx)break;outU8Array[outIdx++]=248|u>>24;outU8Array[outIdx++]=128|u>>18&63;outU8Array[outIdx++]=128|u>>12&63;outU8Array[outIdx++]=128|u>>6&63;outU8Array[outIdx++]=128|u&63}else{if(outIdx+5>=endIdx)break;outU8Array[outIdx++]=252|u>>30;outU8Array[outIdx++]=128|u>>24&63;outU8Array[outIdx++]=128|u>>18&63;outU8Array[outIdx++]=128|u>>12&63;outU8Array[outIdx++]=128|u>>6&63;outU8Array[outIdx++]=128|u&63}}outU8Array[outIdx]=0;return outIdx-startIdx}function stringToUTF8(str,outPtr,maxBytesToWrite){return stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite)}function lengthBytesUTF8(str){var len=0;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343)u=65536+((u&1023)<<10)|str.charCodeAt(++i)&1023;if(u<=127){++len}else if(u<=2047){len+=2}else if(u<=65535){len+=3}else if(u<=2097151){len+=4}else if(u<=67108863){len+=5}else{len+=6}}return len}var UTF16Decoder=typeof TextDecoder!=="undefined"?new TextDecoder("utf-16le"):undefined;function demangle(func){return func}function demangleAll(text){var regex=/__Z[\w\d_]+/g;return text.replace(regex,function(x){var y=demangle(x);return x===y?x:x+" ["+y+"]"})}function jsStackTrace(){var err=new Error;if(!err.stack){try{throw new Error(0)}catch(e){err=e}if(!err.stack){return"(no stack trace available)"}}return err.stack.toString()}function stackTrace(){var js=jsStackTrace();if(Module["extraStackTrace"])js+="\n"+Module["extraStackTrace"]();return demangleAll(js)}var WASM_PAGE_SIZE=65536;var ASMJS_PAGE_SIZE=16777216;var MIN_TOTAL_MEMORY=16777216;function alignUp(x,multiple){if(x%multiple>0){x+=multiple-x%multiple}return x}var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(buf){Module["buffer"]=buffer=buf}function updateGlobalBufferViews(){Module["HEAP8"]=HEAP8=new Int8Array(buffer);Module["HEAP16"]=HEAP16=new Int16Array(buffer);Module["HEAP32"]=HEAP32=new Int32Array(buffer);Module["HEAPU8"]=HEAPU8=new Uint8Array(buffer);Module["HEAPU16"]=HEAPU16=new Uint16Array(buffer);Module["HEAPU32"]=HEAPU32=new Uint32Array(buffer);Module["HEAPF32"]=HEAPF32=new Float32Array(buffer);Module["HEAPF64"]=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed;var STACK_BASE,STACKTOP,STACK_MAX;var DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0;staticSealed=false;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}if(!Module["reallocBuffer"])Module["reallocBuffer"]=function(size){var ret;try{var oldHEAP8=HEAP8;ret=new ArrayBuffer(size);var temp=new Int8Array(ret);temp.set(oldHEAP8)}catch(e){return false}var success=_emscripten_replace_memory(ret);if(!success)return false;return ret};function enlargeMemory(){var PAGE_MULTIPLE=Module["usingWasm"]?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;var LIMIT=2147483648-PAGE_MULTIPLE;if(HEAP32[DYNAMICTOP_PTR>>2]>LIMIT){return false}var OLD_TOTAL_MEMORY=TOTAL_MEMORY;TOTAL_MEMORY=Math.max(TOTAL_MEMORY,MIN_TOTAL_MEMORY);while(TOTAL_MEMORY<HEAP32[DYNAMICTOP_PTR>>2]){if(TOTAL_MEMORY<=536870912){TOTAL_MEMORY=alignUp(2*TOTAL_MEMORY,PAGE_MULTIPLE)}else{TOTAL_MEMORY=Math.min(alignUp((3*TOTAL_MEMORY+2147483648)/4,PAGE_MULTIPLE),LIMIT)}}var replacement=Module["reallocBuffer"](TOTAL_MEMORY);if(!replacement||replacement.byteLength!=TOTAL_MEMORY){TOTAL_MEMORY=OLD_TOTAL_MEMORY;return false}updateGlobalBuffer(replacement);updateGlobalBufferViews();return true}var byteLength;try{byteLength=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get);byteLength(new ArrayBuffer(4))}catch(e){byteLength=function(buffer){return buffer.byteLength}}var TOTAL_STACK=Module["TOTAL_STACK"]||5242880;var TOTAL_MEMORY=Module["TOTAL_MEMORY"]||16777216;if(TOTAL_MEMORY<TOTAL_STACK)err("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")");if(Module["buffer"]){buffer=Module["buffer"]}else{if(typeof WebAssembly==="object"&&typeof WebAssembly.Memory==="function"){Module["wasmMemory"]=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE});buffer=Module["wasmMemory"].buffer}else{buffer=new ArrayBuffer(TOTAL_MEMORY)}Module["buffer"]=buffer}updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}function callRuntimeCallbacks(callbacks){while(callbacks.length>0){var callback=callbacks.shift();if(typeof callback=="function"){callback();continue}var func=callback.func;if(typeof func==="number"){if(callback.arg===undefined){Module["dynCall_v"](func)}else{Module["dynCall_vi"](func,callback.arg)}}else{func(callback.arg===undefined?null:callback.arg)}}}var __ATPRERUN__=[];var __ATINIT__=[];var __ATMAIN__=[];var __ATEXIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){if(Module["preRun"]){if(typeof Module["preRun"]=="function")Module["preRun"]=[Module["preRun"]];while(Module["preRun"].length){addOnPreRun(Module["preRun"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){if(runtimeInitialized)return;runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module["postRun"]){if(typeof Module["postRun"]=="function")Module["postRun"]=[Module["postRun"]];while(Module["postRun"].length){addOnPostRun(Module["postRun"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}function writeArrayToMemory(array,buffer){HEAP8.set(array,buffer)}function writeAsciiToMemory(str,buffer,dontAddNull){for(var i=0;i<str.length;++i){HEAP8[buffer++>>0]=str.charCodeAt(i)}if(!dontAddNull)HEAP8[buffer>>0]=0}var Math_abs=Math.abs;var Math_ceil=Math.ceil;var Math_floor=Math.floor;var Math_min=Math.min;var Math_trunc=Math.trunc;var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function getUniqueRunDependency(id){return id}function addRunDependency(id){runDependencies++;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}Module["preloadedImages"]={};Module["preloadedAudios"]={};var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(filename){return String.prototype.startsWith?filename.startsWith(dataURIPrefix):filename.indexOf(dataURIPrefix)===0}function integrateWasmJS(){var wasmTextFile="vireo.core.wast";var wasmBinaryFile="vireo.core.wasm";var asmjsCodeFile="vireo.core.temp.asm.js";if(!isDataURI(wasmTextFile)){wasmTextFile=locateFile(wasmTextFile)}if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}if(!isDataURI(asmjsCodeFile)){asmjsCodeFile=locateFile(asmjsCodeFile)}var wasmPageSize=64*1024;var info={global:null,env:null,asm2wasm:asm2wasmImports,parent:Module};var exports=null;function mergeMemory(newBuffer){var oldBuffer=Module["buffer"];if(newBuffer.byteLength<oldBuffer.byteLength){err("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here")}var oldView=new Int8Array(oldBuffer);var newView=new Int8Array(newBuffer);newView.set(oldView);updateGlobalBuffer(newBuffer);updateGlobalBufferViews()}function fixImports(imports){return imports}function getBinary(){try{if(Module["wasmBinary"]){return new Uint8Array(Module["wasmBinary"])}if(Module["readBinary"]){return Module["readBinary"](wasmBinaryFile)}else{throw"both async and sync fetching of the wasm failed"}}catch(err){abort(err)}}function getBinaryPromise(){if(!Module["wasmBinary"]&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&typeof fetch==="function"){return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(response){if(!response["ok"]){throw"failed to load wasm binary file at '"+wasmBinaryFile+"'"}return response["arrayBuffer"]()}).catch(function(){return getBinary()})}return new Promise(function(resolve,reject){resolve(getBinary())})}function doNativeWasm(global,env,providedBuffer){if(typeof WebAssembly!=="object"){err("no native wasm support detected");return false}if(!(Module["wasmMemory"]instanceof WebAssembly.Memory)){err("no native wasm Memory in use");return false}env["memory"]=Module["wasmMemory"];info["global"]={NaN:NaN,Infinity:Infinity};info["global.Math"]=Math;info["env"]=env;function receiveInstance(instance,module){exports=instance.exports;if(exports.memory)mergeMemory(exports.memory);Module["asm"]=exports;Module["usingWasm"]=true;removeRunDependency("wasm-instantiate")}addRunDependency("wasm-instantiate");if(Module["instantiateWasm"]){try{return Module["instantiateWasm"](info,receiveInstance)}catch(e){err("Module.instantiateWasm callback failed with error: "+e);return false}}function receiveInstantiatedSource(output){receiveInstance(output["instance"],output["module"])}function instantiateArrayBuffer(receiver){getBinaryPromise().then(function(binary){return WebAssembly.instantiate(binary,info)}).then(receiver).catch(function(reason){err("failed to asynchronously prepare wasm: "+reason);abort(reason)})}if(!Module["wasmBinary"]&&typeof WebAssembly.instantiateStreaming==="function"&&!isDataURI(wasmBinaryFile)&&typeof fetch==="function"){WebAssembly.instantiateStreaming(fetch(wasmBinaryFile,{credentials:"same-origin"}),info).then(receiveInstantiatedSource).catch(function(reason){err("wasm streaming compile failed: "+reason);err("falling back to ArrayBuffer instantiation");instantiateArrayBuffer(receiveInstantiatedSource)})}else{instantiateArrayBuffer(receiveInstantiatedSource)}return{}}Module["asmPreload"]=Module["asm"];var asmjsReallocBuffer=Module["reallocBuffer"];var wasmReallocBuffer=function(size){var PAGE_MULTIPLE=Module["usingWasm"]?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;size=alignUp(size,PAGE_MULTIPLE);var old=Module["buffer"];var oldSize=old.byteLength;if(Module["usingWasm"]){try{var result=Module["wasmMemory"].grow((size-oldSize)/wasmPageSize);if(result!==(-1|0)){return Module["buffer"]=Module["wasmMemory"].buffer}else{return null}}catch(e){return null}}};Module["reallocBuffer"]=function(size){{return wasmReallocBuffer(size)}};Module["asm"]=function(global,env,providedBuffer){env=fixImports(env);if(!env["table"]){var TABLE_SIZE=Module["wasmTableSize"];if(TABLE_SIZE===undefined)TABLE_SIZE=1024;var MAX_TABLE_SIZE=Module["wasmMaxTableSize"];if(typeof WebAssembly==="object"&&typeof WebAssembly.Table==="function"){if(MAX_TABLE_SIZE!==undefined){env["table"]=new WebAssembly.Table({initial:TABLE_SIZE,maximum:MAX_TABLE_SIZE,element:"anyfunc"})}else{env["table"]=new WebAssembly.Table({initial:TABLE_SIZE,element:"anyfunc"})}}else{env["table"]=new Array(TABLE_SIZE)}Module["wasmTable"]=env["table"]}if(!env["memoryBase"]){env["memoryBase"]=Module["STATIC_BASE"]}if(!env["tableBase"]){env["tableBase"]=0}var exports;exports=doNativeWasm(global,env,providedBuffer);assert(exports,"no binaryen method succeeded.");return exports}}integrateWasmJS();STATIC_BASE=GLOBAL_BASE;STATICTOP=STATIC_BASE+63264;__ATINIT__.push({func:function(){__GLOBAL__sub_I_ControlRef_cpp()}},{func:function(){__GLOBAL__sub_I_Events_cpp()}},{func:function(){__GLOBAL__sub_I_ExecutionContext_cpp()}},{func:function(){__GLOBAL__sub_I_GenericFunctions_cpp()}},{func:function(){__GLOBAL__sub_I_JavaScriptRef_cpp()}},{func:function(){__GLOBAL__sub_I_MatchPat_cpp()}},{func:function(){__GLOBAL__sub_I_Math_cpp()}},{func:function(){__GLOBAL__sub_I_NumericString_cpp()}},{func:function(){__GLOBAL__sub_I_String_cpp()}},{func:function(){__GLOBAL__sub_I_Synchronization_cpp()}},{func:function(){__GLOBAL__sub_I_TDCodecLVFlat_cpp()}},{func:function(){__GLOBAL__sub_I_TDCodecVia_cpp()}},{func:function(){__GLOBAL__sub_I_TimeFunctions_cpp()}},{func:function(){__GLOBAL__sub_I_TypeAndDataManager_cpp()}},{func:function(){__GLOBAL__sub_I_VirtualInstrument_cpp()}},{func:function(){__GLOBAL__sub_I_Canvas2d_cpp()}},{func:function(){__GLOBAL__sub_I_FileIO_cpp()}},{func:function(){__GLOBAL__sub_I_HttpClient_cpp()}},{func:function(){__GLOBAL__sub_I_Waveform_cpp()}},{func:function(){__GLOBAL__sub_I_JavaScriptInvoke_cpp()}},{func:function(){__GLOBAL__sub_I_PropertyNode_cpp()}},{func:function(){___emscripten_environ_constructor()}});var STATIC_BUMP=63264;Module["STATIC_BASE"]=STATIC_BASE;Module["STATIC_BUMP"]=STATIC_BUMP;STATICTOP+=16;var ENV={};function ___buildEnvironment(environ){var MAX_ENV_VALUES=64;var TOTAL_ENV_SIZE=1024;var poolPtr;var envPtr;if(!___buildEnvironment.called){___buildEnvironment.called=true;ENV["USER"]=ENV["LOGNAME"]="web_user";ENV["PATH"]="/";ENV["PWD"]="/";ENV["HOME"]="/home/web_user";ENV["LANG"]="C.UTF-8";ENV["_"]=Module["thisProgram"];poolPtr=getMemory(TOTAL_ENV_SIZE);envPtr=getMemory(MAX_ENV_VALUES*4);HEAP32[envPtr>>2]=poolPtr;HEAP32[environ>>2]=envPtr}else{envPtr=HEAP32[environ>>2];poolPtr=HEAP32[envPtr>>2]}var strings=[];var totalSize=0;for(var key in ENV){if(typeof ENV[key]==="string"){var line=key+"="+ENV[key];strings.push(line);totalSize+=line.length}}if(totalSize>TOTAL_ENV_SIZE){throw new Error("Environment size exceeded TOTAL_ENV_SIZE!")}var ptrSize=4;for(var i=0;i<strings.length;i++){var line=strings[i];writeAsciiToMemory(line,poolPtr);HEAP32[envPtr+i*ptrSize>>2]=poolPtr;poolPtr+=line.length+1}HEAP32[envPtr+strings.length*ptrSize>>2]=0}function ___cxa_pure_virtual(){ABORT=true;throw"Pure virtual function called!"}function ___lock(){}var ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};var ERRNO_MESSAGES={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"};function ___setErrNo(value){if(Module["___errno_location"])HEAP32[Module["___errno_location"]()>>2]=value;return value}var PATH={splitPath:function(filename){var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return splitPathRe.exec(filename).slice(1)},normalizeArray:function(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up;up--){parts.unshift("..")}}return parts},normalize:function(path){var isAbsolute=path.charAt(0)==="/",trailingSlash=path.substr(-1)==="/";path=PATH.normalizeArray(path.split("/").filter(function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path},dirname:function(path){var result=PATH.splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir},basename:function(path){if(path==="/")return"/";var lastSlash=path.lastIndexOf("/");if(lastSlash===-1)return path;return path.substr(lastSlash+1)},extname:function(path){return PATH.splitPath(path)[3]},join:function(){var paths=Array.prototype.slice.call(arguments,0);return PATH.normalize(paths.join("/"))},join2:function(l,r){return PATH.normalize(l+"/"+r)},resolve:function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:FS.cwd();if(typeof path!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!path){return""}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=PATH.normalizeArray(resolvedPath.split("/").filter(function(p){return!!p}),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."},relative:function(from,to){from=PATH.resolve(from).substr(1);to=PATH.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")}};var TTY={ttys:[],init:function(){},shutdown:function(){},register:function(dev,ops){TTY.ttys[dev]={input:[],output:[],ops:ops};FS.registerDevice(dev,TTY.stream_ops)},stream_ops:{open:function(stream){var tty=TTY.ttys[stream.node.rdev];if(!tty){throw new FS.ErrnoError(ERRNO_CODES.ENODEV)}stream.tty=tty;stream.seekable=false},close:function(stream){stream.tty.ops.flush(stream.tty)},flush:function(stream){stream.tty.ops.flush(stream.tty)},read:function(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.get_char){throw new FS.ErrnoError(ERRNO_CODES.ENXIO)}var bytesRead=0;for(var i=0;i<length;i++){var result;try{result=stream.tty.ops.get_char(stream.tty)}catch(e){throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(result===undefined&&bytesRead===0){throw new FS.ErrnoError(ERRNO_CODES.EAGAIN)}if(result===null||result===undefined)break;bytesRead++;buffer[offset+i]=result}if(bytesRead){stream.node.timestamp=Date.now()}return bytesRead},write:function(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.put_char){throw new FS.ErrnoError(ERRNO_CODES.ENXIO)}for(var i=0;i<length;i++){try{stream.tty.ops.put_char(stream.tty,buffer[offset+i])}catch(e){throw new FS.ErrnoError(ERRNO_CODES.EIO)}}if(length){stream.node.timestamp=Date.now()}return i}},default_tty_ops:{get_char:function(tty){if(!tty.input.length){var result=null;if(ENVIRONMENT_IS_NODE){var BUFSIZE=256;var buf=new Buffer(BUFSIZE);var bytesRead=0;var isPosixPlatform=process.platform!="win32";var fd=process.stdin.fd;if(isPosixPlatform){var usingDevice=false;try{fd=fs.openSync("/dev/stdin","r");usingDevice=true}catch(e){}}try{bytesRead=fs.readSync(fd,buf,0,BUFSIZE,null)}catch(e){if(e.toString().indexOf("EOF")!=-1)bytesRead=0;else throw e}if(usingDevice){fs.closeSync(fd)}if(bytesRead>0){result=buf.slice(0,bytesRead).toString("utf-8")}else{result=null}}else if(typeof window!="undefined"&&typeof window.prompt=="function"){result=window.prompt("Input: ");if(result!==null){result+="\n"}}else if(typeof readline=="function"){result=readline();if(result!==null){result+="\n"}}if(!result){return null}tty.input=intArrayFromString(result,true)}return tty.input.shift()},put_char:function(tty,val){if(val===null||val===10){out(UTF8ArrayToString(tty.output,0));tty.output=[]}else{if(val!=0)tty.output.push(val)}},flush:function(tty){if(tty.output&&tty.output.length>0){out(UTF8ArrayToString(tty.output,0));tty.output=[]}}},default_tty1_ops:{put_char:function(tty,val){if(val===null||val===10){err(UTF8ArrayToString(tty.output,0));tty.output=[]}else{if(val!=0)tty.output.push(val)}},flush:function(tty){if(tty.output&&tty.output.length>0){err(UTF8ArrayToString(tty.output,0));tty.output=[]}}}};var MEMFS={ops_table:null,mount:function(mount){return MEMFS.createNode(null,"/",16384|511,0)},createNode:function(parent,name,mode,dev){if(FS.isBlkdev(mode)||FS.isFIFO(mode)){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}if(!MEMFS.ops_table){MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}}}var node=FS.createNode(parent,name,mode,dev);if(FS.isDir(node.mode)){node.node_ops=MEMFS.ops_table.dir.node;node.stream_ops=MEMFS.ops_table.dir.stream;node.contents={}}else if(FS.isFile(node.mode)){node.node_ops=MEMFS.ops_table.file.node;node.stream_ops=MEMFS.ops_table.file.stream;node.usedBytes=0;node.contents=null}else if(FS.isLink(node.mode)){node.node_ops=MEMFS.ops_table.link.node;node.stream_ops=MEMFS.ops_table.link.stream}else if(FS.isChrdev(node.mode)){node.node_ops=MEMFS.ops_table.chrdev.node;node.stream_ops=MEMFS.ops_table.chrdev.stream}node.timestamp=Date.now();if(parent){parent.contents[name]=node}return node},getFileDataAsRegularArray:function(node){if(node.contents&&node.contents.subarray){var arr=[];for(var i=0;i<node.usedBytes;++i)arr.push(node.contents[i]);return arr}return node.contents},getFileDataAsTypedArray:function(node){if(!node.contents)return new Uint8Array;if(node.contents.subarray)return node.contents.subarray(0,node.usedBytes);return new Uint8Array(node.contents)},expandFileStorage:function(node,newCapacity){if(node.contents&&node.contents.subarray&&newCapacity>node.contents.length){node.contents=MEMFS.getFileDataAsRegularArray(node);node.usedBytes=node.contents.length}if(!node.contents||node.contents.subarray){var prevCapacity=node.contents?node.contents.length:0;if(prevCapacity>=newCapacity)return;var CAPACITY_DOUBLING_MAX=1024*1024;newCapacity=Math.max(newCapacity,prevCapacity*(prevCapacity<CAPACITY_DOUBLING_MAX?2:1.125)|0);if(prevCapacity!=0)newCapacity=Math.max(newCapacity,256);var oldContents=node.contents;node.contents=new Uint8Array(newCapacity);if(node.usedBytes>0)node.contents.set(oldContents.subarray(0,node.usedBytes),0);return}if(!node.contents&&newCapacity>0)node.contents=[];while(node.contents.length<newCapacity)node.contents.push(0)},resizeFileStorage:function(node,newSize){if(node.usedBytes==newSize)return;if(newSize==0){node.contents=null;node.usedBytes=0;return}if(!node.contents||node.contents.subarray){var oldContents=node.contents;node.contents=new Uint8Array(new ArrayBuffer(newSize));if(oldContents){node.contents.set(oldContents.subarray(0,Math.min(newSize,node.usedBytes)))}node.usedBytes=newSize;return}if(!node.contents)node.contents=[];if(node.contents.length>newSize)node.contents.length=newSize;else while(node.contents.length<newSize)node.contents.push(0);node.usedBytes=newSize},node_ops:{getattr:function(node){var attr={};attr.dev=FS.isChrdev(node.mode)?node.id:1;attr.ino=node.id;attr.mode=node.mode;attr.nlink=1;attr.uid=0;attr.gid=0;attr.rdev=node.rdev;if(FS.isDir(node.mode)){attr.size=4096}else if(FS.isFile(node.mode)){attr.size=node.usedBytes}else if(FS.isLink(node.mode)){attr.size=node.link.length}else{attr.size=0}attr.atime=new Date(node.timestamp);attr.mtime=new Date(node.timestamp);attr.ctime=new Date(node.timestamp);attr.blksize=4096;attr.blocks=Math.ceil(attr.size/attr.blksize);return attr},setattr:function(node,attr){if(attr.mode!==undefined){node.mode=attr.mode}if(attr.timestamp!==undefined){node.timestamp=attr.timestamp}if(attr.size!==undefined){MEMFS.resizeFileStorage(node,attr.size)}},lookup:function(parent,name){throw FS.genericErrors[ERRNO_CODES.ENOENT]},mknod:function(parent,name,mode,dev){return MEMFS.createNode(parent,name,mode,dev)},rename:function(old_node,new_dir,new_name){if(FS.isDir(old_node.mode)){var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(new_node){for(var i in new_node.contents){throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY)}}}delete old_node.parent.contents[old_node.name];old_node.name=new_name;new_dir.contents[new_name]=old_node;old_node.parent=new_dir},unlink:function(parent,name){delete parent.contents[name]},rmdir:function(parent,name){var node=FS.lookupNode(parent,name);for(var i in node.contents){throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY)}delete parent.contents[name]},readdir:function(node){var entries=[".",".."];for(var key in node.contents){if(!node.contents.hasOwnProperty(key)){continue}entries.push(key)}return entries},symlink:function(parent,newname,oldpath){var node=MEMFS.createNode(parent,newname,511|40960,0);node.link=oldpath;return node},readlink:function(node){if(!FS.isLink(node.mode)){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}return node.link}},stream_ops:{read:function(stream,buffer,offset,length,position){var contents=stream.node.contents;if(position>=stream.node.usedBytes)return 0;var size=Math.min(stream.node.usedBytes-position,length);assert(size>=0);if(size>8&&contents.subarray){buffer.set(contents.subarray(position,position+size),offset)}else{for(var i=0;i<size;i++)buffer[offset+i]=contents[position+i]}return size},write:function(stream,buffer,offset,length,position,canOwn){if(!length)return 0;var node=stream.node;node.timestamp=Date.now();if(buffer.subarray&&(!node.contents||node.contents.subarray)){if(canOwn){node.contents=buffer.subarray(offset,offset+length);node.usedBytes=length;return length}else if(node.usedBytes===0&&position===0){node.contents=new Uint8Array(buffer.subarray(offset,offset+length));node.usedBytes=length;return length}else if(position+length<=node.usedBytes){node.contents.set(buffer.subarray(offset,offset+length),position);return length}}MEMFS.expandFileStorage(node,position+length);if(node.contents.subarray&&buffer.subarray)node.contents.set(buffer.subarray(offset,offset+length),position);else{for(var i=0;i<length;i++){node.contents[position+i]=buffer[offset+i]}}node.usedBytes=Math.max(node.usedBytes,position+length);return length},llseek:function(stream,offset,whence){var position=offset;if(whence===1){position+=stream.position}else if(whence===2){if(FS.isFile(stream.node.mode)){position+=stream.node.usedBytes}}if(position<0){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}return position},allocate:function(stream,offset,length){MEMFS.expandFileStorage(stream.node,offset+length);stream.node.usedBytes=Math.max(stream.node.usedBytes,offset+length)},mmap:function(stream,buffer,offset,length,position,prot,flags){if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(ERRNO_CODES.ENODEV)}var ptr;var allocated;var contents=stream.node.contents;if(!(flags&2)&&(contents.buffer===buffer||contents.buffer===buffer.buffer)){allocated=false;ptr=contents.byteOffset}else{if(position>0||position+length<stream.node.usedBytes){if(contents.subarray){contents=contents.subarray(position,position+length)}else{contents=Array.prototype.slice.call(contents,position,position+length)}}allocated=true;ptr=_malloc(length);if(!ptr){throw new FS.ErrnoError(ERRNO_CODES.ENOMEM)}buffer.set(contents,ptr)}return{ptr:ptr,allocated:allocated}},msync:function(stream,buffer,offset,length,mmapFlags){if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(ERRNO_CODES.ENODEV)}if(mmapFlags&2){return 0}var bytesWritten=MEMFS.stream_ops.write(stream,buffer,0,length,offset,false);return 0}}};var IDBFS={dbs:{},indexedDB:function(){if(typeof indexedDB!=="undefined")return indexedDB;var ret=null;if(typeof window==="object")ret=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;assert(ret,"IDBFS used, but indexedDB not supported");return ret},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(mount){return MEMFS.mount.apply(null,arguments)},syncfs:function(mount,populate,callback){IDBFS.getLocalSet(mount,function(err,local){if(err)return callback(err);IDBFS.getRemoteSet(mount,function(err,remote){if(err)return callback(err);var src=populate?remote:local;var dst=populate?local:remote;IDBFS.reconcile(src,dst,callback)})})},getDB:function(name,callback){var db=IDBFS.dbs[name];if(db){return callback(null,db)}var req;try{req=IDBFS.indexedDB().open(name,IDBFS.DB_VERSION)}catch(e){return callback(e)}if(!req){return callback("Unable to connect to IndexedDB")}req.onupgradeneeded=function(e){var db=e.target.result;var transaction=e.target.transaction;var fileStore;if(db.objectStoreNames.contains(IDBFS.DB_STORE_NAME)){fileStore=transaction.objectStore(IDBFS.DB_STORE_NAME)}else{fileStore=db.createObjectStore(IDBFS.DB_STORE_NAME)}if(!fileStore.indexNames.contains("timestamp")){fileStore.createIndex("timestamp","timestamp",{unique:false})}};req.onsuccess=function(){db=req.result;IDBFS.dbs[name]=db;callback(null,db)};req.onerror=function(e){callback(this.error);e.preventDefault()}},getLocalSet:function(mount,callback){var entries={};function isRealDir(p){return p!=="."&&p!==".."}function toAbsolute(root){return function(p){return PATH.join2(root,p)}}var check=FS.readdir(mount.mountpoint).filter(isRealDir).map(toAbsolute(mount.mountpoint));while(check.length){var path=check.pop();var stat;try{stat=FS.stat(path)}catch(e){return callback(e)}if(FS.isDir(stat.mode)){check.push.apply(check,FS.readdir(path).filter(isRealDir).map(toAbsolute(path)))}entries[path]={timestamp:stat.mtime}}return callback(null,{type:"local",entries:entries})},getRemoteSet:function(mount,callback){var entries={};IDBFS.getDB(mount.mountpoint,function(err,db){if(err)return callback(err);try{var transaction=db.transaction([IDBFS.DB_STORE_NAME],"readonly");transaction.onerror=function(e){callback(this.error);e.preventDefault()};var store=transaction.objectStore(IDBFS.DB_STORE_NAME);var index=store.index("timestamp");index.openKeyCursor().onsuccess=function(event){var cursor=event.target.result;if(!cursor){return callback(null,{type:"remote",db:db,entries:entries})}entries[cursor.primaryKey]={timestamp:cursor.key};cursor.continue()}}catch(e){return callback(e)}})},loadLocalEntry:function(path,callback){var stat,node;try{var lookup=FS.lookupPath(path);node=lookup.node;stat=FS.stat(path)}catch(e){return callback(e)}if(FS.isDir(stat.mode)){return callback(null,{timestamp:stat.mtime,mode:stat.mode})}else if(FS.isFile(stat.mode)){node.contents=MEMFS.getFileDataAsTypedArray(node);return callback(null,{timestamp:stat.mtime,mode:stat.mode,contents:node.contents})}else{return callback(new Error("node type not supported"))}},storeLocalEntry:function(path,entry,callback){try{if(FS.isDir(entry.mode)){FS.mkdir(path,entry.mode)}else if(FS.isFile(entry.mode)){FS.writeFile(path,entry.contents,{canOwn:true})}else{return callback(new Error("node type not supported"))}FS.chmod(path,entry.mode);FS.utime(path,entry.timestamp,entry.timestamp)}catch(e){return callback(e)}callback(null)},removeLocalEntry:function(path,callback){try{var lookup=FS.lookupPath(path);var stat=FS.stat(path);if(FS.isDir(stat.mode)){FS.rmdir(path)}else if(FS.isFile(stat.mode)){FS.unlink(path)}}catch(e){return callback(e)}callback(null)},loadRemoteEntry:function(store,path,callback){var req=store.get(path);req.onsuccess=function(event){callback(null,event.target.result)};req.onerror=function(e){callback(this.error);e.preventDefault()}},storeRemoteEntry:function(store,path,entry,callback){var req=store.put(entry,path);req.onsuccess=function(){callback(null)};req.onerror=function(e){callback(this.error);e.preventDefault()}},removeRemoteEntry:function(store,path,callback){var req=store.delete(path);req.onsuccess=function(){callback(null)};req.onerror=function(e){callback(this.error);e.preventDefault()}},reconcile:function(src,dst,callback){var total=0;var create=[];Object.keys(src.entries).forEach(function(key){var e=src.entries[key];var e2=dst.entries[key];if(!e2||e.timestamp>e2.timestamp){create.push(key);total++}});var remove=[];Object.keys(dst.entries).forEach(function(key){var e=dst.entries[key];var e2=src.entries[key];if(!e2){remove.push(key);total++}});if(!total){return callback(null)}var completed=0;var db=src.type==="remote"?src.db:dst.db;var transaction=db.transaction([IDBFS.DB_STORE_NAME],"readwrite");var store=transaction.objectStore(IDBFS.DB_STORE_NAME);function done(err){if(err){if(!done.errored){done.errored=true;return callback(err)}return}if(++completed>=total){return callback(null)}}transaction.onerror=function(e){done(this.error);e.preventDefault()};create.sort().forEach(function(path){if(dst.type==="local"){IDBFS.loadRemoteEntry(store,path,function(err,entry){if(err)return done(err);IDBFS.storeLocalEntry(path,entry,done)})}else{IDBFS.loadLocalEntry(path,function(err,entry){if(err)return done(err);IDBFS.storeRemoteEntry(store,path,entry,done)})}});remove.sort().reverse().forEach(function(path){if(dst.type==="local"){IDBFS.removeLocalEntry(path,done)}else{IDBFS.removeRemoteEntry(store,path,done)}})}};var NODEFS={isWindows:false,staticInit:function(){NODEFS.isWindows=!!process.platform.match(/^win/);var flags=process["binding"]("constants");if(flags["fs"]){flags=flags["fs"]}NODEFS.flagsForNodeMap={1024:flags["O_APPEND"],64:flags["O_CREAT"],128:flags["O_EXCL"],0:flags["O_RDONLY"],2:flags["O_RDWR"],4096:flags["O_SYNC"],512:flags["O_TRUNC"],1:flags["O_WRONLY"]}},bufferFrom:function(arrayBuffer){return Buffer.alloc?Buffer.from(arrayBuffer):new Buffer(arrayBuffer)},mount:function(mount){assert(ENVIRONMENT_IS_NODE);return NODEFS.createNode(null,"/",NODEFS.getMode(mount.opts.root),0)},createNode:function(parent,name,mode,dev){if(!FS.isDir(mode)&&!FS.isFile(mode)&&!FS.isLink(mode)){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}var node=FS.createNode(parent,name,mode);node.node_ops=NODEFS.node_ops;node.stream_ops=NODEFS.stream_ops;return node},getMode:function(path){var stat;try{stat=fs.lstatSync(path);if(NODEFS.isWindows){stat.mode=stat.mode|(stat.mode&292)>>2}}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}return stat.mode},realPath:function(node){var parts=[];while(node.parent!==node){parts.push(node.name);node=node.parent}parts.push(node.mount.opts.root);parts.reverse();return PATH.join.apply(null,parts)},flagsForNode:function(flags){flags&=~2097152;flags&=~2048;flags&=~32768;flags&=~524288;var newFlags=0;for(var k in NODEFS.flagsForNodeMap){if(flags&k){newFlags|=NODEFS.flagsForNodeMap[k];flags^=k}}if(!flags){return newFlags}else{throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}},node_ops:{getattr:function(node){var path=NODEFS.realPath(node);var stat;try{stat=fs.lstatSync(path)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}if(NODEFS.isWindows&&!stat.blksize){stat.blksize=4096}if(NODEFS.isWindows&&!stat.blocks){stat.blocks=(stat.size+stat.blksize-1)/stat.blksize|0}return{dev:stat.dev,ino:stat.ino,mode:stat.mode,nlink:stat.nlink,uid:stat.uid,gid:stat.gid,rdev:stat.rdev,size:stat.size,atime:stat.atime,mtime:stat.mtime,ctime:stat.ctime,blksize:stat.blksize,blocks:stat.blocks}},setattr:function(node,attr){var path=NODEFS.realPath(node);try{if(attr.mode!==undefined){fs.chmodSync(path,attr.mode);node.mode=attr.mode}if(attr.timestamp!==undefined){var date=new Date(attr.timestamp);fs.utimesSync(path,date,date)}if(attr.size!==undefined){fs.truncateSync(path,attr.size)}}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},lookup:function(parent,name){var path=PATH.join2(NODEFS.realPath(parent),name);var mode=NODEFS.getMode(path);return NODEFS.createNode(parent,name,mode)},mknod:function(parent,name,mode,dev){var node=NODEFS.createNode(parent,name,mode,dev);var path=NODEFS.realPath(node);try{if(FS.isDir(node.mode)){fs.mkdirSync(path,node.mode)}else{fs.writeFileSync(path,"",{mode:node.mode})}}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}return node},rename:function(oldNode,newDir,newName){var oldPath=NODEFS.realPath(oldNode);var newPath=PATH.join2(NODEFS.realPath(newDir),newName);try{fs.renameSync(oldPath,newPath)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},unlink:function(parent,name){var path=PATH.join2(NODEFS.realPath(parent),name);try{fs.unlinkSync(path)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},rmdir:function(parent,name){var path=PATH.join2(NODEFS.realPath(parent),name);try{fs.rmdirSync(path)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},readdir:function(node){var path=NODEFS.realPath(node);try{return fs.readdirSync(path)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},symlink:function(parent,newName,oldPath){var newPath=PATH.join2(NODEFS.realPath(parent),newName);try{fs.symlinkSync(oldPath,newPath)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},readlink:function(node){var path=NODEFS.realPath(node);try{path=fs.readlinkSync(path);path=NODEJS_PATH.relative(NODEJS_PATH.resolve(node.mount.opts.root),path);return path}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}}},stream_ops:{open:function(stream){var path=NODEFS.realPath(stream.node);try{if(FS.isFile(stream.node.mode)){stream.nfd=fs.openSync(path,NODEFS.flagsForNode(stream.flags))}}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},close:function(stream){try{if(FS.isFile(stream.node.mode)&&stream.nfd){fs.closeSync(stream.nfd)}}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},read:function(stream,buffer,offset,length,position){if(length===0)return 0;try{return fs.readSync(stream.nfd,NODEFS.bufferFrom(buffer.buffer),offset,length,position)}catch(e){throw new FS.ErrnoError(ERRNO_CODES[e.code])}},write:function(stream,buffer,offset,length,position){try{return fs.writeSync(stream.nfd,NODEFS.bufferFrom(buffer.buffer),offset,length,position)}catch(e){throw new FS.ErrnoError(ERRNO_CODES[e.code])}},llseek:function(stream,offset,whence){var position=offset;if(whence===1){position+=stream.position}else if(whence===2){if(FS.isFile(stream.node.mode)){try{var stat=fs.fstatSync(stream.nfd);position+=stat.size}catch(e){throw new FS.ErrnoError(ERRNO_CODES[e.code])}}}if(position<0){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}return position}}};var WORKERFS={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(mount){assert(ENVIRONMENT_IS_WORKER);if(!WORKERFS.reader)WORKERFS.reader=new FileReaderSync;var root=WORKERFS.createNode(null,"/",WORKERFS.DIR_MODE,0);var createdParents={};function ensureParent(path){var parts=path.split("/");var parent=root;for(var i=0;i<parts.length-1;i++){var curr=parts.slice(0,i+1).join("/");if(!createdParents[curr]){createdParents[curr]=WORKERFS.createNode(parent,parts[i],WORKERFS.DIR_MODE,0)}parent=createdParents[curr]}return parent}function base(path){var parts=path.split("/");return parts[parts.length-1]}Array.prototype.forEach.call(mount.opts["files"]||[],function(file){WORKERFS.createNode(ensureParent(file.name),base(file.name),WORKERFS.FILE_MODE,0,file,file.lastModifiedDate)});(mount.opts["blobs"]||[]).forEach(function(obj){WORKERFS.createNode(ensureParent(obj["name"]),base(obj["name"]),WORKERFS.FILE_MODE,0,obj["data"])});(mount.opts["packages"]||[]).forEach(function(pack){pack["metadata"].files.forEach(function(file){var name=file.filename.substr(1);WORKERFS.createNode(ensureParent(name),base(name),WORKERFS.FILE_MODE,0,pack["blob"].slice(file.start,file.end))})});return root},createNode:function(parent,name,mode,dev,contents,mtime){var node=FS.createNode(parent,name,mode);node.mode=mode;node.node_ops=WORKERFS.node_ops;node.stream_ops=WORKERFS.stream_ops;node.timestamp=(mtime||new Date).getTime();assert(WORKERFS.FILE_MODE!==WORKERFS.DIR_MODE);if(mode===WORKERFS.FILE_MODE){node.size=contents.size;node.contents=contents}else{node.size=4096;node.contents={}}if(parent){parent.contents[name]=node}return node},node_ops:{getattr:function(node){return{dev:1,ino:undefined,mode:node.mode,nlink:1,uid:0,gid:0,rdev:undefined,size:node.size,atime:new Date(node.timestamp),mtime:new Date(node.timestamp),ctime:new Date(node.timestamp),blksize:4096,blocks:Math.ceil(node.size/4096)}},setattr:function(node,attr){if(attr.mode!==undefined){node.mode=attr.mode}if(attr.timestamp!==undefined){node.timestamp=attr.timestamp}},lookup:function(parent,name){throw new FS.ErrnoError(ERRNO_CODES.ENOENT)},mknod:function(parent,name,mode,dev){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rename:function(oldNode,newDir,newName){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},unlink:function(parent,name){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rmdir:function(parent,name){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readdir:function(node){var entries=[".",".."];for(var key in node.contents){if(!node.contents.hasOwnProperty(key)){continue}entries.push(key)}return entries},symlink:function(parent,newName,oldPath){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readlink:function(node){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}},stream_ops:{read:function(stream,buffer,offset,length,position){if(position>=stream.node.size)return 0;var chunk=stream.node.contents.slice(position,position+length);var ab=WORKERFS.reader.readAsArrayBuffer(chunk);buffer.set(new Uint8Array(ab),offset);return chunk.size},write:function(stream,buffer,offset,length,position){throw new FS.ErrnoError(ERRNO_CODES.EIO)},llseek:function(stream,offset,whence){var position=offset;if(whence===1){position+=stream.position}else if(whence===2){if(FS.isFile(stream.node.mode)){position+=stream.node.size}}if(position<0){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}return position}}};STATICTOP+=16;STATICTOP+=16;STATICTOP+=16;var FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:false,ignorePermissions:true,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(e){if(!(e instanceof FS.ErrnoError))throw e+" : "+stackTrace();return ___setErrNo(e.errno)},lookupPath:function(path,opts){path=PATH.resolve(FS.cwd(),path);opts=opts||{};if(!path)return{path:"",node:null};var defaults={follow_mount:true,recurse_count:0};for(var key in defaults){if(opts[key]===undefined){opts[key]=defaults[key]}}if(opts.recurse_count>8){throw new FS.ErrnoError(ERRNO_CODES.ELOOP)}var parts=PATH.normalizeArray(path.split("/").filter(function(p){return!!p}),false);var current=FS.root;var current_path="/";for(var i=0;i<parts.length;i++){var islast=i===parts.length-1;if(islast&&opts.parent){break}current=FS.lookupNode(current,parts[i]);current_path=PATH.join2(current_path,parts[i]);if(FS.isMountpoint(current)){if(!islast||islast&&opts.follow_mount){current=current.mounted.root}}if(!islast||opts.follow){var count=0;while(FS.isLink(current.mode)){var link=FS.readlink(current_path);current_path=PATH.resolve(PATH.dirname(current_path),link);var lookup=FS.lookupPath(current_path,{recurse_count:opts.recurse_count});current=lookup.node;if(count++>40){throw new FS.ErrnoError(ERRNO_CODES.ELOOP)}}}}return{path:current_path,node:current}},getPath:function(node){var path;while(true){if(FS.isRoot(node)){var mount=node.mount.mountpoint;if(!path)return mount;return mount[mount.length-1]!=="/"?mount+"/"+path:mount+path}path=path?node.name+"/"+path:node.name;node=node.parent}},hashName:function(parentid,name){var hash=0;for(var i=0;i<name.length;i++){hash=(hash<<5)-hash+name.charCodeAt(i)|0}return(parentid+hash>>>0)%FS.nameTable.length},hashAddNode:function(node){var hash=FS.hashName(node.parent.id,node.name);node.name_next=FS.nameTable[hash];FS.nameTable[hash]=node},hashRemoveNode:function(node){var hash=FS.hashName(node.parent.id,node.name);if(FS.nameTable[hash]===node){FS.nameTable[hash]=node.name_next}else{var current=FS.nameTable[hash];while(current){if(current.name_next===node){current.name_next=node.name_next;break}current=current.name_next}}},lookupNode:function(parent,name){var err=FS.mayLookup(parent);if(err){throw new FS.ErrnoError(err,parent)}var hash=FS.hashName(parent.id,name);for(var node=FS.nameTable[hash];node;node=node.name_next){var nodeName=node.name;if(node.parent.id===parent.id&&nodeName===name){return node}}return FS.lookup(parent,name)},createNode:function(parent,name,mode,rdev){if(!FS.FSNode){FS.FSNode=function(parent,name,mode,rdev){if(!parent){parent=this}this.parent=parent;this.mount=parent.mount;this.mounted=null;this.id=FS.nextInode++;this.name=name;this.mode=mode;this.node_ops={};this.stream_ops={};this.rdev=rdev};FS.FSNode.prototype={};var readMode=292|73;var writeMode=146;Object.defineProperties(FS.FSNode.prototype,{read:{get:function(){return(this.mode&readMode)===readMode},set:function(val){val?this.mode|=readMode:this.mode&=~readMode}},write:{get:function(){return(this.mode&writeMode)===writeMode},set:function(val){val?this.mode|=writeMode:this.mode&=~writeMode}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}})}var node=new FS.FSNode(parent,name,mode,rdev);FS.hashAddNode(node);return node},destroyNode:function(node){FS.hashRemoveNode(node)},isRoot:function(node){return node===node.parent},isMountpoint:function(node){return!!node.mounted},isFile:function(mode){return(mode&61440)===32768},isDir:function(mode){return(mode&61440)===16384},isLink:function(mode){return(mode&61440)===40960},isChrdev:function(mode){return(mode&61440)===8192},isBlkdev:function(mode){return(mode&61440)===24576},isFIFO:function(mode){return(mode&61440)===4096},isSocket:function(mode){return(mode&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(str){var flags=FS.flagModes[str];if(typeof flags==="undefined"){throw new Error("Unknown file open mode: "+str)}return flags},flagsToPermissionString:function(flag){var perms=["r","w","rw"][flag&3];if(flag&512){perms+="w"}return perms},nodePermissions:function(node,perms){if(FS.ignorePermissions){return 0}if(perms.indexOf("r")!==-1&&!(node.mode&292)){return ERRNO_CODES.EACCES}else if(perms.indexOf("w")!==-1&&!(node.mode&146)){return ERRNO_CODES.EACCES}else if(perms.indexOf("x")!==-1&&!(node.mode&73)){return ERRNO_CODES.EACCES}return 0},mayLookup:function(dir){var err=FS.nodePermissions(dir,"x");if(err)return err;if(!dir.node_ops.lookup)return ERRNO_CODES.EACCES;return 0},mayCreate:function(dir,name){try{var node=FS.lookupNode(dir,name);return ERRNO_CODES.EEXIST}catch(e){}return FS.nodePermissions(dir,"wx")},mayDelete:function(dir,name,isdir){var node;try{node=FS.lookupNode(dir,name)}catch(e){return e.errno}var err=FS.nodePermissions(dir,"wx");if(err){return err}if(isdir){if(!FS.isDir(node.mode)){return ERRNO_CODES.ENOTDIR}if(FS.isRoot(node)||FS.getPath(node)===FS.cwd()){return ERRNO_CODES.EBUSY}}else{if(FS.isDir(node.mode)){return ERRNO_CODES.EISDIR}}return 0},mayOpen:function(node,flags){if(!node){return ERRNO_CODES.ENOENT}if(FS.isLink(node.mode)){return ERRNO_CODES.ELOOP}else if(FS.isDir(node.mode)){if(FS.flagsToPermissionString(flags)!=="r"||flags&512){return ERRNO_CODES.EISDIR}}return FS.nodePermissions(node,FS.flagsToPermissionString(flags))},MAX_OPEN_FDS:4096,nextfd:function(fd_start,fd_end){fd_start=fd_start||0;fd_end=fd_end||FS.MAX_OPEN_FDS;for(var fd=fd_start;fd<=fd_end;fd++){if(!FS.streams[fd]){return fd}}throw new FS.ErrnoError(ERRNO_CODES.EMFILE)},getStream:function(fd){return FS.streams[fd]},createStream:function(stream,fd_start,fd_end){if(!FS.FSStream){FS.FSStream=function(){};FS.FSStream.prototype={};Object.defineProperties(FS.FSStream.prototype,{object:{get:function(){return this.node},set:function(val){this.node=val}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}})}var newStream=new FS.FSStream;for(var p in stream){newStream[p]=stream[p]}stream=newStream;var fd=FS.nextfd(fd_start,fd_end);stream.fd=fd;FS.streams[fd]=stream;return stream},closeStream:function(fd){FS.streams[fd]=null},chrdev_stream_ops:{open:function(stream){var device=FS.getDevice(stream.node.rdev);stream.stream_ops=device.stream_ops;if(stream.stream_ops.open){stream.stream_ops.open(stream)}},llseek:function(){throw new FS.ErrnoError(ERRNO_CODES.ESPIPE)}},major:function(dev){return dev>>8},minor:function(dev){return dev&255},makedev:function(ma,mi){return ma<<8|mi},registerDevice:function(dev,ops){FS.devices[dev]={stream_ops:ops}},getDevice:function(dev){return FS.devices[dev]},getMounts:function(mount){var mounts=[];var check=[mount];while(check.length){var m=check.pop();mounts.push(m);check.push.apply(check,m.mounts)}return mounts},syncfs:function(populate,callback){if(typeof populate==="function"){callback=populate;populate=false}FS.syncFSRequests++;if(FS.syncFSRequests>1){console.log("warning: "+FS.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work")}var mounts=FS.getMounts(FS.root.mount);var completed=0;function doCallback(err){assert(FS.syncFSRequests>0);FS.syncFSRequests--;return callback(err)}function done(err){if(err){if(!done.errored){done.errored=true;return doCallback(err)}return}if(++completed>=mounts.length){doCallback(null)}}mounts.forEach(function(mount){if(!mount.type.syncfs){return done(null)}mount.type.syncfs(mount,populate,done)})},mount:function(type,opts,mountpoint){var root=mountpoint==="/";var pseudo=!mountpoint;var node;if(root&&FS.root){throw new FS.ErrnoError(ERRNO_CODES.EBUSY)}else if(!root&&!pseudo){var lookup=FS.lookupPath(mountpoint,{follow_mount:false});mountpoint=lookup.path;node=lookup.node;if(FS.isMountpoint(node)){throw new FS.ErrnoError(ERRNO_CODES.EBUSY)}if(!FS.isDir(node.mode)){throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR)}}var mount={type:type,opts:opts,mountpoint:mountpoint,mounts:[]};var mountRoot=type.mount(mount);mountRoot.mount=mount;mount.root=mountRoot;if(root){FS.root=mountRoot}else if(node){node.mounted=mount;if(node.mount){node.mount.mounts.push(mount)}}return mountRoot},unmount:function(mountpoint){var lookup=FS.lookupPath(mountpoint,{follow_mount:false});if(!FS.isMountpoint(lookup.node)){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}var node=lookup.node;var mount=node.mounted;var mounts=FS.getMounts(mount);Object.keys(FS.nameTable).forEach(function(hash){var current=FS.nameTable[hash];while(current){var next=current.name_next;if(mounts.indexOf(current.mount)!==-1){FS.destroyNode(current)}current=next}});node.mounted=null;var idx=node.mount.mounts.indexOf(mount);assert(idx!==-1);node.mount.mounts.splice(idx,1)},lookup:function(parent,name){return parent.node_ops.lookup(parent,name)},mknod:function(path,mode,dev){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);if(!name||name==="."||name===".."){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}var err=FS.mayCreate(parent,name);if(err){throw new FS.ErrnoError(err)}if(!parent.node_ops.mknod){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}return parent.node_ops.mknod(parent,name,mode,dev)},create:function(path,mode){mode=mode!==undefined?mode:438;mode&=4095;mode|=32768;return FS.mknod(path,mode,0)},mkdir:function(path,mode){mode=mode!==undefined?mode:511;mode&=511|512;mode|=16384;return FS.mknod(path,mode,0)},mkdirTree:function(path,mode){var dirs=path.split("/");var d="";for(var i=0;i<dirs.length;++i){if(!dirs[i])continue;d+="/"+dirs[i];try{FS.mkdir(d,mode)}catch(e){if(e.errno!=ERRNO_CODES.EEXIST)throw e}}},mkdev:function(path,mode,dev){if(typeof dev==="undefined"){dev=mode;mode=438}mode|=8192;return FS.mknod(path,mode,dev)},symlink:function(oldpath,newpath){if(!PATH.resolve(oldpath)){throw new FS.ErrnoError(ERRNO_CODES.ENOENT)}var lookup=FS.lookupPath(newpath,{parent:true});var parent=lookup.node;if(!parent){throw new FS.ErrnoError(ERRNO_CODES.ENOENT)}var newname=PATH.basename(newpath);var err=FS.mayCreate(parent,newname);if(err){throw new FS.ErrnoError(err)}if(!parent.node_ops.symlink){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}return parent.node_ops.symlink(parent,newname,oldpath)},rename:function(old_path,new_path){var old_dirname=PATH.dirname(old_path);var new_dirname=PATH.dirname(new_path);var old_name=PATH.basename(old_path);var new_name=PATH.basename(new_path);var lookup,old_dir,new_dir;try{lookup=FS.lookupPath(old_path,{parent:true});old_dir=lookup.node;lookup=FS.lookupPath(new_path,{parent:true});new_dir=lookup.node}catch(e){throw new FS.ErrnoError(ERRNO_CODES.EBUSY)}if(!old_dir||!new_dir)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(old_dir.mount!==new_dir.mount){throw new FS.ErrnoError(ERRNO_CODES.EXDEV)}var old_node=FS.lookupNode(old_dir,old_name);var relative=PATH.relative(old_path,new_dirname);if(relative.charAt(0)!=="."){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}relative=PATH.relative(new_path,old_dirname);if(relative.charAt(0)!=="."){throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY)}var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(old_node===new_node){return}var isdir=FS.isDir(old_node.mode);var err=FS.mayDelete(old_dir,old_name,isdir);if(err){throw new FS.ErrnoError(err)}err=new_node?FS.mayDelete(new_dir,new_name,isdir):FS.mayCreate(new_dir,new_name);if(err){throw new FS.ErrnoError(err)}if(!old_dir.node_ops.rename){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}if(FS.isMountpoint(old_node)||new_node&&FS.isMountpoint(new_node)){throw new FS.ErrnoError(ERRNO_CODES.EBUSY)}if(new_dir!==old_dir){err=FS.nodePermissions(old_dir,"w");if(err){throw new FS.ErrnoError(err)}}try{}catch(e){console.log("FS.trackingDelegate['willMovePath']('"+old_path+"', '"+new_path+"') threw an exception: "+e.message)}FS.hashRemoveNode(old_node);try{old_dir.node_ops.rename(old_node,new_dir,new_name)}catch(e){throw e}finally{FS.hashAddNode(old_node)}try{}catch(e){console.log("FS.trackingDelegate['onMovePath']('"+old_path+"', '"+new_path+"') threw an exception: "+e.message)}},rmdir:function(path){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);var node=FS.lookupNode(parent,name);var err=FS.mayDelete(parent,name,true);if(err){throw new FS.ErrnoError(err)}if(!parent.node_ops.rmdir){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}if(FS.isMountpoint(node)){throw new FS.ErrnoError(ERRNO_CODES.EBUSY)}try{}catch(e){console.log("FS.trackingDelegate['willDeletePath']('"+path+"') threw an exception: "+e.message)}parent.node_ops.rmdir(parent,name);FS.destroyNode(node);try{}catch(e){console.log("FS.trackingDelegate['onDeletePath']('"+path+"') threw an exception: "+e.message)}},readdir:function(path){var lookup=FS.lookupPath(path,{follow:true});var node=lookup.node;if(!node.node_ops.readdir){throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR)}return node.node_ops.readdir(node)},unlink:function(path){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);var node=FS.lookupNode(parent,name);var err=FS.mayDelete(parent,name,false);if(err){throw new FS.ErrnoError(err)}if(!parent.node_ops.unlink){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}if(FS.isMountpoint(node)){throw new FS.ErrnoError(ERRNO_CODES.EBUSY)}try{}catch(e){console.log("FS.trackingDelegate['willDeletePath']('"+path+"') threw an exception: "+e.message)}parent.node_ops.unlink(parent,name);FS.destroyNode(node);try{}catch(e){console.log("FS.trackingDelegate['onDeletePath']('"+path+"') threw an exception: "+e.message)}},readlink:function(path){var lookup=FS.lookupPath(path);var link=lookup.node;if(!link){throw new FS.ErrnoError(ERRNO_CODES.ENOENT)}if(!link.node_ops.readlink){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}return PATH.resolve(FS.getPath(link.parent),link.node_ops.readlink(link))},stat:function(path,dontFollow){var lookup=FS.lookupPath(path,{follow:!dontFollow});var node=lookup.node;if(!node){throw new FS.ErrnoError(ERRNO_CODES.ENOENT)}if(!node.node_ops.getattr){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}return node.node_ops.getattr(node)},lstat:function(path){return FS.stat(path,true)},chmod:function(path,mode,dontFollow){var node;if(typeof path==="string"){var lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}node.node_ops.setattr(node,{mode:mode&4095|node.mode&~4095,timestamp:Date.now()})},lchmod:function(path,mode){FS.chmod(path,mode,true)},fchmod:function(fd,mode){var stream=FS.getStream(fd);if(!stream){throw new FS.ErrnoError(ERRNO_CODES.EBADF)}FS.chmod(stream.node,mode)},chown:function(path,uid,gid,dontFollow){var node;if(typeof path==="string"){var lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}node.node_ops.setattr(node,{timestamp:Date.now()})},lchown:function(path,uid,gid){FS.chown(path,uid,gid,true)},fchown:function(fd,uid,gid){var stream=FS.getStream(fd);if(!stream){throw new FS.ErrnoError(ERRNO_CODES.EBADF)}FS.chown(stream.node,uid,gid)},truncate:function(path,len){if(len<0){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}var node;if(typeof path==="string"){var lookup=FS.lookupPath(path,{follow:true});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}if(FS.isDir(node.mode)){throw new FS.ErrnoError(ERRNO_CODES.EISDIR)}if(!FS.isFile(node.mode)){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}var err=FS.nodePermissions(node,"w");if(err){throw new FS.ErrnoError(err)}node.node_ops.setattr(node,{size:len,timestamp:Date.now()})},ftruncate:function(fd,len){var stream=FS.getStream(fd);if(!stream){throw new FS.ErrnoError(ERRNO_CODES.EBADF)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}FS.truncate(stream.node,len)},utime:function(path,atime,mtime){var lookup=FS.lookupPath(path,{follow:true});var node=lookup.node;node.node_ops.setattr(node,{timestamp:Math.max(atime,mtime)})},open:function(path,flags,mode,fd_start,fd_end){if(path===""){throw new FS.ErrnoError(ERRNO_CODES.ENOENT)}flags=typeof flags==="string"?FS.modeStringToFlags(flags):flags;mode=typeof mode==="undefined"?438:mode;if(flags&64){mode=mode&4095|32768}else{mode=0}var node;if(typeof path==="object"){node=path}else{path=PATH.normalize(path);try{var lookup=FS.lookupPath(path,{follow:!(flags&131072)});node=lookup.node}catch(e){}}var created=false;if(flags&64){if(node){if(flags&128){throw new FS.ErrnoError(ERRNO_CODES.EEXIST)}}else{node=FS.mknod(path,mode,0);created=true}}if(!node){throw new FS.ErrnoError(ERRNO_CODES.ENOENT)}if(FS.isChrdev(node.mode)){flags&=~512}if(flags&65536&&!FS.isDir(node.mode)){throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR)}if(!created){var err=FS.mayOpen(node,flags);if(err){throw new FS.ErrnoError(err)}}if(flags&512){FS.truncate(node,0)}flags&=~(128|512);var stream=FS.createStream({node:node,path:FS.getPath(node),flags:flags,seekable:true,position:0,stream_ops:node.stream_ops,ungotten:[],error:false},fd_start,fd_end);if(stream.stream_ops.open){stream.stream_ops.open(stream)}if(Module["logReadFiles"]&&!(flags&1)){if(!FS.readFiles)FS.readFiles={};if(!(path in FS.readFiles)){FS.readFiles[path]=1;err("read file: "+path)}}try{}catch(e){console.log("FS.trackingDelegate['onOpenFile']('"+path+"', flags) threw an exception: "+e.message)}return stream},close:function(stream){if(FS.isClosed(stream)){throw new FS.ErrnoError(ERRNO_CODES.EBADF)}if(stream.getdents)stream.getdents=null;try{if(stream.stream_ops.close){stream.stream_ops.close(stream)}}catch(e){throw e}finally{FS.closeStream(stream.fd)}stream.fd=null},isClosed:function(stream){return stream.fd===null},llseek:function(stream,offset,whence){if(FS.isClosed(stream)){throw new FS.ErrnoError(ERRNO_CODES.EBADF)}if(!stream.seekable||!stream.stream_ops.llseek){throw new FS.ErrnoError(ERRNO_CODES.ESPIPE)}stream.position=stream.stream_ops.llseek(stream,offset,whence);stream.ungotten=[];return stream.position},read:function(stream,buffer,offset,length,position){if(length<0||position<0){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}if(FS.isClosed(stream)){throw new FS.ErrnoError(ERRNO_CODES.EBADF)}if((stream.flags&2097155)===1){throw new FS.ErrnoError(ERRNO_CODES.EBADF)}if(FS.isDir(stream.node.mode)){throw new FS.ErrnoError(ERRNO_CODES.EISDIR)}if(!stream.stream_ops.read){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}var seeking=typeof position!=="undefined";if(!seeking){position=stream.position}else if(!stream.seekable){throw new FS.ErrnoError(ERRNO_CODES.ESPIPE)}var bytesRead=stream.stream_ops.read(stream,buffer,offset,length,position);if(!seeking)stream.position+=bytesRead;return bytesRead},write:function(stream,buffer,offset,length,position,canOwn){if(length<0||position<0){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}if(FS.isClosed(stream)){throw new FS.ErrnoError(ERRNO_CODES.EBADF)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(ERRNO_CODES.EBADF)}if(FS.isDir(stream.node.mode)){throw new FS.ErrnoError(ERRNO_CODES.EISDIR)}if(!stream.stream_ops.write){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}if(stream.flags&1024){FS.llseek(stream,0,2)}var seeking=typeof position!=="undefined";if(!seeking){position=stream.position}else if(!stream.seekable){throw new FS.ErrnoError(ERRNO_CODES.ESPIPE)}var bytesWritten=stream.stream_ops.write(stream,buffer,offset,length,position,canOwn);if(!seeking)stream.position+=bytesWritten;try{if(stream.path&&FS.trackingDelegate["onWriteToFile"])FS.trackingDelegate["onWriteToFile"](stream.path)}catch(e){console.log("FS.trackingDelegate['onWriteToFile']('"+path+"') threw an exception: "+e.message)}return bytesWritten},allocate:function(stream,offset,length){if(FS.isClosed(stream)){throw new FS.ErrnoError(ERRNO_CODES.EBADF)}if(offset<0||length<=0){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(ERRNO_CODES.EBADF)}if(!FS.isFile(stream.node.mode)&&!FS.isDir(stream.node.mode)){throw new FS.ErrnoError(ERRNO_CODES.ENODEV)}if(!stream.stream_ops.allocate){throw new FS.ErrnoError(ERRNO_CODES.EOPNOTSUPP)}stream.stream_ops.allocate(stream,offset,length)},mmap:function(stream,buffer,offset,length,position,prot,flags){if((stream.flags&2097155)===1){throw new FS.ErrnoError(ERRNO_CODES.EACCES)}if(!stream.stream_ops.mmap){throw new FS.ErrnoError(ERRNO_CODES.ENODEV)}return stream.stream_ops.mmap(stream,buffer,offset,length,position,prot,flags)},msync:function(stream,buffer,offset,length,mmapFlags){if(!stream||!stream.stream_ops.msync){return 0}return stream.stream_ops.msync(stream,buffer,offset,length,mmapFlags)},munmap:function(stream){return 0},ioctl:function(stream,cmd,arg){if(!stream.stream_ops.ioctl){throw new FS.ErrnoError(ERRNO_CODES.ENOTTY)}return stream.stream_ops.ioctl(stream,cmd,arg)},readFile:function(path,opts){opts=opts||{};opts.flags=opts.flags||"r";opts.encoding=opts.encoding||"binary";if(opts.encoding!=="utf8"&&opts.encoding!=="binary"){throw new Error('Invalid encoding type "'+opts.encoding+'"')}var ret;var stream=FS.open(path,opts.flags);var stat=FS.stat(path);var length=stat.size;var buf=new Uint8Array(length);FS.read(stream,buf,0,length,0);if(opts.encoding==="utf8"){ret=UTF8ArrayToString(buf,0)}else if(opts.encoding==="binary"){ret=buf}FS.close(stream);return ret},writeFile:function(path,data,opts){opts=opts||{};opts.flags=opts.flags||"w";var stream=FS.open(path,opts.flags,opts.mode);if(typeof data==="string"){var buf=new Uint8Array(lengthBytesUTF8(data)+1);var actualNumBytes=stringToUTF8Array(data,buf,0,buf.length);FS.write(stream,buf,0,actualNumBytes,undefined,opts.canOwn)}else if(ArrayBuffer.isView(data)){FS.write(stream,data,0,data.byteLength,undefined,opts.canOwn)}else{throw new Error("Unsupported data type")}FS.close(stream)},cwd:function(){return FS.currentPath},chdir:function(path){var lookup=FS.lookupPath(path,{follow:true});if(lookup.node===null){throw new FS.ErrnoError(ERRNO_CODES.ENOENT)}if(!FS.isDir(lookup.node.mode)){throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR)}var err=FS.nodePermissions(lookup.node,"x");if(err){throw new FS.ErrnoError(err)}FS.currentPath=lookup.path},createDefaultDirectories:function(){FS.mkdir("/tmp");FS.mkdir("/home");FS.mkdir("/home/web_user")},createDefaultDevices:function(){FS.mkdir("/dev");FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(stream,buffer,offset,length,pos){return length}});FS.mkdev("/dev/null",FS.makedev(1,3));TTY.register(FS.makedev(5,0),TTY.default_tty_ops);TTY.register(FS.makedev(6,0),TTY.default_tty1_ops);FS.mkdev("/dev/tty",FS.makedev(5,0));FS.mkdev("/dev/tty1",FS.makedev(6,0));var random_device;if(typeof crypto!=="undefined"){var randomBuffer=new Uint8Array(1);random_device=function(){crypto.getRandomValues(randomBuffer);return randomBuffer[0]}}else if(ENVIRONMENT_IS_NODE){random_device=function(){return require("crypto")["randomBytes"](1)[0]}}else{random_device=function(){return Math.random()*256|0}}FS.createDevice("/dev","random",random_device);FS.createDevice("/dev","urandom",random_device);FS.mkdir("/dev/shm");FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc");FS.mkdir("/proc/self");FS.mkdir("/proc/self/fd");FS.mount({mount:function(){var node=FS.createNode("/proc/self","fd",16384|511,73);node.node_ops={lookup:function(parent,name){var fd=+name;var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(ERRNO_CODES.EBADF);var ret={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return stream.path}}};ret.parent=ret;return ret}};return node}},{},"/proc/self/fd")},createStandardStreams:function(){if(Module["stdin"]){FS.createDevice("/dev","stdin",Module["stdin"])}else{FS.symlink("/dev/tty","/dev/stdin")}if(Module["stdout"]){FS.createDevice("/dev","stdout",null,Module["stdout"])}else{FS.symlink("/dev/tty","/dev/stdout")}if(Module["stderr"]){FS.createDevice("/dev","stderr",null,Module["stderr"])}else{FS.symlink("/dev/tty1","/dev/stderr")}var stdin=FS.open("/dev/stdin","r");assert(stdin.fd===0,"invalid handle for stdin ("+stdin.fd+")");var stdout=FS.open("/dev/stdout","w");assert(stdout.fd===1,"invalid handle for stdout ("+stdout.fd+")");var stderr=FS.open("/dev/stderr","w");assert(stderr.fd===2,"invalid handle for stderr ("+stderr.fd+")")},ensureErrnoError:function(){if(FS.ErrnoError)return;FS.ErrnoError=function ErrnoError(errno,node){this.node=node;this.setErrno=function(errno){this.errno=errno;for(var key in ERRNO_CODES){if(ERRNO_CODES[key]===errno){this.code=key;break}}};this.setErrno(errno);this.message=ERRNO_MESSAGES[errno];if(this.stack)Object.defineProperty(this,"stack",{value:(new Error).stack,writable:true})};FS.ErrnoError.prototype=new Error;FS.ErrnoError.prototype.constructor=FS.ErrnoError;[ERRNO_CODES.ENOENT].forEach(function(code){FS.genericErrors[code]=new FS.ErrnoError(code);FS.genericErrors[code].stack="<generic error, no stack>"})},staticInit:function(){FS.ensureErrnoError();FS.nameTable=new Array(4096);FS.mount(MEMFS,{},"/");FS.createDefaultDirectories();FS.createDefaultDevices();FS.createSpecialDirectories();FS.filesystems={MEMFS:MEMFS,IDBFS:IDBFS,NODEFS:NODEFS,WORKERFS:WORKERFS}},init:function(input,output,error){assert(!FS.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)");FS.init.initialized=true;FS.ensureErrnoError();Module["stdin"]=input||Module["stdin"];Module["stdout"]=output||Module["stdout"];Module["stderr"]=error||Module["stderr"];FS.createStandardStreams()},quit:function(){FS.init.initialized=false;var fflush=Module["_fflush"];if(fflush)fflush(0);for(var i=0;i<FS.streams.length;i++){var stream=FS.streams[i];if(!stream){continue}FS.close(stream)}},getMode:function(canRead,canWrite){var mode=0;if(canRead)mode|=292|73;if(canWrite)mode|=146;return mode},joinPath:function(parts,forceRelative){var path=PATH.join.apply(null,parts);if(forceRelative&&path[0]=="/")path=path.substr(1);return path},absolutePath:function(relative,base){return PATH.resolve(base,relative)},standardizePath:function(path){return PATH.normalize(path)},findObject:function(path,dontResolveLastLink){var ret=FS.analyzePath(path,dontResolveLastLink);if(ret.exists){return ret.object}else{___setErrNo(ret.error);return null}},analyzePath:function(path,dontResolveLastLink){try{var lookup=FS.lookupPath(path,{follow:!dontResolveLastLink});path=lookup.path}catch(e){}var ret={isRoot:false,exists:false,error:0,name:null,path:null,object:null,parentExists:false,parentPath:null,parentObject:null};try{var lookup=FS.lookupPath(path,{parent:true});ret.parentExists=true;ret.parentPath=lookup.path;ret.parentObject=lookup.node;ret.name=PATH.basename(path);lookup=FS.lookupPath(path,{follow:!dontResolveLastLink});ret.exists=true;ret.path=lookup.path;ret.object=lookup.node;ret.name=lookup.node.name;ret.isRoot=lookup.path==="/"}catch(e){ret.error=e.errno}return ret},createFolder:function(parent,name,canRead,canWrite){var path=PATH.join2(typeof parent==="string"?parent:FS.getPath(parent),name);var mode=FS.getMode(canRead,canWrite);return FS.mkdir(path,mode)},createPath:function(parent,path,canRead,canWrite){parent=typeof parent==="string"?parent:FS.getPath(parent);var parts=path.split("/").reverse();while(parts.length){var part=parts.pop();if(!part)continue;var current=PATH.join2(parent,part);try{FS.mkdir(current)}catch(e){}parent=current}return current},createFile:function(parent,name,properties,canRead,canWrite){var path=PATH.join2(typeof parent==="string"?parent:FS.getPath(parent),name);var mode=FS.getMode(canRead,canWrite);return FS.create(path,mode)},createDataFile:function(parent,name,data,canRead,canWrite,canOwn){var path=name?PATH.join2(typeof parent==="string"?parent:FS.getPath(parent),name):parent;var mode=FS.getMode(canRead,canWrite);var node=FS.create(path,mode);if(data){if(typeof data==="string"){var arr=new Array(data.length);for(var i=0,len=data.length;i<len;++i)arr[i]=data.charCodeAt(i);data=arr}FS.chmod(node,mode|146);var stream=FS.open(node,"w");FS.write(stream,data,0,data.length,0,canOwn);FS.close(stream);FS.chmod(node,mode)}return node},createDevice:function(parent,name,input,output){var path=PATH.join2(typeof parent==="string"?parent:FS.getPath(parent),name);var mode=FS.getMode(!!input,!!output);if(!FS.createDevice.major)FS.createDevice.major=64;var dev=FS.makedev(FS.createDevice.major++,0);FS.registerDevice(dev,{open:function(stream){stream.seekable=false},close:function(stream){if(output&&output.buffer&&output.buffer.length){output(10)}},read:function(stream,buffer,offset,length,pos){var bytesRead=0;for(var i=0;i<length;i++){var result;try{result=input()}catch(e){throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(result===undefined&&bytesRead===0){throw new FS.ErrnoError(ERRNO_CODES.EAGAIN)}if(result===null||result===undefined)break;bytesRead++;buffer[offset+i]=result}if(bytesRead){stream.node.timestamp=Date.now()}return bytesRead},write:function(stream,buffer,offset,length,pos){for(var i=0;i<length;i++){try{output(buffer[offset+i])}catch(e){throw new FS.ErrnoError(ERRNO_CODES.EIO)}}if(length){stream.node.timestamp=Date.now()}return i}});return FS.mkdev(path,mode,dev)},createLink:function(parent,name,target,canRead,canWrite){var path=PATH.join2(typeof parent==="string"?parent:FS.getPath(parent),name);return FS.symlink(target,path)},forceLoadFile:function(obj){if(obj.isDevice||obj.isFolder||obj.link||obj.contents)return true;var success=true;if(typeof XMLHttpRequest!=="undefined"){throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.")}else if(Module["read"]){try{obj.contents=intArrayFromString(Module["read"](obj.url),true);obj.usedBytes=obj.contents.length}catch(e){success=false}}else{throw new Error("Cannot load without read() or XMLHttpRequest.")}if(!success)___setErrNo(ERRNO_CODES.EIO);return success},createLazyFile:function(parent,name,url,canRead,canWrite){function LazyUint8Array(){this.lengthKnown=false;this.chunks=[]}LazyUint8Array.prototype.get=function LazyUint8Array_get(idx){if(idx>this.length-1||idx<0){return undefined}var chunkOffset=idx%this.chunkSize;var chunkNum=idx/this.chunkSize|0;return this.getter(chunkNum)[chunkOffset]};LazyUint8Array.prototype.setDataGetter=function LazyUint8Array_setDataGetter(getter){this.getter=getter};LazyUint8Array.prototype.cacheLength=function LazyUint8Array_cacheLength(){var xhr=new XMLHttpRequest;xhr.open("HEAD",url,false);xhr.send(null);if(!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error("Couldn't load "+url+". Status: "+xhr.status);var datalength=Number(xhr.getResponseHeader("Content-length"));var header;var hasByteServing=(header=xhr.getResponseHeader("Accept-Ranges"))&&header==="bytes";var usesGzip=(header=xhr.getResponseHeader("Content-Encoding"))&&header==="gzip";var chunkSize=1024*1024;if(!hasByteServing)chunkSize=datalength;var doXHR=function(from,to){if(from>to)throw new Error("invalid range ("+from+", "+to+") or no bytes requested!");if(to>datalength-1)throw new Error("only "+datalength+" bytes available! programmer error!");var xhr=new XMLHttpRequest;xhr.open("GET",url,false);if(datalength!==chunkSize)xhr.setRequestHeader("Range","bytes="+from+"-"+to);if(typeof Uint8Array!="undefined")xhr.responseType="arraybuffer";if(xhr.overrideMimeType){xhr.overrideMimeType("text/plain; charset=x-user-defined")}xhr.send(null);if(!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error("Couldn't load "+url+". Status: "+xhr.status);if(xhr.response!==undefined){return new Uint8Array(xhr.response||[])}else{return intArrayFromString(xhr.responseText||"",true)}};var lazyArray=this;lazyArray.setDataGetter(function(chunkNum){var start=chunkNum*chunkSize;var end=(chunkNum+1)*chunkSize-1;end=Math.min(end,datalength-1);if(typeof lazyArray.chunks[chunkNum]==="undefined"){lazyArray.chunks[chunkNum]=doXHR(start,end)}if(typeof lazyArray.chunks[chunkNum]==="undefined")throw new Error("doXHR failed!");return lazyArray.chunks[chunkNum]});if(usesGzip||!datalength){chunkSize=datalength=1;datalength=this.getter(0).length;chunkSize=datalength;console.log("LazyFiles on gzip forces download of the whole file when length is accessed")}this._length=datalength;this._chunkSize=chunkSize;this.lengthKnown=true};if(typeof XMLHttpRequest!=="undefined"){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var lazyArray=new LazyUint8Array;Object.defineProperties(lazyArray,{length:{get:function(){if(!this.lengthKnown){this.cacheLength()}return this._length}},chunkSize:{get:function(){if(!this.lengthKnown){this.cacheLength()}return this._chunkSize}}});var properties={isDevice:false,contents:lazyArray}}else{var properties={isDevice:false,url:url}}var node=FS.createFile(parent,name,properties,canRead,canWrite);if(properties.contents){node.contents=properties.contents}else if(properties.url){node.contents=null;node.url=properties.url}Object.defineProperties(node,{usedBytes:{get:function(){return this.contents.length}}});var stream_ops={};var keys=Object.keys(node.stream_ops);keys.forEach(function(key){var fn=node.stream_ops[key];stream_ops[key]=function forceLoadLazyFile(){if(!FS.forceLoadFile(node)){throw new FS.ErrnoError(ERRNO_CODES.EIO)}return fn.apply(null,arguments)}});stream_ops.read=function stream_ops_read(stream,buffer,offset,length,position){if(!FS.forceLoadFile(node)){throw new FS.ErrnoError(ERRNO_CODES.EIO)}var contents=stream.node.contents;if(position>=contents.length)return 0;var size=Math.min(contents.length-position,length);assert(size>=0);if(contents.slice){for(var i=0;i<size;i++){buffer[offset+i]=contents[position+i]}}else{for(var i=0;i<size;i++){buffer[offset+i]=contents.get(position+i)}}return size};node.stream_ops=stream_ops;return node},createPreloadedFile:function(parent,name,url,canRead,canWrite,onload,onerror,dontCreateFile,canOwn,preFinish){Browser.init();var fullname=name?PATH.resolve(PATH.join2(parent,name)):parent;var dep=getUniqueRunDependency("cp "+fullname);function processData(byteArray){function finish(byteArray){if(preFinish)preFinish();if(!dontCreateFile){FS.createDataFile(parent,name,byteArray,canRead,canWrite,canOwn)}if(onload)onload();removeRunDependency(dep)}var handled=false;Module["preloadPlugins"].forEach(function(plugin){if(handled)return;if(plugin["canHandle"](fullname)){plugin["handle"](byteArray,fullname,finish,function(){if(onerror)onerror();removeRunDependency(dep)});handled=true}});if(!handled)finish(byteArray)}addRunDependency(dep);if(typeof url=="string"){Browser.asyncLoad(url,function(byteArray){processData(byteArray)},onerror)}else{processData(url)}},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(paths,onload,onerror){onload=onload||function(){};onerror=onerror||function(){};var indexedDB=FS.indexedDB();try{var openRequest=indexedDB.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return onerror(e)}openRequest.onupgradeneeded=function openRequest_onupgradeneeded(){console.log("creating db");var db=openRequest.result;db.createObjectStore(FS.DB_STORE_NAME)};openRequest.onsuccess=function openRequest_onsuccess(){var db=openRequest.result;var transaction=db.transaction([FS.DB_STORE_NAME],"readwrite");var files=transaction.objectStore(FS.DB_STORE_NAME);var ok=0,fail=0,total=paths.length;function finish(){if(fail==0)onload();else onerror()}paths.forEach(function(path){var putRequest=files.put(FS.analyzePath(path).object.contents,path);putRequest.onsuccess=function putRequest_onsuccess(){ok++;if(ok+fail==total)finish()};putRequest.onerror=function putRequest_onerror(){fail++;if(ok+fail==total)finish()}});transaction.onerror=onerror};openRequest.onerror=onerror},loadFilesFromDB:function(paths,onload,onerror){onload=onload||function(){};onerror=onerror||function(){};var indexedDB=FS.indexedDB();try{var openRequest=indexedDB.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return onerror(e)}openRequest.onupgradeneeded=onerror;openRequest.onsuccess=function openRequest_onsuccess(){var db=openRequest.result;try{var transaction=db.transaction([FS.DB_STORE_NAME],"readonly")}catch(e){onerror(e);return}var files=transaction.objectStore(FS.DB_STORE_NAME);var ok=0,fail=0,total=paths.length;function finish(){if(fail==0)onload();else onerror()}paths.forEach(function(path){var getRequest=files.get(path);getRequest.onsuccess=function getRequest_onsuccess(){if(FS.analyzePath(path).exists){FS.unlink(path)}FS.createDataFile(PATH.dirname(path),PATH.basename(path),getRequest.result,true,true,true);ok++;if(ok+fail==total)finish()};getRequest.onerror=function getRequest_onerror(){fail++;if(ok+fail==total)finish()}});transaction.onerror=onerror};openRequest.onerror=onerror}};var SYSCALLS={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(dirfd,path){if(path[0]!=="/"){var dir;if(dirfd===-100){dir=FS.cwd()}else{var dirstream=FS.getStream(dirfd);if(!dirstream)throw new FS.ErrnoError(ERRNO_CODES.EBADF);dir=dirstream.path}path=PATH.join2(dir,path)}return path},doStat:function(func,path,buf){try{var stat=func(path)}catch(e){if(e&&e.node&&PATH.normalize(path)!==PATH.normalize(FS.getPath(e.node))){return-ERRNO_CODES.ENOTDIR}throw e}HEAP32[buf>>2]=stat.dev;HEAP32[buf+4>>2]=0;HEAP32[buf+8>>2]=stat.ino;HEAP32[buf+12>>2]=stat.mode;HEAP32[buf+16>>2]=stat.nlink;HEAP32[buf+20>>2]=stat.uid;HEAP32[buf+24>>2]=stat.gid;HEAP32[buf+28>>2]=stat.rdev;HEAP32[buf+32>>2]=0;HEAP32[buf+36>>2]=stat.size;HEAP32[buf+40>>2]=4096;HEAP32[buf+44>>2]=stat.blocks;HEAP32[buf+48>>2]=stat.atime.getTime()/1e3|0;HEAP32[buf+52>>2]=0;HEAP32[buf+56>>2]=stat.mtime.getTime()/1e3|0;HEAP32[buf+60>>2]=0;HEAP32[buf+64>>2]=stat.ctime.getTime()/1e3|0;HEAP32[buf+68>>2]=0;HEAP32[buf+72>>2]=stat.ino;return 0},doMsync:function(addr,stream,len,flags){var buffer=new Uint8Array(HEAPU8.subarray(addr,addr+len));FS.msync(stream,buffer,0,len,flags)},doMkdir:function(path,mode){path=PATH.normalize(path);if(path[path.length-1]==="/")path=path.substr(0,path.length-1);FS.mkdir(path,mode,0);return 0},doMknod:function(path,mode,dev){switch(mode&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-ERRNO_CODES.EINVAL}FS.mknod(path,mode,dev);return 0},doReadlink:function(path,buf,bufsize){if(bufsize<=0)return-ERRNO_CODES.EINVAL;var ret=FS.readlink(path);var len=Math.min(bufsize,lengthBytesUTF8(ret));var endChar=HEAP8[buf+len];stringToUTF8(ret,buf,bufsize+1);HEAP8[buf+len]=endChar;return len},doAccess:function(path,amode){if(amode&~7){return-ERRNO_CODES.EINVAL}var node;var lookup=FS.lookupPath(path,{follow:true});node=lookup.node;var perms="";if(amode&4)perms+="r";if(amode&2)perms+="w";if(amode&1)perms+="x";if(perms&&FS.nodePermissions(node,perms)){return-ERRNO_CODES.EACCES}return 0},doDup:function(path,flags,suggestFD){var suggest=FS.getStream(suggestFD);if(suggest)FS.close(suggest);return FS.open(path,flags,0,suggestFD,suggestFD).fd},doReadv:function(stream,iov,iovcnt,offset){var ret=0;for(var i=0;i<iovcnt;i++){var ptr=HEAP32[iov+i*8>>2];var len=HEAP32[iov+(i*8+4)>>2];var curr=FS.read(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr;if(curr<len)break}return ret},doWritev:function(stream,iov,iovcnt,offset){var ret=0;for(var i=0;i<iovcnt;i++){var ptr=HEAP32[iov+i*8>>2];var len=HEAP32[iov+(i*8+4)>>2];var curr=FS.write(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr}return ret},varargs:0,get:function(varargs){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr:function(){var ret=Pointer_stringify(SYSCALLS.get());return ret},getStreamFromFD:function(){var stream=FS.getStream(SYSCALLS.get());if(!stream)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return stream},getSocketFromFD:function(){var socket=SOCKFS.getSocket(SYSCALLS.get());if(!socket)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return socket},getSocketAddress:function(allowNull){var addrp=SYSCALLS.get(),addrlen=SYSCALLS.get();if(allowNull&&addrp===0)return null;var info=__read_sockaddr(addrp,addrlen);if(info.errno)throw new FS.ErrnoError(info.errno);info.addr=DNS.lookup_addr(info.addr)||info.addr;return info},get64:function(){var low=SYSCALLS.get(),high=SYSCALLS.get();if(low>=0)assert(high===0);else assert(high===-1);return low},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall140(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(),offset_high=SYSCALLS.get(),offset_low=SYSCALLS.get(),result=SYSCALLS.get(),whence=SYSCALLS.get();var offset=offset_low;FS.llseek(stream,offset,whence);HEAP32[result>>2]=stream.position;if(stream.getdents&&offset===0&&whence===0)stream.getdents=null;return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall146(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(),iov=SYSCALLS.get(),iovcnt=SYSCALLS.get();return SYSCALLS.doWritev(stream,iov,iovcnt)}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall195(which,varargs){SYSCALLS.varargs=varargs;try{var path=SYSCALLS.getStr(),buf=SYSCALLS.get();return SYSCALLS.doStat(FS.stat,path,buf)}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall197(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(),buf=SYSCALLS.get();return SYSCALLS.doStat(FS.stat,stream.path,buf)}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall221(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(),cmd=SYSCALLS.get();switch(cmd){case 0:{var arg=SYSCALLS.get();if(arg<0){return-ERRNO_CODES.EINVAL}var newStream;newStream=FS.open(stream.path,stream.flags,0,arg);return newStream.fd}case 1:case 2:return 0;case 3:return stream.flags;case 4:{var arg=SYSCALLS.get();stream.flags|=arg;return 0}case 12:case 12:{var arg=SYSCALLS.get();var offset=0;HEAP16[arg+offset>>1]=2;return 0}case 13:case 14:case 13:case 14:return 0;case 16:case 8:return-ERRNO_CODES.EINVAL;case 9:___setErrNo(ERRNO_CODES.EINVAL);return-1;default:{return-ERRNO_CODES.EINVAL}}}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall3(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(),buf=SYSCALLS.get(),count=SYSCALLS.get();return FS.read(stream,HEAP8,buf,count)}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall4(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(),buf=SYSCALLS.get(),count=SYSCALLS.get();return FS.write(stream,HEAP8,buf,count)}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall54(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(),op=SYSCALLS.get();switch(op){case 21509:case 21505:{if(!stream.tty)return-ERRNO_CODES.ENOTTY;return 0}case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:{if(!stream.tty)return-ERRNO_CODES.ENOTTY;return 0}case 21519:{if(!stream.tty)return-ERRNO_CODES.ENOTTY;var argp=SYSCALLS.get();HEAP32[argp>>2]=0;return 0}case 21520:{if(!stream.tty)return-ERRNO_CODES.ENOTTY;return-ERRNO_CODES.EINVAL}case 21531:{var argp=SYSCALLS.get();return FS.ioctl(stream,op,argp)}case 21523:{if(!stream.tty)return-ERRNO_CODES.ENOTTY;return 0}case 21524:{if(!stream.tty)return-ERRNO_CODES.ENOTTY;return 0}default:abort("bad ioctl syscall "+op)}}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall6(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD();FS.close(stream);return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___unlock(){}function _abort(){Module["abort"]()}function _emscripten_get_now(){abort()}function __exit(status){exit(status)}function _exit(status){__exit(status)}function _gettimeofday(ptr){var now=Date.now();HEAP32[ptr>>2]=now/1e3|0;HEAP32[ptr+4>>2]=now%1e3*1e3|0;return 0}var ___tm_timezone=allocate(intArrayFromString("GMT"),"i8",ALLOC_STATIC);function _gmtime_r(time,tmPtr){var date=new Date(HEAP32[time>>2]*1e3);HEAP32[tmPtr>>2]=date.getUTCSeconds();HEAP32[tmPtr+4>>2]=date.getUTCMinutes();HEAP32[tmPtr+8>>2]=date.getUTCHours();HEAP32[tmPtr+12>>2]=date.getUTCDate();HEAP32[tmPtr+16>>2]=date.getUTCMonth();HEAP32[tmPtr+20>>2]=date.getUTCFullYear()-1900;HEAP32[tmPtr+24>>2]=date.getUTCDay();HEAP32[tmPtr+36>>2]=0;HEAP32[tmPtr+32>>2]=0;var start=Date.UTC(date.getUTCFullYear(),0,1,0,0,0,0);var yday=(date.getTime()-start)/(1e3*60*60*24)|0;HEAP32[tmPtr+28>>2]=yday;HEAP32[tmPtr+40>>2]=___tm_timezone;return tmPtr}function _jsArc(c,x,y,r,a1,a2,dir){__ctx.arc(x,y,r,a1,a2,dir)}function _jsBeginPath(c){__ctx.beginPath()}function _jsBezierCurveTo(c,c1x,c1y,c2x,c2y,x,y){__ctx.bezierCurveTo(c1x,c1y,c2x,c2y,x,y)}function _jsClosePath(c){__ctx.closePath()}function _jsCurrentBrowserFPS(){return Module.coreHelpers.jsCurrentBrowserFPS.apply(undefined,arguments)}function _jsExecutionContextFPSync(){Module.coreHelpers.jsExecutionContextFPSync.apply(undefined,arguments)}function _jsFill(c){__ctx.fill()}function _jsFillRect(c,x,y,w,h){__ctx.fillRect(x,y,w,h)}function _jsFillStyle(c,s){__ctx.fillStyle=Pointer_stringify(s)}function _jsFillText(c,t,len,x,y,w){__ctx.fillText(Pointer_stringify(t,len),x,y,w)}function _jsFont(c,f,len){__ctx.fillStyle=Pointer_stringify(f,len)}function _jsHttpClientAddHeader(){Module.httpClient.jsHttpClientAddHeader.apply(undefined,arguments)}function _jsHttpClientClose(){Module.httpClient.jsHttpClientClose.apply(undefined,arguments)}function _jsHttpClientConfigCORS(){Module.httpClient.jsHttpClientConfigCORS.apply(undefined,arguments)}function _jsHttpClientGetHeader(){Module.httpClient.jsHttpClientGetHeader.apply(undefined,arguments)}function _jsHttpClientHeaderExists(){Module.httpClient.jsHttpClientHeaderExists.apply(undefined,arguments)}function _jsHttpClientListHeaders(){Module.httpClient.jsHttpClientListHeaders.apply(undefined,arguments)}function _jsHttpClientMethod(){Module.httpClient.jsHttpClientMethod.apply(undefined,arguments)}function _jsHttpClientOpen(){Module.httpClient.jsHttpClientOpen.apply(undefined,arguments)}function _jsHttpClientRemoveHeader(){Module.httpClient.jsHttpClientRemoveHeader.apply(undefined,arguments)}function _jsIsNotAJavaScriptRefnum(){Module.javaScriptInvoke.jsIsNotAJavaScriptRefnum.apply(undefined,arguments)}function _jsJavaScriptInvoke(){Module.javaScriptInvoke.jsJavaScriptInvoke.apply(undefined,arguments)}function _jsLineTo(c,x,y){__ctx.lineTo(x,y)}function _jsLineWidth(c,w){__ctx.lineWidth=w}function _jsMoveTo(c,x,y){__ctx.moveTo(x,y)}function _jsObtainCanvas2D(name,len){var theCanvas=document.getElementById(Pointer_stringify(name,len));__ctx=theCanvas.getContext("2d");return 0}function _jsPropertyNodeRead(){Module.propertyNode.jsPropertyNodeRead.apply(undefined,arguments)}function _jsPropertyNodeWrite(){Module.propertyNode.jsPropertyNodeWrite.apply(undefined,arguments)}function _jsRegisterForControlEvent(){Module.eventHelpers.jsRegisterForControlEvent.apply(undefined,arguments)}function _jsStroke(c){__ctx.stroke()}function _jsStrokeStyle(c,s){__ctx.strokeStyle=Pointer_stringify(s)}function _jsUnRegisterForControlEvent(){Module.eventHelpers.jsUnRegisterForControlEvent.apply(undefined,arguments)}function _llvm_log10_f32(x){return Math.log(x)/Math.LN10}function _llvm_log10_f64(){return _llvm_log10_f32.apply(null,arguments)}function _llvm_log2_f32(x){return Math.log(x)/Math.LN2}function _llvm_log2_f64(){return _llvm_log2_f32.apply(null,arguments)}var _llvm_trunc_f32=Math_trunc;var _llvm_trunc_f64=Math_trunc;function _tzset(){if(_tzset.called)return;_tzset.called=true;HEAP32[__get_timezone()>>2]=(new Date).getTimezoneOffset()*60;var winter=new Date(2e3,0,1);var summer=new Date(2e3,6,1);HEAP32[__get_daylight()>>2]=Number(winter.getTimezoneOffset()!=summer.getTimezoneOffset());function extractZone(date){var match=date.toTimeString().match(/\(([A-Za-z ]+)\)$/);return match?match[1]:"GMT"}var winterName=extractZone(winter);var summerName=extractZone(summer);var winterNamePtr=allocate(intArrayFromString(winterName),"i8",ALLOC_NORMAL);var summerNamePtr=allocate(intArrayFromString(summerName),"i8",ALLOC_NORMAL);if(summer.getTimezoneOffset()<winter.getTimezoneOffset()){HEAP32[__get_tzname()>>2]=winterNamePtr;HEAP32[__get_tzname()+4>>2]=summerNamePtr}else{HEAP32[__get_tzname()>>2]=summerNamePtr;HEAP32[__get_tzname()+4>>2]=winterNamePtr}}function _localtime_r(time,tmPtr){_tzset();var date=new Date(HEAP32[time>>2]*1e3);HEAP32[tmPtr>>2]=date.getSeconds();HEAP32[tmPtr+4>>2]=date.getMinutes();HEAP32[tmPtr+8>>2]=date.getHours();HEAP32[tmPtr+12>>2]=date.getDate();HEAP32[tmPtr+16>>2]=date.getMonth();HEAP32[tmPtr+20>>2]=date.getFullYear()-1900;HEAP32[tmPtr+24>>2]=date.getDay();var start=new Date(date.getFullYear(),0,1);var yday=(date.getTime()-start.getTime())/(1e3*60*60*24)|0;HEAP32[tmPtr+28>>2]=yday;HEAP32[tmPtr+36>>2]=-(date.getTimezoneOffset()*60);var summerOffset=new Date(2e3,6,1).getTimezoneOffset();var winterOffset=start.getTimezoneOffset();var dst=(summerOffset!=winterOffset&&date.getTimezoneOffset()==Math.min(winterOffset,summerOffset))|0;HEAP32[tmPtr+32>>2]=dst;var zonePtr=HEAP32[__get_tzname()+(dst?4:0)>>2];HEAP32[tmPtr+40>>2]=zonePtr;return tmPtr}function _emscripten_memcpy_big(dest,src,num){HEAPU8.set(HEAPU8.subarray(src,src+num),dest);return dest}function _timegm(tmPtr){_tzset();var time=Date.UTC(HEAP32[tmPtr+20>>2]+1900,HEAP32[tmPtr+16>>2],HEAP32[tmPtr+12>>2],HEAP32[tmPtr+8>>2],HEAP32[tmPtr+4>>2],HEAP32[tmPtr>>2],0);var date=new Date(time);HEAP32[tmPtr+24>>2]=date.getUTCDay();var start=Date.UTC(date.getUTCFullYear(),0,1,0,0,0,0);var yday=(date.getTime()-start)/(1e3*60*60*24)|0;HEAP32[tmPtr+28>>2]=yday;return date.getTime()/1e3|0}FS.staticInit();__ATINIT__.unshift(function(){if(!Module["noFSInit"]&&!FS.init.initialized)FS.init()});__ATMAIN__.push(function(){FS.ignorePermissions=false});__ATEXIT__.push(function(){FS.quit()});__ATINIT__.unshift(function(){});__ATEXIT__.push(function(){});if(ENVIRONMENT_IS_NODE){var fs=require("fs");var NODEJS_PATH=require("path");NODEFS.staticInit()}if(ENVIRONMENT_IS_NODE){_emscripten_get_now=function _emscripten_get_now_actual(){var t=process["hrtime"]();return t[0]*1e3+t[1]/1e6}}else if(typeof dateNow!=="undefined"){_emscripten_get_now=dateNow}else if(typeof self==="object"&&self["performance"]&&typeof self["performance"]["now"]==="function"){_emscripten_get_now=function(){return self["performance"]["now"]()}}else if(typeof performance==="object"&&typeof performance["now"]==="function"){_emscripten_get_now=function(){return performance["now"]()}}else{_emscripten_get_now=Date.now}DYNAMICTOP_PTR=staticAlloc(4);STACK_BASE=STACKTOP=alignMemory(STATICTOP);STACK_MAX=STACK_BASE+TOTAL_STACK;DYNAMIC_BASE=alignMemory(STACK_MAX);HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE;staticSealed=true;function intArrayFromString(stringy,dontAddNull,length){var len=length>0?length:lengthBytesUTF8(stringy)+1;var u8array=new Array(len);var numBytesWritten=stringToUTF8Array(stringy,u8array,0,u8array.length);if(dontAddNull)u8array.length=numBytesWritten;return u8array}Module["wasmTableSize"]=2382;Module["wasmMaxTableSize"]=2382;Module.asmGlobalArg={};Module.asmLibraryArg={abort:abort,enlargeMemory:enlargeMemory,getTotalMemory:getTotalMemory,abortOnCannotGrowMemory:abortOnCannotGrowMemory,___buildEnvironment:___buildEnvironment,___cxa_pure_virtual:___cxa_pure_virtual,___lock:___lock,___setErrNo:___setErrNo,___syscall140:___syscall140,___syscall146:___syscall146,___syscall195:___syscall195,___syscall197:___syscall197,___syscall221:___syscall221,___syscall3:___syscall3,___syscall4:___syscall4,___syscall54:___syscall54,___syscall6:___syscall6,___unlock:___unlock,_abort:_abort,_emscripten_get_now:_emscripten_get_now,_emscripten_memcpy_big:_emscripten_memcpy_big,_exit:_exit,_gettimeofday:_gettimeofday,_gmtime_r:_gmtime_r,_jsArc:_jsArc,_jsBeginPath:_jsBeginPath,_jsBezierCurveTo:_jsBezierCurveTo,_jsClosePath:_jsClosePath,_jsCurrentBrowserFPS:_jsCurrentBrowserFPS,_jsExecutionContextFPSync:_jsExecutionContextFPSync,_jsFill:_jsFill,_jsFillRect:_jsFillRect,_jsFillStyle:_jsFillStyle,_jsFillText:_jsFillText,_jsFont:_jsFont,_jsHttpClientAddHeader:_jsHttpClientAddHeader,_jsHttpClientClose:_jsHttpClientClose,_jsHttpClientConfigCORS:_jsHttpClientConfigCORS,_jsHttpClientGetHeader:_jsHttpClientGetHeader,_jsHttpClientHeaderExists:_jsHttpClientHeaderExists,_jsHttpClientListHeaders:_jsHttpClientListHeaders,_jsHttpClientMethod:_jsHttpClientMethod,_jsHttpClientOpen:_jsHttpClientOpen,_jsHttpClientRemoveHeader:_jsHttpClientRemoveHeader,_jsIsNotAJavaScriptRefnum:_jsIsNotAJavaScriptRefnum,_jsJavaScriptInvoke:_jsJavaScriptInvoke,_jsLineTo:_jsLineTo,_jsLineWidth:_jsLineWidth,_jsMoveTo:_jsMoveTo,_jsObtainCanvas2D:_jsObtainCanvas2D,_jsPropertyNodeRead:_jsPropertyNodeRead,_jsPropertyNodeWrite:_jsPropertyNodeWrite,_jsRegisterForControlEvent:_jsRegisterForControlEvent,_jsStroke:_jsStroke,_jsStrokeStyle:_jsStrokeStyle,_jsUnRegisterForControlEvent:_jsUnRegisterForControlEvent,_llvm_log10_f32:_llvm_log10_f32,_llvm_log10_f64:_llvm_log10_f64,_llvm_log2_f32:_llvm_log2_f32,_llvm_log2_f64:_llvm_log2_f64,_llvm_trunc_f32:_llvm_trunc_f32,_llvm_trunc_f64:_llvm_trunc_f64,_localtime_r:_localtime_r,_timegm:_timegm,DYNAMICTOP_PTR:DYNAMICTOP_PTR,STACKTOP:STACKTOP};var asm=Module["asm"](Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module["asm"]=asm;var _Data_GetArrayBegin=Module["_Data_GetArrayBegin"]=function(){return Module["asm"]["_Data_GetArrayBegin"].apply(null,arguments)};var _Data_GetArrayDimLength=Module["_Data_GetArrayDimLength"]=function(){return Module["asm"]["_Data_GetArrayDimLength"].apply(null,arguments)};var _Data_GetArrayDimensions=Module["_Data_GetArrayDimensions"]=function(){return Module["asm"]["_Data_GetArrayDimensions"].apply(null,arguments)};var _Data_GetArrayLength=Module["_Data_GetArrayLength"]=function(){return Module["asm"]["_Data_GetArrayLength"].apply(null,arguments)};var _Data_GetArrayMetadata=Module["_Data_GetArrayMetadata"]=function(){return Module["asm"]["_Data_GetArrayMetadata"].apply(null,arguments)};var _Data_GetStringBegin=Module["_Data_GetStringBegin"]=function(){return Module["asm"]["_Data_GetStringBegin"].apply(null,arguments)};var _Data_GetStringLength=Module["_Data_GetStringLength"]=function(){return Module["asm"]["_Data_GetStringLength"].apply(null,arguments)};var _Data_ReadBoolean=Module["_Data_ReadBoolean"]=function(){return Module["asm"]["_Data_ReadBoolean"].apply(null,arguments)};var _Data_ReadDouble=Module["_Data_ReadDouble"]=function(){return Module["asm"]["_Data_ReadDouble"].apply(null,arguments)};var _Data_ReadInt16=Module["_Data_ReadInt16"]=function(){return Module["asm"]["_Data_ReadInt16"].apply(null,arguments)};var _Data_ReadInt32=Module["_Data_ReadInt32"]=function(){return Module["asm"]["_Data_ReadInt32"].apply(null,arguments)};var _Data_ReadInt8=Module["_Data_ReadInt8"]=function(){return Module["asm"]["_Data_ReadInt8"].apply(null,arguments)};var _Data_ReadJavaScriptRefNum=Module["_Data_ReadJavaScriptRefNum"]=function(){return Module["asm"]["_Data_ReadJavaScriptRefNum"].apply(null,arguments)};var _Data_ReadSingle=Module["_Data_ReadSingle"]=function(){return Module["asm"]["_Data_ReadSingle"].apply(null,arguments)};var _Data_ReadUInt16=Module["_Data_ReadUInt16"]=function(){return Module["asm"]["_Data_ReadUInt16"].apply(null,arguments)};var _Data_ReadUInt32=Module["_Data_ReadUInt32"]=function(){return Module["asm"]["_Data_ReadUInt32"].apply(null,arguments)};var _Data_ReadUInt8=Module["_Data_ReadUInt8"]=function(){return Module["asm"]["_Data_ReadUInt8"].apply(null,arguments)};var _Data_ResizeArray=Module["_Data_ResizeArray"]=function(){return Module["asm"]["_Data_ResizeArray"].apply(null,arguments)};var _Data_ValidateArrayType=Module["_Data_ValidateArrayType"]=function(){return Module["asm"]["_Data_ValidateArrayType"].apply(null,arguments)};var _Data_WriteBoolean=Module["_Data_WriteBoolean"]=function(){return Module["asm"]["_Data_WriteBoolean"].apply(null,arguments)};var _Data_WriteDouble=Module["_Data_WriteDouble"]=function(){return Module["asm"]["_Data_WriteDouble"].apply(null,arguments)};var _Data_WriteInt16=Module["_Data_WriteInt16"]=function(){return Module["asm"]["_Data_WriteInt16"].apply(null,arguments)};var _Data_WriteInt32=Module["_Data_WriteInt32"]=function(){return Module["asm"]["_Data_WriteInt32"].apply(null,arguments)};var _Data_WriteInt8=Module["_Data_WriteInt8"]=function(){return Module["asm"]["_Data_WriteInt8"].apply(null,arguments)};var _Data_WriteJavaScriptRefNum=Module["_Data_WriteJavaScriptRefNum"]=function(){return Module["asm"]["_Data_WriteJavaScriptRefNum"].apply(null,arguments)};var _Data_WriteSingle=Module["_Data_WriteSingle"]=function(){return Module["asm"]["_Data_WriteSingle"].apply(null,arguments)};var _Data_WriteString=Module["_Data_WriteString"]=function(){return Module["asm"]["_Data_WriteString"].apply(null,arguments)};var _Data_WriteUInt16=Module["_Data_WriteUInt16"]=function(){return Module["asm"]["_Data_WriteUInt16"].apply(null,arguments)};var _Data_WriteUInt32=Module["_Data_WriteUInt32"]=function(){return Module["asm"]["_Data_WriteUInt32"].apply(null,arguments)};var _Data_WriteUInt8=Module["_Data_WriteUInt8"]=function(){return Module["asm"]["_Data_WriteUInt8"].apply(null,arguments)};var _EggShell_AllocateData=Module["_EggShell_AllocateData"]=function(){return Module["asm"]["_EggShell_AllocateData"].apply(null,arguments)};var _EggShell_Create=Module["_EggShell_Create"]=function(){return Module["asm"]["_EggShell_Create"].apply(null,arguments)};var _EggShell_DeallocateData=Module["_EggShell_DeallocateData"]=function(){return Module["asm"]["_EggShell_DeallocateData"].apply(null,arguments)};var _EggShell_Delete=Module["_EggShell_Delete"]=function(){return Module["asm"]["_EggShell_Delete"].apply(null,arguments)};var _EggShell_ExecuteSlices=Module["_EggShell_ExecuteSlices"]=function(){return Module["asm"]["_EggShell_ExecuteSlices"].apply(null,arguments)};var _EggShell_FindSubValue=Module["_EggShell_FindSubValue"]=function(){return Module["asm"]["_EggShell_FindSubValue"].apply(null,arguments)};var _EggShell_FindValue=Module["_EggShell_FindValue"]=function(){return Module["asm"]["_EggShell_FindValue"].apply(null,arguments)};var _EggShell_GetArrayDimLength=Module["_EggShell_GetArrayDimLength"]=function(){return Module["asm"]["_EggShell_GetArrayDimLength"].apply(null,arguments)};var _EggShell_GetPointer=Module["_EggShell_GetPointer"]=function(){return Module["asm"]["_EggShell_GetPointer"].apply(null,arguments)};var _EggShell_REPL=Module["_EggShell_REPL"]=function(){return Module["asm"]["_EggShell_REPL"].apply(null,arguments)};var _EggShell_ReadDouble=Module["_EggShell_ReadDouble"]=function(){return Module["asm"]["_EggShell_ReadDouble"].apply(null,arguments)};var _EggShell_ReadValueString=Module["_EggShell_ReadValueString"]=function(){return Module["asm"]["_EggShell_ReadValueString"].apply(null,arguments)};var _EggShell_ResizeArray=Module["_EggShell_ResizeArray"]=function(){return Module["asm"]["_EggShell_ResizeArray"].apply(null,arguments)};var _EggShell_WriteDouble=Module["_EggShell_WriteDouble"]=function(){return Module["asm"]["_EggShell_WriteDouble"].apply(null,arguments)};var _EggShell_WriteValueString=Module["_EggShell_WriteValueString"]=function(){return Module["asm"]["_EggShell_WriteValueString"].apply(null,arguments)};var _JavaScriptInvoke_GetArrayElementType=Module["_JavaScriptInvoke_GetArrayElementType"]=function(){return Module["asm"]["_JavaScriptInvoke_GetArrayElementType"].apply(null,arguments)};var _JavaScriptInvoke_GetParameterPointer=Module["_JavaScriptInvoke_GetParameterPointer"]=function(){return Module["asm"]["_JavaScriptInvoke_GetParameterPointer"].apply(null,arguments)};var _JavaScriptInvoke_GetParameterType=Module["_JavaScriptInvoke_GetParameterType"]=function(){return Module["asm"]["_JavaScriptInvoke_GetParameterType"].apply(null,arguments)};var _OccurEvent=Module["_OccurEvent"]=function(){return Module["asm"]["_OccurEvent"].apply(null,arguments)};var _Occurrence_Set=Module["_Occurrence_Set"]=function(){return Module["asm"]["_Occurrence_Set"].apply(null,arguments)};var _TypeRef_ElementName=Module["_TypeRef_ElementName"]=function(){return Module["asm"]["_TypeRef_ElementName"].apply(null,arguments)};var _TypeRef_GetSubElementByIndex=Module["_TypeRef_GetSubElementByIndex"]=function(){return Module["asm"]["_TypeRef_GetSubElementByIndex"].apply(null,arguments)};var _TypeRef_IsAnalogWaveform=Module["_TypeRef_IsAnalogWaveform"]=function(){return Module["asm"]["_TypeRef_IsAnalogWaveform"].apply(null,arguments)};var _TypeRef_IsArray=Module["_TypeRef_IsArray"]=function(){return Module["asm"]["_TypeRef_IsArray"].apply(null,arguments)};var _TypeRef_IsBoolean=Module["_TypeRef_IsBoolean"]=function(){return Module["asm"]["_TypeRef_IsBoolean"].apply(null,arguments)};var _TypeRef_IsCluster=Module["_TypeRef_IsCluster"]=function(){return Module["asm"]["_TypeRef_IsCluster"].apply(null,arguments)};var _TypeRef_IsComplex=Module["_TypeRef_IsComplex"]=function(){return Module["asm"]["_TypeRef_IsComplex"].apply(null,arguments)};var _TypeRef_IsEnum=Module["_TypeRef_IsEnum"]=function(){return Module["asm"]["_TypeRef_IsEnum"].apply(null,arguments)};var _TypeRef_IsFloat=Module["_TypeRef_IsFloat"]=function(){return Module["asm"]["_TypeRef_IsFloat"].apply(null,arguments)};var _TypeRef_IsInteger=Module["_TypeRef_IsInteger"]=function(){return Module["asm"]["_TypeRef_IsInteger"].apply(null,arguments)};var _TypeRef_IsPath=Module["_TypeRef_IsPath"]=function(){return Module["asm"]["_TypeRef_IsPath"].apply(null,arguments)};var _TypeRef_IsSigned=Module["_TypeRef_IsSigned"]=function(){return Module["asm"]["_TypeRef_IsSigned"].apply(null,arguments)};var _TypeRef_IsString=Module["_TypeRef_IsString"]=function(){return Module["asm"]["_TypeRef_IsString"].apply(null,arguments)};var _TypeRef_IsTimestamp=Module["_TypeRef_IsTimestamp"]=function(){return Module["asm"]["_TypeRef_IsTimestamp"].apply(null,arguments)};var _TypeRef_Name=Module["_TypeRef_Name"]=function(){return Module["asm"]["_TypeRef_Name"].apply(null,arguments)};var _TypeRef_Rank=Module["_TypeRef_Rank"]=function(){return Module["asm"]["_TypeRef_Rank"].apply(null,arguments)};var _TypeRef_SubElementCount=Module["_TypeRef_SubElementCount"]=function(){return Module["asm"]["_TypeRef_SubElementCount"].apply(null,arguments)};var _TypeRef_TopAQSize=Module["_TypeRef_TopAQSize"]=function(){return Module["asm"]["_TypeRef_TopAQSize"].apply(null,arguments)};var _Vireo_MaxExecWakeUpTime=Module["_Vireo_MaxExecWakeUpTime"]=function(){return Module["asm"]["_Vireo_MaxExecWakeUpTime"].apply(null,arguments)};var _Vireo_Version=Module["_Vireo_Version"]=function(){return Module["asm"]["_Vireo_Version"].apply(null,arguments)};var __GLOBAL__sub_I_Canvas2d_cpp=Module["__GLOBAL__sub_I_Canvas2d_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_Canvas2d_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_ControlRef_cpp=Module["__GLOBAL__sub_I_ControlRef_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_ControlRef_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_Events_cpp=Module["__GLOBAL__sub_I_Events_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_Events_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_ExecutionContext_cpp=Module["__GLOBAL__sub_I_ExecutionContext_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_ExecutionContext_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_FileIO_cpp=Module["__GLOBAL__sub_I_FileIO_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_FileIO_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_GenericFunctions_cpp=Module["__GLOBAL__sub_I_GenericFunctions_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_GenericFunctions_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_HttpClient_cpp=Module["__GLOBAL__sub_I_HttpClient_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_HttpClient_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_JavaScriptInvoke_cpp=Module["__GLOBAL__sub_I_JavaScriptInvoke_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_JavaScriptInvoke_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_JavaScriptRef_cpp=Module["__GLOBAL__sub_I_JavaScriptRef_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_JavaScriptRef_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_MatchPat_cpp=Module["__GLOBAL__sub_I_MatchPat_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_MatchPat_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_Math_cpp=Module["__GLOBAL__sub_I_Math_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_Math_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_NumericString_cpp=Module["__GLOBAL__sub_I_NumericString_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_NumericString_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_PropertyNode_cpp=Module["__GLOBAL__sub_I_PropertyNode_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_PropertyNode_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_String_cpp=Module["__GLOBAL__sub_I_String_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_String_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_Synchronization_cpp=Module["__GLOBAL__sub_I_Synchronization_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_Synchronization_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_TDCodecLVFlat_cpp=Module["__GLOBAL__sub_I_TDCodecLVFlat_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_TDCodecLVFlat_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_TDCodecVia_cpp=Module["__GLOBAL__sub_I_TDCodecVia_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_TDCodecVia_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_TimeFunctions_cpp=Module["__GLOBAL__sub_I_TimeFunctions_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_TimeFunctions_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_TypeAndDataManager_cpp=Module["__GLOBAL__sub_I_TypeAndDataManager_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_TypeAndDataManager_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_VirtualInstrument_cpp=Module["__GLOBAL__sub_I_VirtualInstrument_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_VirtualInstrument_cpp"].apply(null,arguments)};var __GLOBAL__sub_I_Waveform_cpp=Module["__GLOBAL__sub_I_Waveform_cpp"]=function(){return Module["asm"]["__GLOBAL__sub_I_Waveform_cpp"].apply(null,arguments)};var ___emscripten_environ_constructor=Module["___emscripten_environ_constructor"]=function(){return Module["asm"]["___emscripten_environ_constructor"].apply(null,arguments)};var ___errno_location=Module["___errno_location"]=function(){return Module["asm"]["___errno_location"].apply(null,arguments)};var __get_daylight=Module["__get_daylight"]=function(){return Module["asm"]["__get_daylight"].apply(null,arguments)};var __get_timezone=Module["__get_timezone"]=function(){return Module["asm"]["__get_timezone"].apply(null,arguments)};var __get_tzname=Module["__get_tzname"]=function(){return Module["asm"]["__get_tzname"].apply(null,arguments)};var _emscripten_replace_memory=Module["_emscripten_replace_memory"]=function(){return Module["asm"]["_emscripten_replace_memory"].apply(null,arguments)};var _free=Module["_free"]=function(){return Module["asm"]["_free"].apply(null,arguments)};var _malloc=Module["_malloc"]=function(){return Module["asm"]["_malloc"].apply(null,arguments)};var stackAlloc=Module["stackAlloc"]=function(){return Module["asm"]["stackAlloc"].apply(null,arguments)};var stackRestore=Module["stackRestore"]=function(){return Module["asm"]["stackRestore"].apply(null,arguments)};var stackSave=Module["stackSave"]=function(){return Module["asm"]["stackSave"].apply(null,arguments)};var dynCall_v=Module["dynCall_v"]=function(){return Module["asm"]["dynCall_v"].apply(null,arguments)};var dynCall_vi=Module["dynCall_vi"]=function(){return Module["asm"]["dynCall_vi"].apply(null,arguments)};Module["asm"]=asm;Module["cwrap"]=cwrap;Module["setValue"]=setValue;Module["getValue"]=getValue;Module["Pointer_stringify"]=Pointer_stringify;Module["stringToUTF8"]=stringToUTF8;Module["lengthBytesUTF8"]=lengthBytesUTF8;Module["writeArrayToMemory"]=writeArrayToMemory;Module["stackSave"]=stackSave;Module["stackRestore"]=stackRestore;Module["stackAlloc"]=stackAlloc;Module["then"]=function(func){if(Module["calledRun"]){func(Module)}else{var old=Module["onRuntimeInitialized"];Module["onRuntimeInitialized"]=function(){if(old)old();func(Module)}}return Module};function ExitStatus(status){this.name="ExitStatus";this.message="Program terminated with exit("+status+")";this.status=status}ExitStatus.prototype=new Error;ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function runCaller(){if(!Module["calledRun"])run();if(!Module["calledRun"])dependenciesFulfilled=runCaller};function run(args){args=args||Module["arguments"];if(runDependencies>0){return}preRun();if(runDependencies>0)return;if(Module["calledRun"])return;function doRun(){if(Module["calledRun"])return;Module["calledRun"]=true;if(ABORT)return;ensureInitRuntime();preMain();if(Module["onRuntimeInitialized"])Module["onRuntimeInitialized"]();postRun()}if(Module["setStatus"]){Module["setStatus"]("Running...");setTimeout(function(){setTimeout(function(){Module["setStatus"]("")},1);doRun()},1)}else{doRun()}}Module["run"]=run;function exit(status,implicit){if(implicit&&Module["noExitRuntime"]&&status===0){return}if(Module["noExitRuntime"]);else{ABORT=true;STACKTOP=initialStackTop;exitRuntime();if(Module["onExit"])Module["onExit"](status)}Module["quit"](status,new ExitStatus(status))}function abort(what){if(Module["onAbort"]){Module["onAbort"](what)}if(what!==undefined){out(what);err(what);what=JSON.stringify(what)}else{what=""}ABORT=true;throw"abort("+what+"). Build with -s ASSERTIONS=1 for more info."}Module["abort"]=abort;if(Module["preInit"]){if(typeof Module["preInit"]=="function")Module["preInit"]=[Module["preInit"]];while(Module["preInit"].length>0){Module["preInit"].pop()()}}Module["noExitRuntime"]=true;run();Module.vireopostjs=function(){};return VireoCreateCoreModule}}();var assignCoreHelpers;(function(){assignCoreHelpers=function(Module,publicAPI){Module.coreHelpers={};publicAPI.coreHelpers={};var fpSync=function(){};var trackingFPS=false;var lastTime=0;var currentFPS=0;var CODES={NO_ERROR:0};Module.coreHelpers.jsExecutionContextFPSync=function(fpStringPointer){var fpString=Module.eggShell.dataReadString(fpStringPointer);fpSync(fpString)};publicAPI.coreHelpers.setFPSyncFunction=function(fn){if(typeof fn!=="function"){throw new Error("FPSync must be a callable function")}fpSync=fn};Module.coreHelpers.findCStringLength=function(u8Array,startIndex){var i,end=u8Array.length;for(i=startIndex;i<end;i+=1){if(u8Array[i]===0){return i-startIndex}}return-1};Module.coreHelpers.writeJSStringToStack=function(str){var strMaxStackLength=(str.length<<2)+1;var strStackPointer=Module.stackAlloc(strMaxStackLength);Module.stringToUTF8(str,strStackPointer,strMaxStackLength);return strStackPointer};Module.coreHelpers.writeJSStringToHeap=function(str){var strMaxHeapLength=(str.length<<2)+1;var strHeapPointer=Module._malloc(strMaxHeapLength);Module.stringToUTF8(str,strHeapPointer,strMaxHeapLength);return strHeapPointer};Module.coreHelpers.sizedUtf8ArrayToJSString=function(u8Array,startIndex,length){var REPLACEMENT_CODEPOINT="";var REPLACEMENT_CODEPOINT_LENGTH_2="";var REPLACEMENT_CODEPOINT_LENGTH_3="";var REPLACEMENT_CODEPOINT_LENGTH_4="";var u0,u1,u2,u3;var idx=startIndex;var endIndex=startIndex+length;endIndex=endIndex>u8Array.length?u8Array.length:endIndex;var str="";if(length<=0){return str}while(true){if(idx>=endIndex){return str}u0=u8Array[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}if((u0&224)===192){if(idx>=endIndex||(u8Array[idx]&192)!==128){str+=REPLACEMENT_CODEPOINT;continue}}else if((u0&240)===224){if(idx+1>=endIndex||(u8Array[idx]&192)!==128||(u8Array[idx+1]&192)!==128){str+=REPLACEMENT_CODEPOINT;continue}}else if((u0&248)===240){if(idx+2>=endIndex||(u8Array[idx]&192)!==128||(u8Array[idx+1]&192)!==128||(u8Array[idx+2]&192)!==128){str+=REPLACEMENT_CODEPOINT;continue}}else{str+=REPLACEMENT_CODEPOINT;continue}u1=u8Array[idx++]&63;if((u0&224)===192){u0=(u0&31)<<6|u1;if(u0<128){str+=REPLACEMENT_CODEPOINT_LENGTH_2;continue}str+=String.fromCharCode(u0);continue}u2=u8Array[idx++]&63;if((u0&240)===224){u0=(u0&15)<<12|u1<<6|u2;if(u0<2048){str+=REPLACEMENT_CODEPOINT_LENGTH_3;continue}}else{u3=u8Array[idx++]&63;u0=(u0&7)<<18|u1<<12|u2<<6|u3;if(u0<65536){str+=REPLACEMENT_CODEPOINT_LENGTH_4;continue}}if(u0<65536){str+=String.fromCharCode(u0)}else if(u0<=1114111){var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}else{str+=REPLACEMENT_CODEPOINT_LENGTH_4}}};Module.coreHelpers.jsStringToSizedUTF8Array=function(str,outU8Array,startIndex,maxBytesToWrite){if(!(maxBytesToWrite>0)){return 0}var outIdx=startIndex;var endIdx=outIdx+maxBytesToWrite;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){u=65536+((u&1023)<<10)|str.charCodeAt(++i)&1023}if(u<=127){if(outIdx>=endIdx){break}outU8Array[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx){break}outU8Array[outIdx++]=192|u>>6;outU8Array[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx){break}outU8Array[outIdx++]=224|u>>12;outU8Array[outIdx++]=128|u>>6&63;outU8Array[outIdx++]=128|u&63}else if(u<=2097151){if(outIdx+3>=endIdx){break}outU8Array[outIdx++]=240|u>>18;outU8Array[outIdx++]=128|u>>12&63;outU8Array[outIdx++]=128|u>>6&63;outU8Array[outIdx++]=128|u&63}else if(u<=67108863){if(outIdx+4>=endIdx){break}outU8Array[outIdx++]=248|u>>24;outU8Array[outIdx++]=128|u>>18&63;outU8Array[outIdx++]=128|u>>12&63;outU8Array[outIdx++]=128|u>>6&63;outU8Array[outIdx++]=128|u&63}else{if(outIdx+5>=endIdx){break}outU8Array[outIdx++]=252|u>>30;outU8Array[outIdx++]=128|u>>24&63;outU8Array[outIdx++]=128|u>>18&63;outU8Array[outIdx++]=128|u>>12&63;outU8Array[outIdx++]=128|u>>6&63;outU8Array[outIdx++]=128|u&63}}return outIdx-startIndex};Module.coreHelpers.jsCurrentBrowserFPS=function(){if(trackingFPS===false){trackingFPS=true;lastTime=performance.now();requestAnimationFrame(function vireoFPSTracker(currentTime){var timeBetweenFrames=currentTime-lastTime;currentFPS=1e3/timeBetweenFrames;lastTime=currentTime;requestAnimationFrame(vireoFPSTracker)})}return currentFPS};var writeNewError=function(newErrorStatus,newErrorCode,newErrorSource,existingErrorStatusPointer,existingErrorCodePointer,exisitingErrorSourcePointer){Module.eggShell.dataWriteBoolean(existingErrorStatusPointer,newErrorStatus);Module.eggShell.dataWriteInt32(existingErrorCodePointer,newErrorCode);Module.eggShell.dataWriteString(exisitingErrorSourcePointer,newErrorSource)};Module.coreHelpers.mergeErrors=function(newErrorStatus,newErrorCode,newErrorSource,existingErrorStatusPointer,existingErrorCodePointer,exisitingErrorSourcePointer){var existingErrorStatus=Module.eggShell.dataReadBoolean(existingErrorStatusPointer);var isExistingError=existingErrorStatus;var isNewError=newErrorStatus;if(isExistingError){return}if(isNewError){writeNewError(newErrorStatus,newErrorCode,newErrorSource,existingErrorStatusPointer,existingErrorCodePointer,exisitingErrorSourcePointer);return}var existingErrorCode=Module.eggShell.dataReadInt32(existingErrorCodePointer);var isExistingWarning=existingErrorCode!==CODES.NO_ERROR;var isNewWarning=newErrorCode!==CODES.NO_ERROR;if(isExistingWarning){return}if(isNewWarning){writeNewError(newErrorStatus,newErrorCode,newErrorSource,existingErrorStatusPointer,existingErrorCodePointer,exisitingErrorSourcePointer);return}return};Module.coreHelpers.formatMessageWithException=function(messageText,exception){if(exception!==undefined&&typeof exception.message==="string"&&exception.message.length!==0){return messageText+", Additional information: "+exception.message}return messageText};Module.coreHelpers.createSourceFromMessage=function(additionalInformation){if(typeof additionalInformation==="string"&&additionalInformation.length!==0){return"<APPEND>\n"+additionalInformation}return""}}})();var assignCoreHelpers$1=assignCoreHelpers;var assignTypeHelpers;(function(){assignTypeHelpers=function(Module){Module.typeHelpers={};var TypeRef_Name=Module.cwrap("TypeRef_Name","string",["number"]);var TypeRef_ElementName=Module.cwrap("TypeRef_ElementName","string",["number"]);var validateVisitMethod=function(fn,fnName){if(typeof fn!=="function"){throw new Error("Visitor must have a method named `"+fnName+"`. Found: "+fn)}};var dispatchVisitBoolean=function(typeVisitor,valueRef,data){var visitFn=typeVisitor.visitBoolean;validateVisitMethod(visitFn,"visitBoolean");return visitFn.call(typeVisitor,valueRef,data)};var dispatchVisitEnum=function(typeVisitor,valueRef,data){var sizeOfEnum=Module.typeHelpers.topAQSize(valueRef.typeRef);var visitFn=undefined;var fnName="";switch(sizeOfEnum){case 1:visitFn=typeVisitor.visitEnum8;fnName="visitEnum8";break;case 2:visitFn=typeVisitor.visitEnum16;fnName="visitEnum16";break;case 4:visitFn=typeVisitor.visitEnum32;fnName="visitEnum32";break;default:throw new Error("Unexpected size for Enum. Found: "+sizeOfEnum)}validateVisitMethod(visitFn,fnName);return visitFn.call(typeVisitor,valueRef,data)};var dispatchVisitInteger=function(typeVisitor,valueRef,data){var typeRef=valueRef.typeRef;var isSignedInteger=Module.typeHelpers.isSigned(typeRef);var sizeOfInteger=Module.typeHelpers.topAQSize(typeRef);var visitFn=undefined;var fnName="";if(isSignedInteger===true){switch(sizeOfInteger){case 1:visitFn=typeVisitor.visitInt8;fnName="visitInt8";break;case 2:visitFn=typeVisitor.visitInt16;fnName="visitInt16";break;case 4:visitFn=typeVisitor.visitInt32;fnName="visitInt32";break;case 8:visitFn=typeVisitor.visitInt64;fnName="visitInt64";break;default:throw new Error("Unexpected size for Integer. Found: "+sizeOfInteger)}}else{switch(sizeOfInteger){case 1:visitFn=typeVisitor.visitUInt8;fnName="visitUInt8";break;case 2:visitFn=typeVisitor.visitUInt16;fnName="visitUInt16";break;case 4:visitFn=typeVisitor.visitUInt32;fnName="visitUInt32";break;case 8:visitFn=typeVisitor.visitUInt64;fnName="visitUInt64";break;default:throw new Error("Unexpected size for Unsigned Integer. Found: "+sizeOfInteger)}}validateVisitMethod(visitFn,fnName);return visitFn.call(typeVisitor,valueRef,data)};var dispatchVisitFloat=function(typeVisitor,valueRef,data){var typeRef=valueRef.typeRef;var sizeOfFloat=Module.typeHelpers.topAQSize(typeRef);var visitFn;var fnName="";switch(sizeOfFloat){case 4:visitFn=typeVisitor.visitSingle;fnName="visitSingle";break;case 8:visitFn=typeVisitor.visitDouble;fnName="visitDouble";break;default:throw new Error("Unexpected size for a Float value. Found: "+sizeOfFloat)}validateVisitMethod(visitFn,fnName);return visitFn.call(typeVisitor,valueRef,data)};var dispatchVisitString=function(typeVisitor,valueRef,data){var visitFn=typeVisitor.visitString;validateVisitMethod(visitFn,"visitString");return visitFn.call(typeVisitor,valueRef,data)};var dispatchVisitComplex=function(typeVisitor,valueRef,data){var typeRef=valueRef.typeRef,sizeOfComplex=Module.typeHelpers.topAQSize(typeRef),visitFn,fnName;switch(sizeOfComplex){case 8:visitFn=typeVisitor.visitComplexSingle;fnName="visitComplexSingle";break;case 16:visitFn=typeVisitor.visitComplexDouble;fnName="visitComplexDouble";break;default:throw new Error("Unexpected size for a Complex value. Found: "+sizeOfComplex)}validateVisitMethod(visitFn,fnName);return visitFn.call(typeVisitor,valueRef,data)};var dispatchVisitAnalogWaveform=function(typeVisitor,valueRef,data){var visitFn=typeVisitor.visitAnalogWaveform;validateVisitMethod(visitFn,"visitAnalogWaveform");return visitFn.call(typeVisitor,valueRef,data)};var dispatchVisitTimestamp=function(typeVisitor,valueRef,data){var visitFn=typeVisitor.visitTimestamp;validateVisitMethod(visitFn,"visitTimestamp");return visitFn.call(typeVisitor,valueRef,data)};var dispatchVisitPath=function(typeVisitor,valueRef,data){var visitFn=typeVisitor.visitPath;validateVisitMethod(visitFn,"visitPath");return visitFn.call(typeVisitor,valueRef,data)};var dispatchVisitArray=function(typeVisitor,valueRef,data){var visitFn=typeVisitor.visitArray;validateVisitMethod(visitFn,"visitArray");return visitFn.call(typeVisitor,valueRef,data)};var dispatchVisitCluster=function(typeVisitor,valueRef,data){var visitFn=typeVisitor.visitCluster;validateVisitMethod(visitFn,"visitCluster");return visitFn.call(typeVisitor,valueRef,data)};Module.typeHelpers.topAQSize=function(typeRef){return Module._TypeRef_TopAQSize(typeRef)};Module.typeHelpers.typeName=function(typeRef){return TypeRef_Name(Module.eggShell.v_userShell,typeRef)};Module.typeHelpers.typeRank=function(typeRef){return Module._TypeRef_Rank(typeRef)};Module.typeHelpers.elementName=function(typeRef){return TypeRef_ElementName(Module.eggShell.v_userShell,typeRef)};Module.typeHelpers.subElementCount=function(typeRef){return Module._TypeRef_SubElementCount(typeRef)};Module.typeHelpers.subElementByIndex=function(typeRef,index){return Module._TypeRef_GetSubElementByIndex(typeRef,index)};Module.typeHelpers.isCluster=function(typeRef){return Module._TypeRef_IsCluster(typeRef)!==0};Module.typeHelpers.isArray=function(typeRef){return Module._TypeRef_IsArray(typeRef)!==0};Module.typeHelpers.isBoolean=function(typeRef){return Module._TypeRef_IsBoolean(typeRef)!==0};Module.typeHelpers.isInteger=function(typeRef){return Module._TypeRef_IsInteger(typeRef)!==0};Module.typeHelpers.isSigned=function(typeRef){return Module._TypeRef_IsSigned(typeRef)!==0};Module.typeHelpers.isEnum=function(typeRef){return Module._TypeRef_IsEnum(typeRef)!==0};Module.typeHelpers.isFloat=function(typeRef){return Module._TypeRef_IsFloat(typeRef)!==0};Module.typeHelpers.isString=function(typeRef){return Module._TypeRef_IsString(typeRef)!==0};Module.typeHelpers.isPath=function(typeRef){return Module._TypeRef_IsPath(typeRef)!==0};Module.typeHelpers.isTimestamp=function(typeRef){return Module._TypeRef_IsTimestamp(typeRef)!==0};Module.typeHelpers.isComplex=function(typeRef){return Module._TypeRef_IsComplex(typeRef)!==0};Module.typeHelpers.isAnalogWaveform=function(typeRef){return Module._TypeRef_IsAnalogWaveform(typeRef)!==0};var typeHandlers=[{typeChecker:Module.typeHelpers.isBoolean,dispatcher:dispatchVisitBoolean},{typeChecker:Module.typeHelpers.isEnum,dispatcher:dispatchVisitEnum},{typeChecker:Module.typeHelpers.isInteger,dispatcher:dispatchVisitInteger},{typeChecker:Module.typeHelpers.isFloat,dispatcher:dispatchVisitFloat},{typeChecker:Module.typeHelpers.isString,dispatcher:dispatchVisitString},{typeChecker:Module.typeHelpers.isComplex,dispatcher:dispatchVisitComplex},{typeChecker:Module.typeHelpers.isAnalogWaveform,dispatcher:dispatchVisitAnalogWaveform},{typeChecker:Module.typeHelpers.isTimestamp,dispatcher:dispatchVisitTimestamp},{typeChecker:Module.typeHelpers.isPath,dispatcher:dispatchVisitPath},{typeChecker:Module.typeHelpers.isArray,dispatcher:dispatchVisitArray},{typeChecker:Module.typeHelpers.isCluster,dispatcher:dispatchVisitCluster}];Module.typeHelpers.findTypeDispatcher=function(typeRef){var i=0,typeHandler;for(i=0;i<typeHandlers.length;i+=1){typeHandler=typeHandlers[i];if(typeHandler.typeChecker(typeRef)===true){return typeHandler.dispatcher}}return undefined}}})();var assignTypeHelpers$1=assignTypeHelpers;const encodeIdentifier=function(str){if(typeof str!=="string"||str===""){throw new Error("Identifier must be a non-empty string. Found: "+str)}let encoded="",codePoint=str.charCodeAt(0),ch=str.charAt(0);if(!(codePoint>=65&&codePoint<=90)&&!(codePoint>=97&&codePoint<=122)){encoded+="%"+codePoint.toString(16).toUpperCase()}else{encoded+=ch}for(let i=1;i<str.length;i+=1){codePoint=str.charCodeAt(i);ch=str.charAt(i);if(codePoint>=48&&codePoint<=57||codePoint>=65&&codePoint<=90||codePoint>=97&&codePoint<=122||codePoint===36||codePoint===42||codePoint===43||codePoint===45||codePoint===95||codePoint>127){encoded+=ch}else{encoded+="%"+codePoint.toString(16).toUpperCase()}}return encoded};const decodeIdentifier=function(str){if(typeof str!=="string"||str===""){throw new Error("Identifier must be a non-empty string. Found: "+str)}return decodeURIComponent(str)};var staticHelpers={encodeIdentifier:encodeIdentifier,decodeIdentifier:decodeIdentifier};var assignEggShell;(function(){assignEggShell=function(Module,publicAPI){Module.eggShell={};publicAPI.eggShell={};var NULL=0;var POINTER_SIZE=4;var DOUBLE_SIZE=8;var LENGTH_SIZE=4;var EGGSHELL_RESULT={SUCCESS:0,OBJECT_NOT_FOUND_AT_PATH:1,UNEXPECTED_OBJECT_TYPE:2,INVALID_RESULT_POINTER:3,UNABLE_TO_CREATE_RETURN_BUFFER:4,INVALID_TYPE_REF:5,MISMATCHED_ARRAY_RANK:6,UNABLE_TO_PARSE_DATA:7,UNABLE_TO_ALLOCATE_DATA:8,UNABLE_TO_DEALLOCATE_DATA:9,INVALID_DATA_POINTER:10};var eggShellResultEnum={};eggShellResultEnum[EGGSHELL_RESULT.SUCCESS]="Success";eggShellResultEnum[EGGSHELL_RESULT.OBJECT_NOT_FOUND_AT_PATH]="ObjectNotFoundAtPath";eggShellResultEnum[EGGSHELL_RESULT.UNEXPECTED_OBJECT_TYPE]="UnexpectedObjectType";eggShellResultEnum[EGGSHELL_RESULT.INVALID_RESULT_POINTER]="InvalidResultPointer";eggShellResultEnum[EGGSHELL_RESULT.UNABLE_TO_CREATE_RETURN_BUFFER]="UnableToCreateReturnBuffer";eggShellResultEnum[EGGSHELL_RESULT.INVALID_TYPE_REF]="InvalidTypeRef";eggShellResultEnum[EGGSHELL_RESULT.MISMATCHED_ARRAY_RANK]="MismatchedArrayRank";eggShellResultEnum[EGGSHELL_RESULT.UNABLE_TO_PARSE_DATA]="UnableToParseData";eggShellResultEnum[EGGSHELL_RESULT.UNABLE_TO_ALLOCATE_DATA]="UnableToAllocateData";eggShellResultEnum[EGGSHELL_RESULT.UNABLE_TO_DEALLOCATE_DATA]="UnableToDeallocateData";eggShellResultEnum[EGGSHELL_RESULT.INVALID_DATA_POINTER]="InvalidDataPointer";var niErrorEnum={0:"Success",1:"InsufficientResources",2:"ResourceNotFound",3:"ArrayRankMismatch",4:"CantDecode",5:"CantEncode",6:"LogicFailure",7:"ValueTruncated"};var Vireo_Version=Module.cwrap("Vireo_Version","number",[]);var Vireo_MaxExecWakeUpTime=Module.cwrap("Vireo_MaxExecWakeUpTime","number",[]);var EggShell_Create=Module.cwrap("EggShell_Create","number",["number"]);var EggShell_Delete=Module.cwrap("EggShell_Delete","number",["number"]);var EggShell_GetPointer=Module.cwrap("EggShell_GetPointer","number",["number","string","string","number","number"]);var EggShell_GetArrayDimLength=Module.cwrap("EggShell_GetArrayDimLength","number",["number","string","string","number"]);var Data_ValidateArrayType=Module.cwrap("Data_ValidateArrayType","number",["number","number"]);var Data_GetStringBegin=Module.cwrap("Data_GetStringBegin","number",[]);var Data_GetStringLength=Module.cwrap("Data_GetStringLength","number",[]);var Data_WriteString=Module.cwrap("Data_WriteString","void",["number","number","string","number"]);var Data_ReadBoolean=Module.cwrap("Data_ReadBoolean","number",["number"]);var Data_ReadInt8=Module.cwrap("Data_ReadInt8","number",["number"]);var Data_ReadInt16=Module.cwrap("Data_ReadInt16","number",["number"]);var Data_ReadInt32=Module.cwrap("Data_ReadInt32","number",["number"]);var Data_ReadUInt8=Module.cwrap("Data_ReadUInt8","number",["number"]);var Data_ReadUInt16=Module.cwrap("Data_ReadUInt16","number",["number"]);var Data_ReadUInt32=Module.cwrap("Data_ReadUInt32","number",["number"]);var Data_ReadSingle=Module.cwrap("Data_ReadSingle","number",["number"]);var Data_ReadDouble=Module.cwrap("Data_ReadDouble","number",["number"]);var Data_GetArrayMetadata=Module.cwrap("Data_GetArrayMetadata","number",["number","number","number","number","number"]);var Data_GetArrayDimLength=Module.cwrap("Data_GetArrayDimLength","number",["number","number","number"]);var Data_ResizeArray=Module.cwrap("Data_ResizeArray","number",["number","number","number","number"]);var Data_WriteBoolean=Module.cwrap("Data_WriteBoolean","void",["number","number"]);var Data_WriteInt8=Module.cwrap("Data_WriteInt8","void",["number","number"]);var Data_WriteInt16=Module.cwrap("Data_WriteInt16","void",["number","number"]);var Data_WriteInt32=Module.cwrap("Data_WriteInt32","void",["number","number"]);var Data_WriteUInt8=Module.cwrap("Data_WriteUInt8","void",["number","number"]);var Data_WriteUInt16=Module.cwrap("Data_WriteUInt16","void",["number","number"]);var Data_WriteUInt32=Module.cwrap("Data_WriteUInt32","void",["number","number"]);var Data_WriteSingle=Module.cwrap("Data_WriteSingle","void",["number","number"]);var Data_WriteDouble=Module.cwrap("Data_WriteDouble","void",["number","number"]);var EggShell_ExecuteSlices=Module.cwrap("EggShell_ExecuteSlices","number",["number","number","number"]);var Occurrence_Set=Module.cwrap("Occurrence_Set","void",["number"]);Module.eggShell.v_root=EggShell_Create(0);Module.eggShell.v_userShell=EggShell_Create(Module.eggShell.v_root);Module.print=function(text){console.log(text)};Module.printErr=function(text){console.error(text)};publicAPI.eggShell.setPrintFunction=function(fn){if(typeof fn!=="function"){throw new Error("Print must be a callable function")}Module.print=fn};publicAPI.eggShell.setPrintErrorFunction=function(fn){if(typeof fn!=="function"){throw new Error("PrintError must be a callable function")}Module.printErr=fn};Module.eggShell.executeSlicesWakeUpCallback=function(){};publicAPI.eggShell.setExecuteSlicesWakeUpCallback=function(fn){if(typeof fn!=="function"){throw new Error("Execute slices wake-up callback must be a callable function")}Module.eggShell.executeSlicesWakeUpCallback=fn};publicAPI.eggShell.internal_module_do_not_use_or_you_will_be_fired=Module;Module.eggShell.version=publicAPI.eggShell.version=Vireo_Version;Module.eggShell.maxExecWakeUpTime=publicAPI.eggShell.maxExecWakeUpTime=Vireo_MaxExecWakeUpTime;Module.eggShell.reboot=publicAPI.eggShell.reboot=function(){EggShell_Delete(Module.eggShell.v_userShell);EggShell_Delete(Module.eggShell.v_root);Module.eggShell.v_root=EggShell_Create(0);Module.eggShell.v_userShell=EggShell_Create(Module.eggShell.v_root)};Module.eggShell.createValueRef=function(typeRef,dataRef){return Object.freeze({typeRef:typeRef,dataRef:dataRef})};Module.eggShell.allocateData=function(typeRef){var stack=Module.stackSave();var dataStackPointer=Module.stackAlloc(POINTER_SIZE);var eggShellResult=Module._EggShell_AllocateData(Module.eggShell.v_userShell,typeRef,dataStackPointer);if(eggShellResult!==EGGSHELL_RESULT.SUCCESS){throw new Error("A new ValueRef could not be allocated for the following reason: "+eggShellResultEnum[eggShellResult]+" (error code: "+eggShellResult+")"+" (typeRef: "+typeRef+")")}var dataRef=Module.getValue(dataStackPointer,"i32");var allocatedValueRef=Module.eggShell.createValueRef(typeRef,dataRef);Module.stackRestore(stack);return allocatedValueRef};Module.eggShell.deallocateData=function(valueRef){var eggShellResult=Module._EggShell_DeallocateData(Module.eggShell.v_userShell,valueRef.typeRef,valueRef.dataRef);if(eggShellResult!==EGGSHELL_RESULT.SUCCESS){throw new Error("A ValueRef could not be deallocated for the following reason: "+eggShellResultEnum[eggShellResult]+" (error code: "+eggShellResult+")"+" (typeRef: "+valueRef.typeRef+")"+" (dataRef: "+valueRef.dataRef+")")}};Module.eggShell.findValueRef=publicAPI.eggShell.findValueRef=function(vi,path){var stack=Module.stackSave();var viStackPointer=Module.coreHelpers.writeJSStringToStack(vi);var pathStackPointer=Module.coreHelpers.writeJSStringToStack(path);var typeStackPointer=Module.stackAlloc(POINTER_SIZE);var dataStackPointer=Module.stackAlloc(POINTER_SIZE);var eggShellResult=Module._EggShell_FindValue(Module.eggShell.v_userShell,viStackPointer,pathStackPointer,typeStackPointer,dataStackPointer);if(eggShellResult!==EGGSHELL_RESULT.SUCCESS&&eggShellResult!==EGGSHELL_RESULT.OBJECT_NOT_FOUND_AT_PATH){throw new Error("A ValueRef could not be made for the following reason: "+eggShellResultEnum[eggShellResult]+" (error code: "+eggShellResult+")"+" (vi name: "+vi+")"+" (path: "+path+")")}var typeRef,dataRef,valueRef;if(eggShellResult!==EGGSHELL_RESULT.OBJECT_NOT_FOUND_AT_PATH){typeRef=Module.getValue(typeStackPointer,"i32");dataRef=Module.getValue(dataStackPointer,"i32");valueRef=Module.eggShell.createValueRef(typeRef,dataRef)}Module.stackRestore(stack);return valueRef};Module.eggShell.findSubValueRef=publicAPI.eggShell.findSubValueRef=function(valueRef,subPath){var stack=Module.stackSave();var subPathStackPointer=Module.coreHelpers.writeJSStringToStack(subPath);var typeStackPointer=Module.stackAlloc(POINTER_SIZE);var dataStackPointer=Module.stackAlloc(POINTER_SIZE);var eggShellResult=Module._EggShell_FindSubValue(Module.eggShell.v_userShell,valueRef.typeRef,valueRef.dataRef,subPathStackPointer,typeStackPointer,dataStackPointer);if(eggShellResult!==EGGSHELL_RESULT.SUCCESS&&eggShellResult!==EGGSHELL_RESULT.OBJECT_NOT_FOUND_AT_PATH){throw new Error("A ValueRef could not be made for the following reason: "+eggShellResultEnum[eggShellResult]+" (error code: "+eggShellResult+")"+" (type name: "+Module.typeHelpers.typeName(valueRef.typeRef)+")"+" (subpath: "+subPath+")")}var typeRef,dataRef,subValueRef;if(eggShellResult!==EGGSHELL_RESULT.OBJECT_NOT_FOUND_AT_PATH){typeRef=Module.getValue(typeStackPointer,"i32");dataRef=Module.getValue(dataStackPointer,"i32");subValueRef=Module.eggShell.createValueRef(typeRef,dataRef)}Module.stackRestore(stack);return subValueRef};Module.eggShell.readValueRefObject=publicAPI.eggShell.readValueRefObject=function(valueRef){var typeRef=valueRef.typeRef;var valueRefs={};if(Module.typeHelpers.isCluster(typeRef)===false){throw new Error("A ValueRefObject could not be made for the following reason: "+eggShellResultEnum[EGGSHELL_RESULT.UNEXPECTED_OBJECT_TYPE]+" (error code: "+EGGSHELL_RESULT.UNEXPECTED_OBJECT_TYPE+")"+" (type name: "+Module.typeHelpers.typeName(typeRef)+")")}var fieldCount=Module.typeHelpers.subElementCount(typeRef);var fieldTypeRef,fieldNameEncoded,fieldName;for(var i=0;i<fieldCount;i+=1){fieldTypeRef=Module.typeHelpers.subElementByIndex(typeRef,i);fieldNameEncoded=Module.typeHelpers.elementName(fieldTypeRef);fieldName=staticHelpers.decodeIdentifier(fieldNameEncoded);valueRefs[fieldName]=Module.eggShell.findSubValueRef(valueRef,fieldNameEncoded)}return valueRefs};Module.eggShell.reflectOnValueRef=publicAPI.eggShell.reflectOnValueRef=function(typeVisitor,valueRef,data){if(typeof valueRef!=="object"||valueRef===null){throw new Error("valueRef must be an object. Found: "+valueRef)}if(typeof typeVisitor!=="object"||typeVisitor===null){throw new Error("typeVisitor must be an object. Found: "+typeVisitor)}var typeRef=valueRef.typeRef,dispatchFunction=Module.typeHelpers.findTypeDispatcher(typeRef);if(dispatchFunction===undefined){throw new Error("Unexpected type. Is typeRef pointing to a valid type?. Type found: "+typeRef===0?"invalid type":Module.typeHelpers.typeName(typeRef))}return dispatchFunction(typeVisitor,valueRef,data)};Module.eggShell.readDouble=publicAPI.eggShell.readDouble=function(valueRef){var stack=Module.stackSave();var resultPointer=Module.stackAlloc(DOUBLE_SIZE);var eggShellResult=Module._EggShell_ReadDouble(Module.eggShell.v_userShell,valueRef.typeRef,valueRef.dataRef,resultPointer);if(eggShellResult!==EGGSHELL_RESULT.SUCCESS){throw new Error("Could not run readDouble for the following reason: "+eggShellResultEnum[eggShellResult]+" (error code: "+eggShellResult+")"+" (typeRef: "+valueRef.typeRef+")"+" (dataRef: "+valueRef.dataRef+")")}var result=Module.getValue(resultPointer,"double");Module.stackRestore(stack);return result};Module.eggShell.writeDouble=publicAPI.eggShell.writeDouble=function(valueRef,value){if(typeof value!=="number"){throw new Error("Expected value to write to be of type number, instead got: "+value)}var eggShellResult=Module._EggShell_WriteDouble(Module.eggShell.v_userShell,valueRef.typeRef,valueRef.dataRef,value);if(eggShellResult!==EGGSHELL_RESULT.SUCCESS){throw new Error("Could not run writeDouble for the following reason: "+eggShellResultEnum[eggShellResult]+" (error code: "+eggShellResult+")"+" (typeRef: "+valueRef.typeRef+")"+" (dataRef: "+valueRef.dataRef+")")}};Module.eggShell.readJSON=publicAPI.eggShell.readJSON=function(valueRef){var stack=Module.stackSave();var type="JSON";var jsonStackDoublePointer=Module.stackAlloc(POINTER_SIZE);var typeStackPointer=Module.coreHelpers.writeJSStringToStack(type);var eggShellError=Module._EggShell_ReadValueString(Module.eggShell.v_userShell,valueRef.typeRef,valueRef.dataRef,typeStackPointer,jsonStackDoublePointer);if(eggShellError!==0){throw new Error("Performing readJSON failed for the following reason: "+eggShellResultEnum[eggShellError]+" (error code: "+eggShellError+")"+" (typeRef: "+valueRef.typeRef+")"+" (dataRef: "+valueRef.dataRef+")")}var jsonStackPointer=Module.getValue(jsonStackDoublePointer,"i32");var responseLength=Module.coreHelpers.findCStringLength(Module.HEAPU8,jsonStackPointer);var response=Module.coreHelpers.sizedUtf8ArrayToJSString(Module.HEAPU8,jsonStackPointer,responseLength);Module.stackRestore(stack);return response};Module.eggShell.writeJSON=publicAPI.eggShell.writeJSON=function(valueRef,value){var stack=Module.stackSave();var type="JSON";var valueStackPointer=Module.coreHelpers.writeJSStringToHeap(value);var typeStackPointer=Module.coreHelpers.writeJSStringToStack(type);var eggShellError=Module._EggShell_WriteValueString(Module.eggShell.v_userShell,valueRef.typeRef,valueRef.dataRef,typeStackPointer,valueStackPointer);if(eggShellError!==0){throw new Error("Performing writeJSON failed for the following reason: "+eggShellResultEnum[eggShellError]+" (error code: "+eggShellError+")"+" (typeRef: "+valueRef.typeRef+")"+" (dataRef: "+valueRef.dataRef+")")}Module._free(valueStackPointer);Module.stackRestore(stack)};var supportedArrayTypeConfig={Int8:{heap:Module.HEAP8,constructorFunction:Int8Array},Int16:{heap:Module.HEAP16,constructorFunction:Int16Array},Int32:{heap:Module.HEAP32,constructorFunction:Int32Array},UInt8:{heap:Module.HEAPU8,constructorFunction:Uint8Array},UInt16:{heap:Module.HEAPU16,constructorFunction:Uint16Array},UInt32:{heap:Module.HEAPU32,constructorFunction:Uint32Array},Single:{heap:Module.HEAPF32,constructorFunction:Float32Array},Double:{heap:Module.HEAPF64,constructorFunction:Float64Array}};Module.eggShell.dataGetArrayBegin=function(dataRef){return Module._Data_GetArrayBegin(dataRef)};Module.eggShell.dataGetArrayLength=function(dataRef){return Module._Data_GetArrayLength(dataRef)};Module.eggShell.readString=publicAPI.eggShell.readString=function(valueRef){if(Module.typeHelpers.isString(valueRef.typeRef)===false){throw new Error("Performing readString failed for the following reason: "+eggShellResultEnum[EGGSHELL_RESULT.UNEXPECTED_OBJECT_TYPE]+" (error code: "+EGGSHELL_RESULT.UNEXPECTED_OBJECT_TYPE+")"+" (typeRef: "+valueRef.typeRef+")"+" (dataRef: "+valueRef.dataRef+")")}var arrayBegin=Module.eggShell.dataGetArrayBegin(valueRef.dataRef);var totalLength=Module.eggShell.dataGetArrayLength(valueRef.dataRef);var result=Module.coreHelpers.sizedUtf8ArrayToJSString(Module.HEAPU8,arrayBegin,totalLength);return result};Module.eggShell.writeString=publicAPI.eggShell.writeString=function(valueRef,inputString){if(Module.typeHelpers.isString(valueRef.typeRef)===false){throw new Error("Performing writeString failed for the following reason: "+eggShellResultEnum[EGGSHELL_RESULT.UNEXPECTED_OBJECT_TYPE]+" (error code: "+EGGSHELL_RESULT.UNEXPECTED_OBJECT_TYPE+")"+" (typeRef: "+valueRef.typeRef+")"+" (dataRef: "+valueRef.dataRef+")")}if(typeof inputString!=="string"){throw new Error("Expected string input to be of type string, instead got: "+inputString)}var strLength=Module.lengthBytesUTF8(inputString);Module.eggShell.resizeArray(valueRef,[strLength]);var typedArray=Module.eggShell.readTypedArray(valueRef);var bytesWritten=Module.coreHelpers.jsStringToSizedUTF8Array(inputString,typedArray,0,strLength);if(bytesWritten!==strLength){throw new Error("Could not write JS string to memory")}};var findCompatibleTypedArrayConstructor=function(typeRef){var subTypeRef,isSigned,size;if(Module.typeHelpers.isString(typeRef)){return Uint8Array}else if(Module.typeHelpers.isArray(typeRef)){subTypeRef=Module.typeHelpers.subElementByIndex(typeRef,0);if(Module.typeHelpers.isBoolean(subTypeRef)){return Uint8Array}else if(Module.typeHelpers.isInteger(subTypeRef)){isSigned=Module.typeHelpers.isSigned(subTypeRef);size=Module.typeHelpers.topAQSize(subTypeRef);if(isSigned===true){switch(size){case 1:return Int8Array;case 2:return Int16Array;case 4:return Int32Array;default:return undefined}}else{switch(size){case 1:return Uint8Array;case 2:return Uint16Array;case 4:return Uint32Array;default:return undefined}}}else if(Module.typeHelpers.isFloat(subTypeRef)){size=Module.typeHelpers.topAQSize(subTypeRef);switch(size){case 4:return Float32Array;case 8:return Float64Array;default:return undefined}}}return undefined};Module.eggShell.isTypedArrayCompatible=publicAPI.eggShell.isTypedArrayCompatible=function(valueRef){return findCompatibleTypedArrayConstructor(valueRef.typeRef)!==undefined};Module.eggShell.getArrayDimensions=publicAPI.eggShell.getArrayDimensions=function(valueRef){if(!Module.typeHelpers.isArray(valueRef.typeRef)){throw new Error("Performing getArrayDimensions failed for the following reason: "+eggShellResultEnum[EGGSHELL_RESULT.UNEXPECTED_OBJECT_TYPE]+" (error code: "+EGGSHELL_RESULT.UNEXPECTED_OBJECT_TYPE+")"+" (typeRef: "+valueRef.typeRef+")"+" (dataRef: "+valueRef.dataRef+")")}var rank=Module.typeHelpers.typeRank(valueRef.typeRef);var stack=Module.stackSave();var dimensionsPointer=Module.stackAlloc(rank*LENGTH_SIZE);Module._Data_GetArrayDimensions(valueRef.dataRef,dimensionsPointer);var dimensions=[];var i;for(i=0;i<rank;i+=1){dimensions.push(Module.getValue(dimensionsPointer+i*LENGTH_SIZE,"i32"))}Module.stackRestore(stack);return dimensions};Module.eggShell.readTypedArray=publicAPI.eggShell.readTypedArray=function(valueRef){var TypedArrayConstructor=findCompatibleTypedArrayConstructor(valueRef.typeRef);if(TypedArrayConstructor===undefined){throw new Error("Performing readTypedArray failed for the following reason: "+eggShellResultEnum[EGGSHELL_RESULT.UNEXPECTED_OBJECT_TYPE]+" (error code: "+EGGSHELL_RESULT.UNEXPECTED_OBJECT_TYPE+")"+" (typeRef: "+valueRef.typeRef+")"+" (dataRef: "+valueRef.dataRef+")")}var arrayBegin=Module.eggShell.dataGetArrayBegin(valueRef.dataRef);var totalLength=Module.eggShell.dataGetArrayLength(valueRef.dataRef);var typedArray=new TypedArrayConstructor(Module.buffer,arrayBegin,totalLength);return typedArray};var groupByDimensionLength=function(arr,startIndex,arrLength,dimensionLength){var i,retArr,currArr,currArrIndex;if(arrLength%dimensionLength!==0){throw new Error("Cannot evenly split array into groups")}retArr=[];currArr=[];currArrIndex=0;for(i=0;i<arrLength;i+=1){currArr[currArrIndex]=arr[startIndex+i];currArrIndex+=1;if(currArrIndex===dimensionLength){retArr.push(currArr);currArr=[];currArrIndex=0}}return retArr};var convertFlatArraytoNArray=function(arr,dimensionLengths){var i;var rank=dimensionLengths.length;var arrLength=1;for(i=0;i<rank;i+=1){arrLength*=dimensionLengths[i]}var currArr;if(rank===1){currArr=[];for(i=0;i<arrLength;i+=1){currArr[i]=arr[i]}return currArr}currArr=arr;var currStartIndex=0;var currArrLength=arrLength;var currDimensionLength;for(i=0;i<rank-1;i+=1){currDimensionLength=dimensionLengths[i];currArr=groupByDimensionLength(currArr,currStartIndex,currArrLength,currDimensionLength);currStartIndex=0;currArrLength=currArr.length}return currArr};var arrayTypeNameDoublePointer=Module._malloc(4);var arrayBeginPointer=Module._malloc(4);var arrayRankPointer=Module._malloc(4);var vireoObjectPointer=Module._malloc(4);var vireoTypePointer=Module._malloc(4);Module.eggShell.getNumericArray=publicAPI.eggShell.getNumericArray=function(vi,path){var eggShellResult=EggShell_GetPointer(Module.eggShell.v_userShell,vi,path,vireoObjectPointer,vireoTypePointer);if(eggShellResult!==0){throw new Error("Getting the array pointer failed for the following reason: "+eggShellResultEnum[eggShellResult]+" (error code: "+eggShellResult+")"+" (vi name: "+vi+")"+" (path: "+path+")")}var arrayVireoPointer=Module.getValue(vireoObjectPointer,"i32");var typePointer=Module.getValue(vireoTypePointer,"i32");eggShellResult=Data_ValidateArrayType(Module.eggShell.v_userShell,typePointer);if(eggShellResult!==0){throw new Error("Getting the array pointer failed for the following reason: "+eggShellResultEnum[eggShellResult]+" (error code: "+eggShellResult+")"+" (vi name: "+vi+")"+" (path: "+path+")")}var arrayInfo=Module.eggShell.dataReadNumericArrayAsTypedArray(arrayVireoPointer);var actualArray;if(arrayInfo.array===undefined||arrayInfo.array.length===0){actualArray=[];for(var i=0;i<arrayInfo.dimensionLengths.length-1;i+=1){actualArray=[actualArray]}return actualArray}actualArray=arrayInfo.array;return convertFlatArraytoNArray(actualArray,arrayInfo.dimensionLengths)};Module.eggShell.getArrayDimLength=publicAPI.eggShell.getArrayDimLength=function(vi,path,dim){return EggShell_GetArrayDimLength(Module.eggShell.v_userShell,vi,path,dim)};Module.eggShell.resizeArray=publicAPI.eggShell.resizeArray=function(valueRef,newDimensions){if(!Array.isArray(newDimensions)){throw new Error("Expected newDimensions to be an array of dimension lengths, instead got: "+newDimensions)}var stack=Module.stackSave();var newDimensionsLength=newDimensions.length;var dimensionsPointer=Module.stackAlloc(newDimensionsLength*LENGTH_SIZE);var i,currentDimension;for(i=0;i<newDimensionsLength;i+=1){currentDimension=newDimensions[i];if(typeof currentDimension!=="number"){throw new Error("Expected all dimensions of newDimensions to be numeric values for dimension length, instead got"+currentDimension)}Module.setValue(dimensionsPointer+i*LENGTH_SIZE,currentDimension,"i32")}var eggShellResult=Module._EggShell_ResizeArray(Module.eggShell.v_userShell,valueRef.typeRef,valueRef.dataRef,newDimensionsLength,dimensionsPointer);if(eggShellResult!==EGGSHELL_RESULT.SUCCESS){throw new Error("Resizing the array failed for the following reason: "+eggShellResultEnum[eggShellResult]+" (error code: "+eggShellResult+")"+" (typeRef: "+valueRef.typeRef+")"+" (dataRef: "+valueRef.dataRef+")")}Module.stackRestore(stack)};Module.eggShell.dataReadString=function(stringPointer){var begin=Data_GetStringBegin(stringPointer);var length=Data_GetStringLength(stringPointer);var str=Module.coreHelpers.sizedUtf8ArrayToJSString(Module.HEAPU8,begin,length);return str};Module.eggShell.dataReadStringAsArray_NoCopy=function(stringPointer){var begin=Data_GetStringBegin(stringPointer);var length=Data_GetStringLength(stringPointer);return Module.HEAPU8.subarray(begin,begin+length)};Module.eggShell.dataWriteString=function(destination,source){var sourceLength=Module.lengthBytesUTF8(source);Data_WriteString(Module.eggShell.v_userShell,destination,source,sourceLength)};Module.eggShell.dataWriteStringFromArray=function(destination,source){var sourceHeapPointer=Module._malloc(source.length);Module.writeArrayToMemory(source,sourceHeapPointer);Module._Data_WriteString(Module.eggShell.v_userShell,destination,sourceHeapPointer,source.length);Module._free(sourceHeapPointer)};Module.eggShell.dataReadBoolean=function(booleanPointer){var numericValue=Data_ReadBoolean(booleanPointer);return numericValue!==0};Module.eggShell.dataReadInt8=function(intPointer){var numericValue=Data_ReadInt8(intPointer);return numericValue};Module.eggShell.dataReadInt16=function(intPointer){var numericValue=Data_ReadInt16(intPointer);return numericValue};Module.eggShell.dataReadInt32=function(intPointer){var numericValue=Data_ReadInt32(intPointer);return numericValue};Module.eggShell.dataReadUInt8=function(intPointer){var numericValue=Data_ReadUInt8(intPointer);return numericValue};Module.eggShell.dataReadUInt16=function(intPointer){var numericValue=Data_ReadUInt16(intPointer);return numericValue};Module.eggShell.dataReadUInt32=function(intPointer){var numericValue=Data_ReadUInt32(intPointer);return numericValue};Module.eggShell.dataReadSingle=function(singlePointer){var numericValue=Data_ReadSingle(singlePointer);return numericValue};Module.eggShell.dataReadDouble=function(doublePointer){var numericValue=Data_ReadDouble(doublePointer);return numericValue};Module.eggShell.dataReadTypedArray=function(arrayPointer){return Module.eggShell.dataReadNumericArrayAsTypedArray(arrayPointer).array};Module.eggShell.dataReadNumericArrayAsTypedArray=function(arrayPointer){var eggShellResult=Data_GetArrayMetadata(Module.eggShell.v_userShell,arrayPointer,arrayTypeNameDoublePointer,arrayRankPointer,arrayBeginPointer);if(eggShellResult!==0){throw new Error("Querying Array Metadata failed for the following reason: "+eggShellResultEnum[eggShellResult]+" (error code: "+eggShellResult+")")}var arrayTypeNamePointer=Module.getValue(arrayTypeNameDoublePointer,"i32");var arrayTypeName=Module.Pointer_stringify(arrayTypeNamePointer);var arrayTypeConfig=supportedArrayTypeConfig[arrayTypeName];if(arrayTypeConfig===undefined){throw new Error("Unsupported type: "+arrayTypeName+", the following types are supported: "+Object.keys(supportedArrayTypeConfig).join(","))}var heap=supportedArrayTypeConfig[arrayTypeName].heap;var arrayRank=Module.getValue(arrayRankPointer,"i32");var arrayBeginBytes=Module.getValue(arrayBeginPointer,"i32");var dimensionLengths;if(arrayBeginBytes===NULL){dimensionLengths=[];for(var i=0;i<arrayRank;i+=1){dimensionLengths[i]=0}return{array:[],dimensionLengths:dimensionLengths}}var arrayBegin=arrayBeginBytes/heap.BYTES_PER_ELEMENT;var arrayLength=1;dimensionLengths=[];for(var j=0;j<arrayRank;j+=1){dimensionLengths[j]=Data_GetArrayDimLength(Module.eggShell.v_userShell,arrayPointer,j);arrayLength*=dimensionLengths[j]}var TypedArrayConstructor=supportedArrayTypeConfig[arrayTypeName].constructorFunction;var typedArray=new TypedArrayConstructor(heap.subarray(arrayBegin,arrayBegin+arrayLength));return{array:typedArray,dimensionLengths:dimensionLengths}};Module.eggShell.dataWriteBoolean=function(booleanPointer,booleanValue){var numericValue=booleanValue?1:0;Data_WriteBoolean(booleanPointer,numericValue)};Module.eggShell.dataWriteInt8=function(destination,value){Data_WriteInt8(destination,value)};Module.eggShell.dataWriteInt16=function(destination,value){Data_WriteInt16(destination,value)};Module.eggShell.dataWriteInt32=function(destination,value){Data_WriteInt32(destination,value)};Module.eggShell.dataWriteUInt8=function(destination,value){Data_WriteUInt8(destination,value)};Module.eggShell.dataWriteUInt16=function(destination,value){Data_WriteUInt16(destination,value)};Module.eggShell.dataWriteUInt32=function(destination,value){Data_WriteUInt32(destination,value)};Module.eggShell.dataWriteSingle=function(destination,value){Data_WriteSingle(destination,value)};Module.eggShell.dataWriteDouble=function(destination,value){Data_WriteDouble(destination,value)};Module.eggShell.dataWriteTypedArray=function(destination,value){var int32Byte=4;var rank=1;var newLengths=Module._malloc(rank*int32Byte);Module.setValue(newLengths,value.length,"i32");Data_ResizeArray(Module.eggShell.v_userShell,destination,rank,newLengths);Module._free(newLengths);var eggShellResult=Data_GetArrayMetadata(Module.eggShell.v_userShell,destination,arrayTypeNameDoublePointer,arrayRankPointer,arrayBeginPointer);if(eggShellResult!==0){throw new Error("Querying Array Metadata failed for the following reason: "+eggShellResultEnum[eggShellResult]+" (error code: "+eggShellResult+")")}var arrayTypeNamePointer=Module.getValue(arrayTypeNameDoublePointer,"i32");var arrayTypeName=Module.Pointer_stringify(arrayTypeNamePointer);var heap=supportedArrayTypeConfig[arrayTypeName].heap;var arrayBegin=Module.getValue(arrayBeginPointer,"i32")/heap.BYTES_PER_ELEMENT;var returnArray=heap.subarray(arrayBegin,arrayBegin+value.length);returnArray.set(value)};Module.eggShell.loadVia=publicAPI.eggShell.loadVia=function(viaText){if(typeof viaText!=="string"){throw new Error("Expected viaText to be a string")}if(viaText.length===0){throw new Error("Empty viaText provided, nothing to run")}var viaTextLength=Module.lengthBytesUTF8(viaText);var viaTextPointer=Module.coreHelpers.writeJSStringToHeap(viaText);var printText="",printTextErr="";var origPrint=Module.print,origPrintErr=Module.printErr;Module.print=function(text){printText+=text+"\n";origPrint(text)};Module.printErr=function(textErr){printTextErr+=textErr+"\n";origPrintErr(textErr)};var result=Module._EggShell_REPL(Module.eggShell.v_userShell,viaTextPointer,viaTextLength);Module._free(viaTextPointer);Module.print=origPrint;Module.printErr=origPrintErr;if(result!==0){throw new Error("Loading VIA failed for the following reason: "+niErrorEnum[result]+" (error code: "+result+")"+" (stdout: "+printText+")"+" (stderr: "+printTextErr+")")}};Module.eggShell.executeSlicesUntilWait=publicAPI.eggShell.executeSlicesUntilWait=function(numSlices,millisecondsToRun){return EggShell_ExecuteSlices(Module.eggShell.v_userShell,numSlices,millisecondsToRun)};Module.eggShell.executeSlicesUntilClumpsFinished=publicAPI.eggShell.executeSlicesUntilClumpsFinished=function(originalCallback){if(originalCallback!==undefined){throw new Error("The executeSlicesUntilClumpsFinished function no longer takes a callback and instead returns a Promise")}var SLICE_SETS_PER_TIME_CHECK=1e4;var MAXIMUM_VIREO_EXECUTION_TIME_MS=4;var origExecuteSlicesWakeUpCallback=Module.eggShell.executeSlicesWakeUpCallback;var vireoResolve,vireoReject;var executionFinishedPromise=new Promise(function(resolve,reject){var cleanup=function(){Module.eggShell.executeSlicesWakeUpCallback=origExecuteSlicesWakeUpCallback};vireoResolve=function(){cleanup();resolve.apply(undefined,arguments)};vireoReject=function(){cleanup();reject.apply(undefined,arguments)}});var timerToken;var runExecuteSlicesAsync=function(){var execSlicesResult;try{execSlicesResult=Module.eggShell.executeSlicesUntilWait(SLICE_SETS_PER_TIME_CHECK,MAXIMUM_VIREO_EXECUTION_TIME_MS)}catch(ex){timerToken=undefined;setTimeout(vireoReject,0,ex);return}if(execSlicesResult>0){timerToken=setTimeout(runExecuteSlicesAsync,execSlicesResult)}else if(execSlicesResult<0){timerToken=setTimeout(runExecuteSlicesAsync,0)}else{timerToken=undefined;setTimeout(vireoResolve,0)}};Module.eggShell.executeSlicesWakeUpCallback=function(){origExecuteSlicesWakeUpCallback();if(timerToken===undefined){console.error("Attempted to wake up Vireo runtime but Vireo is not waiting")}else{clearTimeout(timerToken);timerToken=undefined;runExecuteSlicesAsync()}};Promise.resolve().then(function(){runExecuteSlicesAsync()});return executionFinishedPromise};Module.eggShell.setOccurrenceAsync=function(occurrence){setTimeout(function(){Occurrence_Set(occurrence);Module.eggShell.executeSlicesWakeUpCallback.call(undefined)},0)};Module.eggShell.setOccurrence=Occurrence_Set}})();var assignEggShell$1=assignEggShell;var assignHttpClient;(function(){var TRUE=1;var FALSE=0;var NULL=0;var DEFAULT_INVALID_HANDLE=0;var ERRORS={NO_ERROR:{CODE:0,MESSAGE:""},InvalidRefnum:{CODE:-1967362020,MESSAGE:"The provided refnum is invalid."},mgArgErr:{CODE:1,MESSAGE:"An input parameter is invalid. For example if the input is a path, the path might contain a character not allowed by the OS such as ? or @."},ncTimeOutErr:{CODE:56,MESSAGE:"The network operation exceeded the user-specified or system time limit."},kNIHttpResultCouldNotConnect:{CODE:363500,MESSAGE:"Failed to connect to the specified hostname.  Be sure the specified hostname is correct, the server is running and configured to accept remote requests."},kNIHttpResultAbortedByCallback:{CODE:363508,MESSAGE:"The request was aborted by the caller."},kNIHttpResultRequestHeaderDoesNotExist:{CODE:363528,MESSAGE:"The specified request header does not exist."},kNIHttpWebVINetworkError:{CODE:363650,MESSAGE:"A network error has occurred. Possible reasons for this error include Cross-Origin Resource Sharing (CORS) configuration issues between the client and the target server or that the client cannot reach the target server. Due to browser security restrictions, detailed information about the cause of the network error cannot be provided. You may find specific details about the cause of the network error in the browser development tools console or in the LabVIEW output window."},kNIHttpWebVIHeaderInvalid:{CODE:363651,MESSAGE:"Setting a header or header value resulted in an error, possibly due to an invalid character in a header or header value. Verify that each header and header value contains only valid characters."},kNIHttpWebVICookieFileUnsupported:{CODE:363652,MESSAGE:"This target does not support modification of the cookie file input. The browser manages saving cookies from an HTTP response and including cookies in HTTP requests on behalf of the user. The HTTP Client VIs cannot manipulate cookies directly. Set the cookie file input as either Not a path or an empty path for this target."},kNIHttpWebVIVerifyServerUnsupported:{CODE:363653,MESSAGE:"This target does not support modification of the verify server input. The browser manages settings related to validation of a server's identity and establishing secure connections. Set the verify server input to True for this target."},kNIHttpWebVIOutputFileUnsupported:{CODE:363654,MESSAGE:"This target does not support usage of an output file. Set output file as either Not a path or an empty path for this target."},kNIHttpCORSNotRequired:{CODE:363655,MESSAGE:"This target is not subject to Cross-Origin Resource Sharing (CORS) restrictions and cannot perform CORS configuration. Do not attempt to perform CORS configuration on this target."},kNIHttpWebVIProxyConfigUnsupported:{CODE:363656,MESSAGE:"This target does not support proxy server configuration using the HTTP Client VIs. The host browser or environment must be configured directly to change proxy server settings. Do not attempt to perform proxy server configuration on this target."},kNIHttpWebVISSLConfigUnsupported:{CODE:363657,MESSAGE:"This target does not support SSL configuration using the HTTP Client VIs. The host browser or environment must be configured directly to change SSL settings. Do not attempt to perform SSL configuration on this target."},kNIHttpResultInternalUndefinedError:{CODE:363798,MESSAGE:"The HTTP client produced an unknown error."}};var DEFAULT_TIMEOUT_MS=1e4;var TIMEOUT_IMMEDIATELY_MS=1;var RunningRequestsTracker;(function(){RunningRequestsTracker=function(){this._runningRequests=[]};var child=RunningRequestsTracker;var proto=child.prototype;proto.addRequest=function(request){this._runningRequests.push(request)};proto.removeRequest=function(request){var index=this._runningRequests.indexOf(request);if(index>-1){this._runningRequests.splice(index,1)}};proto.abortAllRunningRequests=function(){var runningRequestsCopy=this._runningRequests.slice();runningRequestsCopy.forEach(function(request){request.abort()})}})();var HttpClient;(function(){HttpClient=function(username,password,requestTracker,xmlHttpRequestImplementation){this._username=username;this._password=password;this._headers=new Map;this._includeCredentialsDuringCORS=false;this._requestTracker=requestTracker;this._xmlHttpRequestImplementation=xmlHttpRequestImplementation};var child=HttpClient;var proto=child.prototype;proto.addHeader=function(header,value){this._headers.set(header,value)};proto.removeHeader=function(header){this._headers.delete(header)};proto.getHeaderValue=function(header){var ret;if(this._headers.has(header)){ret=this._headers.get(header).trim()}return ret};proto.listHeaders=function(){var outputHeaders=[];this._headers.forEach(function(value,header){outputHeaders.push(header.trim()+": "+value.trim())});return outputHeaders.join("\r\n")};proto.createRequest=function(requestData,cb){var that=this;var XMLHttpRequestImplementation=that._xmlHttpRequestImplementation;var errorMessage;var request=new XMLHttpRequestImplementation;that._requestTracker.addRequest(request);var eventListeners={};var requestCompleted=false;var completeRequest=function(responseData){if(requestCompleted===true){return}requestCompleted=true;Object.keys(eventListeners).forEach(function(eventName){request.removeEventListener(eventName,eventListeners[eventName])});that._requestTracker.removeRequest(request);cb(responseData)};eventListeners.load=function(){if(request.status===0){completeRequest({header:"",body:[],status:0,labviewCode:ERRORS.kNIHttpResultInternalUndefinedError.CODE,errorMessage:ERRORS.kNIHttpResultInternalUndefinedError.MESSAGE,requestException:undefined});return}var httpVersion="HTTP/1.1";var statusLine=httpVersion+" "+request.status+" "+request.statusText+"\r\n";var allResponseHeaders=request.getAllResponseHeaders();var header=statusLine+allResponseHeaders;var body=new Uint8Array(request.response);completeRequest({header:header,body:body,status:request.status,labviewCode:ERRORS.NO_ERROR.CODE,errorMessage:ERRORS.NO_ERROR.MESSAGE,requestException:undefined})};eventListeners.error=function(){completeRequest({header:"",body:[],status:0,labviewCode:ERRORS.kNIHttpWebVINetworkError.CODE,errorMessage:ERRORS.kNIHttpWebVINetworkError.MESSAGE,requestException:undefined})};eventListeners.timeout=function(){completeRequest({header:"",body:[],status:0,labviewCode:ERRORS.ncTimeOutErr.CODE,errorMessage:ERRORS.ncTimeOutErr.MESSAGE,requestException:undefined})};eventListeners.abort=function(){completeRequest({header:"",body:[],status:0,labviewCode:ERRORS.kNIHttpResultAbortedByCallback.CODE,errorMessage:ERRORS.kNIHttpResultAbortedByCallback.MESSAGE,requestException:undefined})};Object.keys(eventListeners).forEach(function(eventName){request.addEventListener(eventName,eventListeners[eventName])});try{request.open(requestData.method,requestData.url,true,that._username,that._password)}catch(ex){completeRequest({header:"",body:[],status:0,labviewCode:ERRORS.kNIHttpResultCouldNotConnect.CODE,errorMessage:ERRORS.kNIHttpResultCouldNotConnect.MESSAGE,requestException:ex});return}var currentHeaderName,currentHeaderValue;var hasContentType=false;try{that._headers.forEach(function(value,header){currentHeaderName=header;currentHeaderValue=value;request.setRequestHeader(header,value);if(header.toLowerCase()==="content-type"){hasContentType=true}})}catch(ex){errorMessage=ERRORS.kNIHttpWebVIHeaderInvalid.MESSAGE+"\nheader:"+currentHeaderName+"\nvalue:"+currentHeaderValue;completeRequest({header:"",body:[],status:0,labviewCode:ERRORS.kNIHttpWebVIHeaderInvalid.CODE,errorMessage:errorMessage,requestException:ex});return}if(hasContentType===false&&requestData.buffer!==undefined){request.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}request.withCredentials=that._includeCredentialsDuringCORS;request.responseType="arraybuffer";request.timeout=requestData.xhrTimeout;try{if(requestData.buffer===undefined){request.send()}else{request.send(requestData.buffer)}}catch(ex){completeRequest({header:"",body:[],status:0,labviewCode:ERRORS.kNIHttpWebVINetworkError.CODE,errorMessage:ERRORS.kNIHttpWebVINetworkError.MESSAGE,requestException:ex});return}};proto.setIncludeCredentialsDuringCORS=function(includeCredentialsDuringCORS){this._includeCredentialsDuringCORS=includeCredentialsDuringCORS}})();var HttpClientManager;(function(){HttpClientManager=function(){this._httpClients=new Map;this._runningRequestsTracker=new RunningRequestsTracker;if(typeof XMLHttpRequest==="undefined"){this._xmlHttpRequestImplementation=function(){throw new Error("Vireo could not find a global implementation of XMLHttpRequest Level 2. Please provide one to vireo.httpClient.setXMLHttpRequestImplementation to use the Vireo HTTP Client")}}else{this._xmlHttpRequestImplementation=XMLHttpRequest}};var child=HttpClientManager;var proto=child.prototype;var createHandle=function(){var currentHandle=1;return function(){var handle=currentHandle;currentHandle+=1;return handle}}();proto.create=function(username,password){var httpClient=new HttpClient(username,password,this._runningRequestsTracker,this._xmlHttpRequestImplementation);var handle=createHandle();this._httpClients.set(handle,httpClient);return handle};proto.createHttpClientWithoutHandle=function(username,password){var httpClient=new HttpClient(username,password,this._runningRequestsTracker,this._xmlHttpRequestImplementation);return httpClient};proto.destroy=function(handle){var httpClient=this._httpClients.get(handle);if(httpClient===undefined){return}this._httpClients.delete(handle)};proto.get=function(handle){return this._httpClients.get(handle)};proto.abortAllRunningRequests=function(){this._runningRequestsTracker.abortAllRunningRequests()};proto.setXMLHttpRequestImplementation=function(fn){if(typeof fn!=="function"){throw new Error("A valid function must be provided")}this._xmlHttpRequestImplementation=fn}})();assignHttpClient=function(Module,publicAPI){Module.httpClient={};publicAPI.httpClient={};var httpClientManager=new HttpClientManager;var METHOD_NAMES=["GET","HEAD","PUT","POST","DELETE"];var findhttpClientOrWriteError=function(handle,errorStatusPointer,errorCodePointer,errorSourcePointer){var httpClient=httpClientManager.get(handle);var newErrorSource;if(httpClient===undefined){newErrorSource=Module.coreHelpers.createSourceFromMessage(ERRORS.mgArgErr.MESSAGE);Module.coreHelpers.mergeErrors(true,ERRORS.mgArgErr.CODE,newErrorSource,errorStatusPointer,errorCodePointer,errorSourcePointer)}return httpClient};publicAPI.httpClient.abortAllRunningRequests=function(){httpClientManager.abortAllRunningRequests()};publicAPI.httpClient.setXMLHttpRequestImplementation=function(fn){httpClientManager.setXMLHttpRequestImplementation(fn)};Module.httpClient.jsHttpClientOpen=function(cookieFilePointer,usernamePointer,passwordPointer,verifyServerInt32,handlePointer,errorStatusPointer,errorCodePointer,errorSourcePointer){var setDefaultOutputs=function(){Module.eggShell.dataWriteUInt32(handlePointer,DEFAULT_INVALID_HANDLE)};var newErrorSource;var cookieFile=Module.eggShell.dataReadString(cookieFilePointer);if(cookieFile!==""){newErrorSource=Module.coreHelpers.createSourceFromMessage(ERRORS.kNIHttpWebVICookieFileUnsupported.MESSAGE);Module.coreHelpers.mergeErrors(true,ERRORS.kNIHttpWebVICookieFileUnsupported.CODE,newErrorSource,errorStatusPointer,errorCodePointer,errorSourcePointer);setDefaultOutputs();return}var verifyServer=verifyServerInt32!==FALSE;if(verifyServer!==true){newErrorSource=Module.coreHelpers.createSourceFromMessage(ERRORS.kNIHttpWebVIVerifyServerUnsupported.MESSAGE);Module.coreHelpers.mergeErrors(true,ERRORS.kNIHttpWebVIVerifyServerUnsupported.CODE,newErrorSource,errorStatusPointer,errorCodePointer,errorSourcePointer);setDefaultOutputs();return}var username=Module.eggShell.dataReadString(usernamePointer);var password=Module.eggShell.dataReadString(passwordPointer);var newHandle=httpClientManager.create(username,password);Module.eggShell.dataWriteUInt32(handlePointer,newHandle)};Module.httpClient.jsHttpClientClose=function(handle,errorStatusPointer,errorCodePointer,errorSourcePointer){var newErrorSource;var handleExists=httpClientManager.get(handle)!==undefined;if(handleExists===false){newErrorSource=Module.coreHelpers.createSourceFromMessage(ERRORS.InvalidRefnum.MESSAGE);Module.coreHelpers.mergeErrors(true,ERRORS.InvalidRefnum.CODE,newErrorSource,errorStatusPointer,errorCodePointer,errorSourcePointer)}httpClientManager.destroy(handle)};Module.httpClient.jsHttpClientAddHeader=function(handle,headerPointer,valuePointer,errorStatusPointer,errorCodePointer,errorSourcePointer){var httpClient=findhttpClientOrWriteError(handle,errorStatusPointer,errorCodePointer,errorSourcePointer);if(httpClient===undefined){return}var header=Module.eggShell.dataReadString(headerPointer);var value=Module.eggShell.dataReadString(valuePointer);httpClient.addHeader(header,value)};Module.httpClient.jsHttpClientRemoveHeader=function(handle,headerPointer,errorStatusPointer,errorCodePointer,errorSourcePointer){var httpClient=findhttpClientOrWriteError(handle,errorStatusPointer,errorCodePointer,errorSourcePointer);if(httpClient===undefined){return}var header=Module.eggShell.dataReadString(headerPointer);httpClient.removeHeader(header)};Module.httpClient.jsHttpClientGetHeader=function(handle,headerPointer,valuePointer,errorStatusPointer,errorCodePointer,errorSourcePointer){var setDefaultOutputs=function(){Module.eggShell.dataWriteString(valuePointer,"")};var httpClient=findhttpClientOrWriteError(handle,errorStatusPointer,errorCodePointer,errorSourcePointer);if(httpClient===undefined){setDefaultOutputs();return}var newErrorSource;var header=Module.eggShell.dataReadString(headerPointer);var value=httpClient.getHeaderValue(header);if(value===undefined){newErrorSource=Module.coreHelpers.createSourceFromMessage(ERRORS.kNIHttpResultRequestHeaderDoesNotExist.MESSAGE+"\nheader:"+header);Module.coreHelpers.mergeErrors(true,ERRORS.kNIHttpResultRequestHeaderDoesNotExist.CODE,newErrorSource,errorStatusPointer,errorCodePointer,errorSourcePointer);setDefaultOutputs();return}Module.eggShell.dataWriteString(valuePointer,value)};Module.httpClient.jsHttpClientHeaderExists=function(handle,headerPointer,headerExistsPointer,valuePointer,errorStatusPointer,errorCodePointer,errorSourcePointer){var setDefaultOutputs=function(){Module.eggShell.dataWriteUInt32(headerExistsPointer,FALSE);Module.eggShell.dataWriteString(valuePointer,"")};var httpClient=findhttpClientOrWriteError(handle,errorStatusPointer,errorCodePointer,errorSourcePointer);if(httpClient===undefined){setDefaultOutputs();return}var header=Module.eggShell.dataReadString(headerPointer);var valueOrUndefined=httpClient.getHeaderValue(header);var headerExists=valueOrUndefined!==undefined;if(headerExists===false){setDefaultOutputs();return}Module.eggShell.dataWriteUInt32(headerExistsPointer,TRUE);Module.eggShell.dataWriteString(valuePointer,valueOrUndefined)};Module.httpClient.jsHttpClientListHeaders=function(handle,listPointer,errorStatusPointer,errorCodePointer,errorSourcePointer){var setDefaultOutputs=function(){Module.eggShell.dataWriteString(listPointer,"")};var httpClient=findhttpClientOrWriteError(handle,errorStatusPointer,errorCodePointer,errorSourcePointer);if(httpClient===undefined){setDefaultOutputs();return}var list=httpClient.listHeaders();Module.eggShell.dataWriteString(listPointer,list)};Module.httpClient.jsHttpClientMethod=function(methodId,handle,urlPointer,outputFilePointer,bufferTypeRef,bufferDataRef,timeoutPointer,headersPointer,bodyPointer,statusCodePointer,errorStatusPointer,errorCodePointer,errorSourcePointer,occurrencePointer){var setDefaultOutputs=function(){Module.eggShell.dataWriteString(headersPointer,"");Module.eggShell.dataWriteUInt32(statusCodePointer,0);if(bodyPointer!==NULL){Module.eggShell.dataWriteString(bodyPointer,"")}Module.eggShell.setOccurrenceAsync(occurrencePointer)};var newErrorSource,errorMessage;var method=METHOD_NAMES[methodId];var outputFile;if(outputFilePointer!==NULL){outputFile=Module.eggShell.dataReadString(outputFilePointer);if(outputFile!==""){newErrorSource=Module.coreHelpers.createSourceFromMessage(ERRORS.kNIHttpWebVIOutputFileUnsupported.MESSAGE);Module.coreHelpers.mergeErrors(true,ERRORS.kNIHttpWebVIOutputFileUnsupported.CODE,newErrorSource,errorStatusPointer,errorCodePointer,errorSourcePointer);setDefaultOutputs();return}}var valueRef,buffer,typedArrayBuffer;if(bufferDataRef!==NULL){valueRef=Module.eggShell.createValueRef(bufferTypeRef,bufferDataRef);typedArrayBuffer=Module.eggShell.readTypedArray(valueRef);if(typeof Blob==="undefined"){buffer=typedArrayBuffer}else{buffer=new Blob([typedArrayBuffer])}}var httpClient;if(handle===NULL){httpClient=httpClientManager.createHttpClientWithoutHandle("","")}else{httpClient=findhttpClientOrWriteError(handle,errorStatusPointer,errorCodePointer,errorSourcePointer);if(httpClient===undefined){setDefaultOutputs();return}}var xhrTimeout;var timeout;if(timeoutPointer===NULL){xhrTimeout=DEFAULT_TIMEOUT_MS}else{timeout=Module.eggShell.dataReadInt32(timeoutPointer);if(timeout<0){xhrTimeout=0}else if(timeout===0){xhrTimeout=TIMEOUT_IMMEDIATELY_MS}else{xhrTimeout=timeout}}var url=Module.eggShell.dataReadString(urlPointer);var requestData={method:method,url:url,xhrTimeout:xhrTimeout,buffer:buffer};httpClient.createRequest(requestData,function(responseData){Module.eggShell.dataWriteString(headersPointer,responseData.header);Module.eggShell.dataWriteUInt32(statusCodePointer,responseData.status);if(bodyPointer!==NULL){Module.eggShell.dataWriteStringFromArray(bodyPointer,responseData.body)}var newErrorStatus=responseData.labviewCode!==ERRORS.NO_ERROR.CODE;var newErrorCode=responseData.labviewCode;errorMessage=Module.coreHelpers.formatMessageWithException(responseData.errorMessage,responseData.requestException);var newErrorSource=Module.coreHelpers.createSourceFromMessage(errorMessage);Module.coreHelpers.mergeErrors(newErrorStatus,newErrorCode,newErrorSource,errorStatusPointer,errorCodePointer,errorSourcePointer);Module.eggShell.setOccurrenceAsync(occurrencePointer)})};Module.httpClient.jsHttpClientConfigCORS=function(handle,includeCredentialsDuringCORS,errorStatusPointer,errorCodePointer,errorSourcePointer){var httpClient=findhttpClientOrWriteError(handle,errorStatusPointer,errorCodePointer,errorSourcePointer);if(httpClient===undefined){return}httpClient.setIncludeCredentialsDuringCORS(includeCredentialsDuringCORS!==FALSE)}}})();var assignHttpClient$1=assignHttpClient;var assignJavaScriptInvoke;(function(){var ERRORS={NO_ERROR:{CODE:0,MESSAGE:""},kNIUnableToInvokeAJavaScriptFunction:{CODE:44300,MESSAGE:"An exception occurred within the external JavaScript function called by a JavaScript Library Interface node. Verify your JavaScript code is valid."},kNIUnsupportedParameterTypeInJavaScriptInvoke:{CODE:44301,MESSAGE:"JavaScript function contains a parameter of an unsupported data type. Convert unsupported JavaScript types to types supported by the JavaScript Library Interface."},kNIUnableToFindFunctionForJavaScriptInvoke:{CODE:44302,MESSAGE:"Function not found. Verify the function name in the external JavaScript file matches the function name in the JavaScript Library Interface."},kNIUnableToSetReturnValueInJavaScriptInvoke:{CODE:44303,MESSAGE:"Unable to set return value for JavaScript Library Interface node parameter."},kNIUnsupportedLabVIEWReturnTypeInJavaScriptInvoke:{CODE:44305,MESSAGE:"Unsupported return type for JavaScript Library Interface node parameter."},kNITypeMismatchForReturnTypeInJavaScriptInvoke:{CODE:44306,MESSAGE:"Return type mismatch. Verify the return type in the JavaScript Library Interface matches the return type in the external JavaScript function."}};assignJavaScriptInvoke=function(Module,publicAPI){Module.javaScriptInvoke={};publicAPI.javaScriptInvoke={};var internalFunctionsMap=new Map;var JavaScriptInvoke_GetParameterType=Module.cwrap("JavaScriptInvoke_GetParameterType","number",["number","number"]);var JavaScriptInvoke_GetParameterPointer=Module.cwrap("JavaScriptInvoke_GetParameterPointer","number",["number","number"]);var JavaScriptInvoke_GetArrayElementType=Module.cwrap("JavaScriptInvoke_GetArrayElementType","number",["number"]);var Data_ReadJavaScriptRefNum=Module.cwrap("Data_ReadJavaScriptRefNum","number",["number"]);var Data_WriteJavaScriptRefNum=Module.cwrap("Data_WriteJavaScriptRefNum","void",["number","number"]);var getParameterTypeString=function(parametersPointer,index){var typeNamePointer=JavaScriptInvoke_GetParameterType(parametersPointer,index);var responseLength=Module.coreHelpers.findCStringLength(Module.HEAPU8,typeNamePointer);var typeName=Module.coreHelpers.sizedUtf8ArrayToJSString(Module.HEAPU8,typeNamePointer,responseLength);return typeName};var getArrayElementTypeString=function(arrayPointer){var typeNamePointer=JavaScriptInvoke_GetArrayElementType(arrayPointer);var responseLength=Module.coreHelpers.findCStringLength(Module.HEAPU8,typeNamePointer);var typeName=Module.coreHelpers.sizedUtf8ArrayToJSString(Module.HEAPU8,typeNamePointer,responseLength);return typeName};var isJavaScriptNumber=function(value){return typeof value==="number"};var jsRefNumToJsValueMap=new Map;var jsValueToJsRefNumCache=new Map;var jsRefNumCookieCounter=0;var isPrimitiveType=function(jsValue){return(typeof jsValue!=="object"||jsValue===null)&&typeof jsValue!=="function"&&typeof jsValue!=="symbol"};var cacheRefNum=function(cookie,jsValue){jsRefNumToJsValueMap.set(cookie,jsValue);if(!isPrimitiveType(jsValue)){jsValueToJsRefNumCache.set(jsValue,cookie)}};var hasCachedRefNum=function(cookie){var refNumExists=jsRefNumToJsValueMap.get(cookie)!==undefined;if(!refNumExists&&cookie!==0){throw new Error("RefNum cookie should be 0 if refnum has not been set yet.")}return refNumExists};var getCachedRefNum=function(jsValue){return jsValueToJsRefNumCache.get(jsValue)};var getCachedJsValue=function(cookie){return jsRefNumToJsValueMap.get(cookie)};var generateUniqueRefNumCookie=function(){jsRefNumCookieCounter+=1;return jsRefNumCookieCounter};var dataReadJavaScriptRefNum=function(javaScriptRefNumPointer){var cookie=Data_ReadJavaScriptRefNum(javaScriptRefNumPointer);return jsRefNumToJsValueMap.get(cookie)};var dataWriteJavaScriptRefNum=function(javaScriptRefNumPointer,jsValue){var cookie=Data_ReadJavaScriptRefNum(javaScriptRefNumPointer);if(hasCachedRefNum(cookie)){if(getCachedJsValue(cookie)!==jsValue){throw new Error("JavaScriptRefNum["+cookie+"] already set to "+getCachedJsValue(cookie)+" and can not be set to new value"+jsValue)}return}var cachedCookie=getCachedRefNum(jsValue);if(cachedCookie!==undefined){Data_WriteJavaScriptRefNum(javaScriptRefNumPointer,cachedCookie);return}var newCookie=generateUniqueRefNumCookie();Data_WriteJavaScriptRefNum(javaScriptRefNumPointer,newCookie);cacheRefNum(newCookie,jsValue)};var typeFunctions={Int8:{reader:Module.eggShell.dataReadInt8,writer:Module.eggShell.dataWriteInt8,isValidReturnType:isJavaScriptNumber},Int16:{reader:Module.eggShell.dataReadInt16,writer:Module.eggShell.dataWriteInt16,isValidReturnType:isJavaScriptNumber},Int32:{reader:Module.eggShell.dataReadInt32,writer:Module.eggShell.dataWriteInt32,isValidReturnType:isJavaScriptNumber},UInt8:{reader:Module.eggShell.dataReadUInt8,writer:Module.eggShell.dataWriteUInt8,isValidReturnType:isJavaScriptNumber},UInt16:{reader:Module.eggShell.dataReadUInt16,writer:Module.eggShell.dataWriteUInt16,isValidReturnType:isJavaScriptNumber},UInt32:{reader:Module.eggShell.dataReadUInt32,writer:Module.eggShell.dataWriteUInt32,isValidReturnType:isJavaScriptNumber},Single:{reader:Module.eggShell.dataReadSingle,writer:Module.eggShell.dataWriteSingle,isValidReturnType:isJavaScriptNumber},Double:{reader:Module.eggShell.dataReadDouble,writer:Module.eggShell.dataWriteDouble,isValidReturnType:isJavaScriptNumber},String:{reader:Module.eggShell.dataReadString,writer:Module.eggShell.dataWriteString,isValidReturnType:function(value){return typeof value==="string"}},Boolean:{reader:Module.eggShell.dataReadBoolean,writer:Module.eggShell.dataWriteBoolean,isValidReturnType:function(value){return typeof value==="boolean"}},ArrayInt8:{reader:Module.eggShell.dataReadTypedArray,writer:Module.eggShell.dataWriteTypedArray,isValidReturnType:function(value){return value instanceof Int8Array}},ArrayInt16:{reader:Module.eggShell.dataReadTypedArray,writer:Module.eggShell.dataWriteTypedArray,isValidReturnType:function(value){return value instanceof Int16Array}},ArrayInt32:{reader:Module.eggShell.dataReadTypedArray,writer:Module.eggShell.dataWriteTypedArray,isValidReturnType:function(value){return value instanceof Int32Array}},ArrayUInt8:{reader:Module.eggShell.dataReadTypedArray,writer:Module.eggShell.dataWriteTypedArray,isValidReturnType:function(value){return value instanceof Uint8Array}},ArrayUInt16:{reader:Module.eggShell.dataReadTypedArray,writer:Module.eggShell.dataWriteTypedArray,isValidReturnType:function(value){return value instanceof Uint16Array}},ArrayUInt32:{reader:Module.eggShell.dataReadTypedArray,writer:Module.eggShell.dataWriteTypedArray,isValidReturnType:function(value){return value instanceof Uint32Array}},ArraySingle:{reader:Module.eggShell.dataReadTypedArray,writer:Module.eggShell.dataWriteTypedArray,isValidReturnType:function(value){return value instanceof Float32Array}},ArrayDouble:{reader:Module.eggShell.dataReadTypedArray,writer:Module.eggShell.dataWriteTypedArray,isValidReturnType:function(value){return value instanceof Float64Array}},JavaScriptRefNum:{reader:dataReadJavaScriptRefNum,writer:dataWriteJavaScriptRefNum,isValidReturnType:function(){return true}}};var createJavaScriptParametersArray=function(parametersPointer,parametersCount){var parameters=new Array(parametersCount);for(var index=0;index<parametersCount;index+=1){var typeName=getParameterTypeString(parametersPointer,index);var parameterPointer=JavaScriptInvoke_GetParameterPointer(parametersPointer,index);if(typeName==="Array"){typeName+=getArrayElementTypeString(parameterPointer)}var parameterValue=undefined;var readFunction=typeFunctions[typeName].reader;if(readFunction===undefined){throw new Error(" Unsupported type = "+typeName+" for parameter with index = "+index)}else{parameterValue=readFunction(parameterPointer)}parameters[index]=parameterValue}return parameters};var findJavaScriptFunctionToCall=function(functionName,isInternalFunction){if(isInternalFunction){return{functionToCall:internalFunctionsMap.get(functionName),context:undefined}}var names=functionName.split(".");var jsSelfScope=typeof self!=="undefined"?self:{};var jsGlobalScope=typeof global!=="undefined"?global:jsSelfScope;var context=typeof window!=="undefined"?window:jsGlobalScope;var functionToCall=context[names[0]];var namesIndex;for(namesIndex=1;namesIndex<names.length;namesIndex+=1){if(functionToCall===undefined){break}context=functionToCall;functionToCall=context[names[namesIndex]]}if(typeof functionToCall!=="function"){functionToCall=undefined;context=undefined}return{functionToCall:functionToCall,context:context}};var completionCallbackRetrievalEnum={AVAILABLE:"AVAILABLE",RETRIEVED:"RETRIEVED",UNRETRIEVABLE:"UNRETRIEVABLE"};var completionCallbackInvocationEnum={PENDING:"PENDING",FULFILLED:"FULFILLED",REJECTED:"REJECTED"};var updateReturnValue=function(functionName,returnTypeName,returnValuePointer,returnUserValue,errorStatusPointer,errorCodePointer,errorSourcePointer){if(returnTypeName==="StaticTypeAndData"){return}var typeConfig=typeFunctions[returnTypeName];var source;var code;if(typeConfig===undefined){source=ERRORS.kNIUnsupportedLabVIEWReturnTypeInJavaScriptInvoke.MESSAGE+"\nfunction: "+functionName;source=Module.coreHelpers.createSourceFromMessage(source);code=ERRORS.kNIUnsupportedLabVIEWReturnTypeInJavaScriptInvoke.CODE;Module.coreHelpers.mergeErrors(true,code,source,errorStatusPointer,errorCodePointer,errorSourcePointer);return}else if(!typeConfig.isValidReturnType(returnUserValue)){source=ERRORS.kNITypeMismatchForReturnTypeInJavaScriptInvoke.MESSAGE+"\nfunction: "+functionName;source=Module.coreHelpers.createSourceFromMessage(source);code=ERRORS.kNITypeMismatchForReturnTypeInJavaScriptInvoke.CODE;Module.coreHelpers.mergeErrors(true,code,source,errorStatusPointer,errorCodePointer,errorSourcePointer);return}typeConfig.writer(returnValuePointer,returnUserValue)};var tryUpdateReturnValue=function(functionName,returnTypeName,returnValuePointer,returnValue,errorStatusPointer,errorCodePointer,errorSourcePointer,completionCallbackStatus){try{updateReturnValue(functionName,returnTypeName,returnValuePointer,returnValue,errorStatusPointer,errorCodePointer,errorSourcePointer);completionCallbackStatus.retrievalState=completionCallbackRetrievalEnum.UNRETRIEVABLE;completionCallbackStatus.invocationState=completionCallbackInvocationEnum.FULFILLED}catch(ex){var newErrorStatus=true;var newErrorCode=ERRORS.kNIUnableToSetReturnValueInJavaScriptInvoke.CODE;var errorMessage=Module.coreHelpers.formatMessageWithException(ERRORS.kNIUnableToSetReturnValueInJavaScriptInvoke.MESSAGE+"\nfunction: "+functionName,ex);var newErrorSource=Module.coreHelpers.createSourceFromMessage(errorMessage);Module.coreHelpers.mergeErrors(newErrorStatus,newErrorCode,newErrorSource,errorStatusPointer,errorCodePointer,errorSourcePointer);completionCallbackStatus.retrievalState=completionCallbackRetrievalEnum.UNRETRIEVABLE;completionCallbackStatus.invocationState=completionCallbackInvocationEnum.REJECTED}};var generateCompletionCallback=function(occurrencePointer,functionName,returnTypeName,returnValuePointer,errorStatusPointer,errorCodePointer,errorSourcePointer,completionCallbackStatus,isInternalFunction){var completionCallback=function(returnValue){if(completionCallbackStatus.invocationState===completionCallbackInvocationEnum.FULFILLED){throw new Error("The completion callback was invoked more than once for "+functionName+".")}if(completionCallbackStatus.invocationState===completionCallbackInvocationEnum.REJECTED){throw new Error("The call to "+functionName+" threw an error, so this callback cannot be invoked.")}if(!(returnValue instanceof Error)){tryUpdateReturnValue(functionName,returnTypeName,returnValuePointer,returnValue,errorStatusPointer,errorCodePointer,errorSourcePointer,completionCallbackStatus)}else{if(isInternalFunction){throw returnValue}var newErrorStatus=true;var newErrorCode=ERRORS.kNIUnableToSetReturnValueInJavaScriptInvoke.CODE;var errorMessage=Module.coreHelpers.formatMessageWithException(ERRORS.kNIUnableToSetReturnValueInJavaScriptInvoke.MESSAGE+"\nfunction: "+functionName,returnValue);var newErrorSource=Module.coreHelpers.createSourceFromMessage(errorMessage);Module.coreHelpers.mergeErrors(newErrorStatus,newErrorCode,newErrorSource,errorStatusPointer,errorCodePointer,errorSourcePointer)}Module.eggShell.setOccurrenceAsync(occurrencePointer)};return completionCallback};var generateAPI=function(occurrencePointer,functionName,returnTypeName,returnValuePointer,errorStatusPointer,errorCodePointer,errorSourcePointer,completionCallbackStatus,isInternalFunction){var api={};api.getCompletionCallback=function(){if(completionCallbackStatus.retrievalState===completionCallbackRetrievalEnum.RETRIEVED){throw new Error("The completion callback was retrieved more than once for "+functionName+".")}if(completionCallbackStatus.retrievalState===completionCallbackRetrievalEnum.UNRETRIEVABLE){throw new Error("The API being accessed for "+functionName+" is not valid anymore.")}completionCallbackStatus.retrievalState=completionCallbackRetrievalEnum.RETRIEVED;return generateCompletionCallback(occurrencePointer,functionName,returnTypeName,returnValuePointer,errorStatusPointer,errorCodePointer,errorSourcePointer,completionCallbackStatus,isInternalFunction)};if(isInternalFunction){api.setLabVIEWError=function(status,code,source){Module.coreHelpers.mergeErrors(status,code,source,errorStatusPointer,errorCodePointer,errorSourcePointer)}}return api};publicAPI.javaScriptInvoke.registerInternalFunctions=function(functionsToAdd){Object.keys(functionsToAdd).forEach(function(name){if(internalFunctionsMap.has(name)){throw new Error("Internal function already registered for name:"+name)}if(typeof functionsToAdd[name]!=="function"){throw new Error("Cannot add non-function "+name+" as a function.")}internalFunctionsMap.set(name,functionsToAdd[name])})};Module.javaScriptInvoke.jsJavaScriptInvoke=function(occurrencePointer,functionNamePointer,returnPointer,parametersPointer,parametersCount,isInternalFunction,errorStatusPointer,errorCodePointer,errorSourcePointer){var newErrorStatus=false;var newErrorCode=ERRORS.NO_ERROR.CODE;var newErrorSource=ERRORS.NO_ERROR.MESSAGE;var functionName=Module.eggShell.dataReadString(functionNamePointer);var parameters=undefined;var errorMessage;try{parameters=createJavaScriptParametersArray(parametersPointer,parametersCount)}catch(ex){newErrorStatus=true;newErrorCode=ERRORS.kNIUnsupportedParameterTypeInJavaScriptInvoke.CODE;errorMessage=Module.coreHelpers.formatMessageWithException(ERRORS.kNIUnsupportedParameterTypeInJavaScriptInvoke.MESSAGE+"\nfunction: "+functionName,ex);newErrorSource=Module.coreHelpers.createSourceFromMessage(errorMessage);Module.coreHelpers.mergeErrors(newErrorStatus,newErrorCode,newErrorSource,errorStatusPointer,errorCodePointer,errorSourcePointer);Module.eggShell.setOccurrence(occurrencePointer);return}var functionAndContext=findJavaScriptFunctionToCall(functionName,isInternalFunction);var functionToCall=functionAndContext.functionToCall;var context=functionAndContext.context;if(functionToCall===undefined){newErrorStatus=true;newErrorCode=ERRORS.kNIUnableToFindFunctionForJavaScriptInvoke.CODE;newErrorSource=ERRORS.kNIUnableToFindFunctionForJavaScriptInvoke.MESSAGE+"\nfunction: "+functionName;Module.coreHelpers.mergeErrors(newErrorStatus,newErrorCode,newErrorSource,errorStatusPointer,errorCodePointer,errorSourcePointer);Module.eggShell.setOccurrence(occurrencePointer);return}var returnTypeName=getParameterTypeString(returnPointer,0);var returnValuePointer=undefined;if(returnTypeName!=="StaticTypeAndData"){returnValuePointer=JavaScriptInvoke_GetParameterPointer(returnPointer,0)}if(returnTypeName==="Array"){returnTypeName+=getArrayElementTypeString(returnValuePointer)}var completionCallbackStatus={retrievalState:completionCallbackRetrievalEnum.AVAILABLE,invocationState:completionCallbackInvocationEnum.PENDING};var returnValue=undefined;var api;if(functionToCall.length===parameters.length+1){api=generateAPI(occurrencePointer,functionName,returnTypeName,returnValuePointer,errorStatusPointer,errorCodePointer,errorSourcePointer,completionCallbackStatus,isInternalFunction);parameters.push(api)}try{returnValue=functionToCall.apply(context,parameters)}catch(ex){if(isInternalFunction){throw ex}newErrorStatus=true;newErrorCode=ERRORS.kNIUnableToInvokeAJavaScriptFunction.CODE;errorMessage=Module.coreHelpers.formatMessageWithException(ERRORS.kNIUnableToInvokeAJavaScriptFunction.MESSAGE+"\nfunction: "+functionName,ex);newErrorSource=Module.coreHelpers.createSourceFromMessage(errorMessage);Module.coreHelpers.mergeErrors(newErrorStatus,newErrorCode,newErrorSource,errorStatusPointer,errorCodePointer,errorSourcePointer);completionCallbackStatus.retrievalState=completionCallbackRetrievalEnum.UNRETRIEVABLE;completionCallbackStatus.invocationState=completionCallbackInvocationEnum.REJECTED;Module.eggShell.setOccurrence(occurrencePointer);return}if(completionCallbackStatus.retrievalState===completionCallbackRetrievalEnum.AVAILABLE){tryUpdateReturnValue(functionName,returnTypeName,returnValuePointer,returnValue,errorStatusPointer,errorCodePointer,errorSourcePointer,completionCallbackStatus);Module.eggShell.setOccurrence(occurrencePointer)}return};Module.javaScriptInvoke.jsIsNotAJavaScriptRefnum=function(returnPointer,javaScriptRefNumPointer){var cookie=Data_ReadJavaScriptRefNum(javaScriptRefNumPointer);var isNotAJavaScriptRefnum=!hasCachedRefNum(cookie);Module.eggShell.dataWriteBoolean(returnPointer,isNotAJavaScriptRefnum)}}})();var assignJavaScriptInvoke$1=assignJavaScriptInvoke;var assignPropertyNode;(function(){var ERRORS={NO_ERROR:{CODE:0,MESSAGE:""},kNIObjectReferenceIsInvalid:{CODE:1055,MESSAGE:"Object reference is invalid."}};assignPropertyNode=function(Module,publicAPI){Module.propertyNode={};publicAPI.propertyNode={};var readProperty=function(){};var writeProperty=function(){};Module.propertyNode.jsPropertyNodeWrite=function(viNamePointer,controlIdPointer,propertyNamePointer,tempVariableTypePointer,tempVariableDataPointer,errorStatusPointer,errorCodePointer,errorSourcePointer){var newErrorStatus=false;var newErrorCode=ERRORS.NO_ERROR.CODE;var newErrorSource=ERRORS.NO_ERROR.MESSAGE;var viName=Module.eggShell.dataReadString(viNamePointer);var controlId=Module.eggShell.dataReadString(controlIdPointer);var propertyName=Module.eggShell.dataReadString(propertyNamePointer);var valueRef=Module.eggShell.createValueRef(tempVariableTypePointer,tempVariableDataPointer);try{writeProperty(viName,controlId,propertyName,valueRef)}catch(ex){newErrorStatus=true;newErrorCode=ERRORS.kNIObjectReferenceIsInvalid.CODE;newErrorSource=Module.coreHelpers.formatMessageWithException(ERRORS.kNIObjectReferenceIsInvalid.MESSAGE,ex);newErrorSource=Module.coreHelpers.createSourceFromMessage(newErrorSource);Module.coreHelpers.mergeErrors(newErrorStatus,newErrorCode,newErrorSource,errorStatusPointer,errorCodePointer,errorSourcePointer);return}};Module.propertyNode.jsPropertyNodeRead=function(viNamePointer,controlIdPointer,propertyNamePointer,tempVariableTypePointer,tempVariableDataPointer,errorStatusPointer,errorCodePointer,errorSourcePointer){var newErrorStatus=false;var newErrorCode=ERRORS.NO_ERROR.CODE;var newErrorSource=ERRORS.NO_ERROR.MESSAGE;var viName=Module.eggShell.dataReadString(viNamePointer);var controlId=Module.eggShell.dataReadString(controlIdPointer);var propertyName=Module.eggShell.dataReadString(propertyNamePointer);var valueRef=Module.eggShell.createValueRef(tempVariableTypePointer,tempVariableDataPointer);try{readProperty(viName,controlId,propertyName,valueRef)}catch(ex){newErrorStatus=true;newErrorCode=ERRORS.kNIObjectReferenceIsInvalid.CODE;newErrorSource=Module.coreHelpers.formatMessageWithException(ERRORS.kNIObjectReferenceIsInvalid.MESSAGE,ex);newErrorSource=Module.coreHelpers.createSourceFromMessage(newErrorSource);Module.coreHelpers.mergeErrors(newErrorStatus,newErrorCode,newErrorSource,errorStatusPointer,errorCodePointer,errorSourcePointer);return}};publicAPI.propertyNode.setPropertyReadFunction=Module.propertyNode.setPropertyReadFunction=function(fn){if(typeof fn!=="function"){throw new Error("PropertyRead must be a callable function")}readProperty=fn};publicAPI.propertyNode.setPropertyWriteFunction=Module.propertyNode.setPropertyWriteFunction=function(fn){if(typeof fn!=="function"){throw new Error("PropertyWrite must be a callable function")}writeProperty=fn}}})();var assignPropertyNode$1=assignPropertyNode;var assignEventHelpers;(function(){assignEventHelpers=function(Module,publicAPI){Module.eventHelpers={};publicAPI.eventHelpers={};var registerForControlEvent=function(){throw new Error("No event registration callback was supplied")};var unRegisterForControlEvent=function(){throw new Error("No event un-registration callback was supplied")};Module.eventHelpers.jsRegisterForControlEvent=function(viNamePointer,controlId,eventId,eventOracleIndex){var viName=Module.eggShell.dataReadString(viNamePointer);registerForControlEvent(viName,controlId,eventId,eventOracleIndex)};Module.eventHelpers.jsUnRegisterForControlEvent=function(viNamePointer,controlId,eventId,eventOracleIndex){var viName=Module.eggShell.dataReadString(viNamePointer);unRegisterForControlEvent(viName,controlId,eventId,eventOracleIndex)};publicAPI.eventHelpers.setRegisterForControlEventsFunction=Module.eventHelpers.setRegisterForControlEventsFunction=function(fn){if(typeof fn!=="function"){throw new Error("RegisterForControlEvents must be a callable function")}registerForControlEvent=fn};publicAPI.eventHelpers.setUnRegisterForControlEventsFunction=Module.eventHelpers.setUnRegisterForControlEventsFunction=function(fn){if(typeof fn!=="function"){throw new Error("UnRegisterForControlEvents must be a callable function")}unRegisterForControlEvent=fn};publicAPI.eventHelpers.occurEvent=Module.eventHelpers.occurEvent=function(eventOracleIndex,controlId,eventType,writeCallback,eventDataTypeValueRef,eventData){var allocatedDataValueRef=Module.eggShell.allocateData(eventDataTypeValueRef.typeRef);writeCallback(allocatedDataValueRef,eventData);Module._OccurEvent(Module.eggShell.v_userShell,eventOracleIndex,controlId,eventType,allocatedDataValueRef.typeRef,allocatedDataValueRef.dataRef);Module.eggShell.deallocateData(allocatedDataValueRef)}}})();var assignEventHelpers$1=assignEventHelpers;const moduleBuilders=[assignCoreHelpers$1,assignTypeHelpers$1,assignEggShell$1,assignHttpClient$1,assignJavaScriptInvoke$1,assignPropertyNode$1,assignEventHelpers$1];class Vireo{constructor(Module){let that=this;moduleBuilders.forEach(function(currBuilder){currBuilder(Module,that)})}}const isObject=function(obj){return typeof obj==="object"&&obj!==null};const createModuleBase=function(config){const Module=isObject(config)&&isObject(config.customModule)?config.customModule:{};if(Module.TOTAL_MEMORY!==undefined){throw new Error("Vireo no longer supports configuration of TOTAL_MEMORY. As growable memory is always enabled, configuration of TOTAL_MEMORY is no longer allowed.")}if(isObject(config)){if(typeof config.wasmUrl==="string"){Module.locateFile=function(path,prefix){if(path.endsWith(".wasm")){return config.wasmUrl}return prefix+path}}}let ttyout=[];Module.stdout=function(val){if(val===null||val===10){Module.print(Module.coreHelpers.sizedUtf8ArrayToJSString(ttyout,0,ttyout.length));ttyout=[]}else{ttyout.push(val)}};Module.vireoWasmReady=new Promise(function(resolve,reject){Module.onRuntimeInitialized=function(){Module.onAbort=undefined;resolve()};Module.onAbort=function(){reject()}});Object.defineProperty(Module,"then",{set:function(){},get:function(){return undefined}});return Module};const createInstance=function(createVireoCore,config){if(config!==undefined&&!isObject(config)){throw new Error("The createInstance config parameter must be a valid configuration object or ommitted altogether, received: "+config)}const Module=createModuleBase(config);createVireoCore(Module);return Module.vireoWasmReady.then(function(){return new Vireo(Module)})};const createInstance$1=createInstance.bind(undefined,VireoCreateCoreModule);var vireo_loader_wasm32UnknownEmscripten_release={createInstance:createInstance$1,staticHelpers:staticHelpers};return vireo_loader_wasm32UnknownEmscripten_release});